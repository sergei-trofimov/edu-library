(self.webpackChunkedu_library=self.webpackChunkedu_library||[]).push([[179],{8255:Ye=>{function we(F){return Promise.resolve().then(()=>{var v=new Error("Cannot find module '"+F+"'");throw v.code="MODULE_NOT_FOUND",v})}we.keys=()=>[],we.resolve=we,we.id=8255,Ye.exports=we},3018:(Ye,we,F)=>{"use strict";F.d(we,{deG:()=>Zf,tb:()=>VC,AFp:()=>LC,ip1:()=>d_,CZH:()=>Rg,hGG:()=>E_,z2F:()=>Lg,sBO:()=>lg,Sil:()=>Pg,_Vd:()=>_d,EJc:()=>Hw,SBq:()=>Lo,qLn:()=>Ao,vpe:()=>xa,gxx:()=>ya,tBr:()=>ou,XFs:()=>Se,OlP:()=>Qt,zs3:()=>qt,ZZ4:()=>Nu,aQg:()=>ug,soG:()=>Mg,YKP:()=>fS,v3s:()=>JA,h0i:()=>wf,PXZ:()=>ZA,R0b:()=>Ts,FiY:()=>Ki,Lbi:()=>$w,g9A:()=>Ng,Qsj:()=>rw,FYo:()=>vf,JOm:()=>R,Tiy:()=>Ly,q3G:()=>rn,tp0:()=>qs,EAV:()=>tR,Rgc:()=>dg,dDg:()=>Rf,DyG:()=>_c,q4F:()=>il,GfV:()=>Fy,s_b:()=>$y,ifc:()=>yt,eFA:()=>QC,G48:()=>KC,X6Q:()=>Kw,_c5:()=>oR,VLi:()=>zA,c2e:()=>jC,zSh:()=>jh,wAp:()=>nt,vHH:()=>fe,EiD:()=>Fl,mCW:()=>xc,qzn:()=>Rc,JVY:()=>ym,pB0:()=>hh,eBb:()=>B_,L6k:()=>j_,LAX:()=>br,cg1:()=>el,Tjo:()=>Uu,kL8:()=>ng,yhl:()=>dh,dqk:()=>$,sIi:()=>zp,CqO:()=>Qc,QGY:()=>ny,F4k:()=>ld,RDi:()=>rs,AaK:()=>Y,z3N:()=>Ri,TTD:()=>zu,xp6:()=>Nm,uIk:()=>nd,Suo:()=>Rw,Xpm:()=>lo,lG2:()=>xd,Yz7:()=>wt,cJS:()=>Mr,oAB:()=>Ho,Yjl:()=>Ms,Y36:()=>Po,_UZ:()=>ey,qZA:()=>gi,TgZ:()=>Xm,n5z:()=>Do,Ikx:()=>TE,LFG:()=>ln,$8M:()=>Hs,NdJ:()=>Jc,CRH:()=>gC,ALo:()=>hC,lcZ:()=>xr,Q6J:()=>Tu,iGM:()=>Aw,LSH:()=>uu,kYT:()=>fo,YNc:()=>Zm,_uU:()=>mE,Oqu:()=>cy});var v=F(9765),X=F(5319),k=F(7574),ce=F(6682),ne=F(2441);var ue=F(1307);function ee(){return new v.xQ}function V(r){for(let i in r)if(r[i]===V)return i;throw Error("Could not find renamed property on target object.")}function Y(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Y).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function ae(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const be=V({__forward_ref__:V});function he(r){return r.__forward_ref__=he,r.toString=function(){return Y(this())},r}function K(r){return ye(r)?r():r}function ye(r){return"function"==typeof r&&r.hasOwnProperty(be)&&r.__forward_ref__===he}class fe extends Error{constructor(i,o){super(function(r,i){return`${r?`NG0${r}: `:""}${i}`}(i,o)),this.code=i}}function Oe(r){return"string"==typeof r?r:null==r?"":String(r)}function Tt(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Oe(r)}function _t(r,i){const o=i?` in ${i}`:"";throw new fe("201",`No provider for ${Tt(r)} found${o}`)}function an(r,i){null==r&&function(r,i,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,r,null,"!=")}function wt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Mr(r){return{providers:r.providers||[],imports:r.imports||[]}}function mr(r){return Te(r,Nt)||Te(r,uo)}function Te(r,i){return r.hasOwnProperty(i)?r[i]:null}function Ei(r){return r&&(r.hasOwnProperty(Gr)||r.hasOwnProperty(et))?r[Gr]:null}const Nt=V({\u0275prov:V}),Gr=V({\u0275inj:V}),uo=V({ngInjectableDef:V}),et=V({ngInjectorDef:V});var Se=(()=>((Se=Se||{})[Se.Default=0]="Default",Se[Se.Host=1]="Host",Se[Se.Self=2]="Self",Se[Se.SkipSelf=4]="SkipSelf",Se[Se.Optional=8]="Optional",Se))();let Ut;function fn(r){const i=Ut;return Ut=r,i}function kt(r,i,o){const u=mr(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Se.Optional?null:void 0!==i?i:void _t(Y(r),"Injector")}function We(r){return{toString:r}.toString()}var Pr=(()=>((Pr=Pr||{})[Pr.OnPush=0]="OnPush",Pr[Pr.Default=1]="Default",Pr))(),yt=(()=>((yt=yt||{})[yt.Emulated=0]="Emulated",yt[yt.None=2]="None",yt[yt.ShadowDom=3]="ShadowDom",yt))();const yr="undefined"!=typeof globalThis&&globalThis,$u="undefined"!=typeof window&&window,G="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$=yr||"undefined"!=typeof global&&global||$u||G,Ue={},Ve=[],Wt=V({\u0275cmp:V}),jn=V({\u0275dir:V}),un=V({\u0275pipe:V}),Or=V({\u0275mod:V}),At=V({\u0275loc:V}),on=V({\u0275fac:V}),Fi=V({__NG_ELEMENT_ID__:V});let gl=0;function lo(r){return We(()=>{const o={},u={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Pr.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||Ve,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||yt.Emulated,id:"c",styles:r.styles||Ve,_:null,setInput:null,schemas:r.schemas||null,tView:null},c=r.directives,d=r.features,g=r.pipes;return u.id+=gl++,u.inputs=Go(r.inputs,o),u.outputs=Go(r.outputs),d&&d.forEach(y=>y(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(ho):null,u.pipeDefs=g?()=>("function"==typeof g?g():g).map(yl):null,u})}function ho(r){return Bn(r)||function(r){return r[jn]||null}(r)}function yl(r){return function(r){return r[un]||null}(r)}const si={};function Ho(r){return We(()=>{const i={type:r.type,bootstrap:r.bootstrap||Ve,declarations:r.declarations||Ve,imports:r.imports||Ve,exports:r.exports||Ve,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(si[r.id]=r.type),i})}function fo(r,i){return We(()=>{const o=or(r,!0);o.declarations=i.declarations||Ve,o.imports=i.imports||Ve,o.exports=i.exports||Ve})}function Go(r,i){if(null==r)return Ue;const o={};for(const u in r)if(r.hasOwnProperty(u)){let c=r[u],d=c;Array.isArray(c)&&(d=c[1],c=c[0]),o[c]=u,i&&(i[c]=d)}return o}const xd=lo;function Ms(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function Bn(r){return r[Wt]||null}function or(r,i){const o=r[Or]||null;if(!o&&!0===i)throw new Error(`Type ${Y(r)} does not have '\u0275mod' property.`);return o}function ji(r){return Array.isArray(r)&&"object"==typeof r[1]}function gn(r){return Array.isArray(r)&&!0===r[1]}function Ls(r){return 0!=(8&r.flags)}function Fa(r){return 2==(2&r.flags)}function Ko(r){return 1==(1&r.flags)}function ai(r){return null!==r.template}function Gu(r){return 0!=(512&r[2])}function mn(r,i){return r.hasOwnProperty(on)?r[on]:null}class Bi{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function zu(){return ja}function ja(r){return r.type.prototype.ngOnChanges&&(r.setInput=jf),Bd}function Bd(){const r=Ba(this),i=null==r?void 0:r.current;if(i){const o=r.previous;if(o===Ue)r.previous=i;else for(let u in i)o[u]=i[u];r.current=null,this.ngOnChanges(i)}}function jf(r,i,o,u){const c=Ba(r)||function(r,i){return r[wl]=i}(r,{previous:Ue,current:null}),d=c.current||(c.current={}),g=c.previous,y=this.declaredInputs[o],w=g[y];d[y]=new Bi(w&&w.currentValue,i,g===Ue),r[u]=i}zu.ngInherit=!0;const wl="__ngSimpleChanges__";function Ba(r){return r[wl]||null}let Ha;function rs(r){Ha=r}function Yt(r){return!!r.listen}const Ga={createRenderer:(r,i)=>void 0!==Ha?Ha:"undefined"!=typeof document?document:void 0};function bt(r){for(;Array.isArray(r);)r=r[0];return r}function kr(r,i){return bt(i[r.index])}function Hi(r,i){return r.data[i]}function ar(r,i){const o=i[r];return ji(o)?o:o[0]}function qu(r){return 4==(4&r[2])}function Xo(r){return 128==(128&r[2])}function is(r,i){return null==i?null:r[i]}function Wa(r){r[18]=0}function Ku(r,i){r[5]+=i;let o=r,u=r[3];for(;null!==u&&(1===i&&1===o[5]||-1===i&&0===o[5]);)u[5]+=i,o=u,u=u[3]}const tt={lFrame:rc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Zu(){return tt.bindingsEnabled}function Ie(){return tt.lFrame.lView}function vt(){return tt.lFrame.tView}function yn(){let r=Qu();for(;null!==r&&64===r.type;)r=r.parent;return r}function Qu(){return tt.lFrame.currentTNode}function ui(r,i){const o=tt.lFrame;o.currentTNode=r,o.isParent=i}function qa(){return tt.lFrame.isParent}function as(){return tt.isInCheckNoChangesMode}function Gi(r){tt.isInCheckNoChangesMode=r}function js(){return tt.lFrame.bindingIndex++}function ec(r,i){const o=tt.lFrame;o.bindingIndex=o.bindingRootIndex=r,tc(i)}function tc(r){tt.lFrame.currentDirectiveIndex=r}function qd(){return tt.lFrame.currentQueryIndex}function nc(r){tt.lFrame.currentQueryIndex=r}function $f(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function Kd(r,i,o){if(o&Se.SkipSelf){let c=i,d=r;for(;!(c=c.parent,null!==c||o&Se.Host||(c=$f(d),null===c||(d=d[15],10&c.type))););if(null===c)return!1;i=c,r=d}const u=tt.lFrame=Zd();return u.currentTNode=i,u.lView=r,!0}function us(r){const i=Zd(),o=r[1];tt.lFrame=i,i.currentTNode=o.firstChild,i.lView=r,i.tView=o,i.contextLView=r,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Zd(){const r=tt.lFrame,i=null===r?null:r.child;return null===i?rc(r):i}function rc(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function Ka(){const r=tt.lFrame;return tt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const am=Ka;function ic(){const r=Ka();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Lr(){return tt.lFrame.selectedIndex}function Wr(r){tt.lFrame.selectedIndex=r}function cn(){const r=tt.lFrame;return Hi(r.tView,r.selectedIndex)}function sc(r,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const d=r.data[o].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:y,ngAfterViewInit:w,ngAfterViewChecked:C,ngOnDestroy:S}=d;g&&(r.contentHooks||(r.contentHooks=[])).push(-o,g),y&&((r.contentHooks||(r.contentHooks=[])).push(o,y),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,y)),w&&(r.viewHooks||(r.viewHooks=[])).push(-o,w),C&&((r.viewHooks||(r.viewHooks=[])).push(o,C),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,C)),null!=S&&(r.destroyHooks||(r.destroyHooks=[])).push(o,S)}}function Qa(r,i,o){wo(r,i,3,o)}function Ja(r,i,o,u){(3&r[2])===o&&wo(r,i,o,u)}function oc(r,i){let o=r[2];(3&o)===i&&(o&=2047,o+=1,r[2]=o)}function wo(r,i,o,u){const d=null!=u?u:-1,g=i.length-1;let y=0;for(let w=void 0!==u?65535&r[18]:0;w<g;w++)if("number"==typeof i[w+1]){if(y=i[w],null!=u&&y>=u)break}else i[w]<0&&(r[18]+=65536),(y<d||-1==d)&&(ac(r,o,i,w),r[18]=(4294901760&r[18])+w+2),w++}function ac(r,i,o,u){const c=o[u]<0,d=o[u+1],y=r[c?-o[u]:o[u]];if(c){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{d.call(y)}finally{}}}else try{d.call(y)}finally{}}class Xa{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function eu(r,i,o){const u=Yt(r);let c=0;for(;c<o.length;){const d=o[c];if("number"==typeof d){if(0!==d)break;c++;const g=o[c++],y=o[c++],w=o[c++];u?r.setAttribute(i,y,w,g):i.setAttributeNS(g,y,w)}else{const g=d,y=o[++c];cc(g)?u&&r.setProperty(i,g,y):u?r.setAttribute(i,g,y):i.setAttribute(g,y),c++}}return c}function uc(r){return 3===r||4===r||6===r}function cc(r){return 64===r.charCodeAt(0)}function Ii(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const c=i[u];"number"==typeof c?o=c:0===o||lc(r,o,c,null,-1===o||2===o?i[++u]:null)}}return r}function lc(r,i,o,u,c){let d=0,g=r.length;if(-1===i)g=-1;else for(;d<r.length;){const y=r[d++];if("number"==typeof y){if(y===i){g=-1;break}if(y>i){g=d-1;break}}}for(;d<r.length;){const y=r[d];if("number"==typeof y)break;if(y===o){if(null===u)return void(null!==c&&(r[d+1]=c));if(u===r[d+1])return void(r[d+2]=c)}d++,null!==u&&d++,null!==c&&d++}-1!==g&&(r.splice(g,0,i),d=g+1),r.splice(d++,0,o),null!==u&&r.splice(d++,0,u),null!==c&&r.splice(d++,0,c)}function dc(r){return-1!==r}function tu(r){return 32767&r}function nu(r,i){let o=function(r){return r>>16}(r),u=i;for(;o>0;)u=u[15],o--;return u}let hc=!0;function Io(r){const i=hc;return hc=r,i}let _n=0;function li(r,i){const o=lr(r,i);if(-1!==o)return o;const u=i[1];u.firstCreatePass&&(r.injectorIndex=i.length,vr(u.data,r),vr(i,null),vr(u.blueprint,null));const c=fc(r,i),d=r.injectorIndex;if(dc(c)){const g=tu(c),y=nu(c,i),w=y[1].data;for(let C=0;C<8;C++)i[d+C]=y[g+C]|w[g+C]}return i[d+8]=c,d}function vr(r,i){r.push(0,0,0,0,0,0,0,0,i)}function lr(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function fc(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,c=i;for(;null!==c;){const d=c[1],g=d.type;if(u=2===g?d.declTNode:1===g?c[6]:null,null===u)return-1;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function Er(r,i,o){!function(r,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Fi)&&(u=o[Fi]),null==u&&(u=o[Fi]=_n++);const c=255&u;i.data[r+(c>>5)]|=1<<c}(r,i,o)}function Xd(r,i,o){if(o&Se.Optional)return r;_t(i,"NodeInjector")}function Co(r,i,o,u){if(o&Se.Optional&&void 0===u&&(u=null),0==(o&(Se.Self|Se.Host))){const c=r[9],d=fn(void 0);try{return c?c.get(i,u,o&Se.Optional):kt(i,u,o&Se.Optional)}finally{fn(d)}}return Xd(u,i,o)}function zi(r,i,o,u=Se.Default,c){if(null!==r){const d=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(Fi)?r[Fi]:void 0;return"number"==typeof i?i>=0?255&i:Cl:i}(o);if("function"==typeof d){if(!Kd(i,r,u))return u&Se.Host?Xd(c,o,u):Co(i,o,u,c);try{const g=d(u);if(null!=g||u&Se.Optional)return g;_t(o)}finally{am()}}else if("number"==typeof d){let g=null,y=lr(r,i),w=-1,C=u&Se.Host?i[16][6]:null;for((-1===y||u&Se.SkipSelf)&&(w=-1===y?fc(r,i):i[y+8],-1!==w&&gc(u,!1)?(g=i[1],y=tu(w),i=nu(w,i)):y=-1);-1!==y;){const S=i[1];if(cs(d,y,S.data)){const N=Dl(y,i,o,g,u,C);if(N!==An)return N}w=i[y+8],-1!==w&&gc(u,i[1].data[y+8]===C)&&cs(d,y,i)?(g=S,y=tu(w),i=nu(w,i)):y=-1}}}return Co(i,o,u,c)}const An={};function Cl(){return new sa(yn(),Ie())}function Dl(r,i,o,u,c,d){const g=i[1],y=g.data[r+8],S=ia(y,g,o,null==u?Fa(y)&&hc:u!=g&&0!=(3&y.type),c&Se.Host&&d===y);return null!==S?$s(i,g,S,y):An}function ia(r,i,o,u,c){const d=r.providerIndexes,g=i.data,y=1048575&d,w=r.directiveStart,S=d>>20,P=c?y+S:r.directiveEnd;for(let j=u?y:y+S;j<P;j++){const z=g[j];if(j<w&&o===z||j>=w&&z.type===o)return j}if(c){const j=g[w];if(j&&ai(j)&&j.type===o)return w}return null}function $s(r,i,o,u){let c=r[o];const d=i.data;if(function(r){return r instanceof Xa}(c)){const g=c;g.resolving&&function(r,i){throw new fe("200",`Circular dependency in DI detected for ${r}`)}(Tt(d[o]));const y=Io(g.canSeeViewProviders);g.resolving=!0;const w=g.injectImpl?fn(g.injectImpl):null;Kd(r,u,Se.Default);try{c=r[o]=g.factory(void 0,d,r,u),i.firstCreatePass&&o>=u.directiveStart&&function(r,i,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:d}=i.type.prototype;if(u){const g=ja(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,g),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,g)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,c),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,d))}(o,d[o],i)}finally{null!==w&&fn(w),Io(y),g.resolving=!1,am()}}return c}function cs(r,i,o){return!!(o[i+(r>>5)]&1<<r)}function gc(r,i){return!(r&Se.Self||r&Se.Host&&i)}class sa{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return zi(this._tNode,this._lView,i,u,o)}}function Do(r){return We(()=>{const i=r.prototype.constructor,o=i[on]||mc(i),u=Object.prototype;let c=Object.getPrototypeOf(r.prototype).constructor;for(;c&&c!==u;){const d=c[on]||mc(c);if(d&&d!==o)return d;c=Object.getPrototypeOf(c)}return d=>new d})}function mc(r){return ye(r)?()=>{const i=mc(K(r));return i&&i()}:mn(r)}function Hs(r){return function(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const o=r.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const d=o[c];if(uc(d))break;if(0===d)c+=2;else if("number"==typeof d)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(d===i)return o[c+1];c+=2}}}return null}(yn(),r)}const Gs="__parameters__";function zs(r,i,o){return We(()=>{const u=function(r){return function(...o){if(r){const u=r(...o);for(const c in u)this[c]=u[c]}}}(i);function c(...d){if(this instanceof c)return u.apply(this,d),this;const g=new c(...d);return y.annotation=g,y;function y(w,C,S){const N=w.hasOwnProperty(Gs)?w[Gs]:Object.defineProperty(w,Gs,{value:[]})[Gs];for(;N.length<=S;)N.push(null);return(N[S]=N[S]||[]).push(g),w}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}class Qt{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=wt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Zf=new Qt("AnalyzeForEntryComponents"),_c=Function;function Di(r,i){void 0===i&&(i=r);for(let o=0;o<r.length;o++){let u=r[o];Array.isArray(u)?(i===r&&(i=r.slice(0,o)),Di(u,i)):i!==r&&i.push(u)}return i}function Ti(r,i){r.forEach(o=>Array.isArray(o)?Ti(o,i):i(o))}function Si(r,i,o){i>=r.length?r.push(o):r.splice(i,0,o)}function ca(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}const ds={},To="__NG_DI_FLAG__",qi="ngTempTokenPath",fs=/\n/gm,Ws="__source",bc=V({provide:String,useValue:V});let Al;function ps(r){const i=Al;return Al=r,i}function ih(r,i=Se.Default){if(void 0===Al)throw new Error("inject() must be called from an injection context");return null===Al?kt(r,void 0,i):Al.get(r,i&Se.Optional?null:void 0,i)}function ln(r,i=Se.Default){return(Ut||ih)(K(r),i)}function Kr(r){const i=[];for(let o=0;o<r.length;o++){const u=K(r[o]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let c,d=Se.Default;for(let g=0;g<u.length;g++){const y=u[g],w=fm(y);"number"==typeof w?-1===w?c=y.token:d|=w:c=y}i.push(ln(c,d))}else i.push(ln(u))}return i}function la(r,i){return r[To]=i,r.prototype[To]=i,r}function fm(r){return r[To]}function xl(r,i,o,u){const c=r[qi];throw i[Ws]&&c.unshift(i[Ws]),r.message=function(r,i,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let c=Y(i);if(Array.isArray(i))c=i.map(Y).join(" -> ");else if("object"==typeof i){let d=[];for(let g in i)if(i.hasOwnProperty(g)){let y=i[g];d.push(g+":"+("string"==typeof y?JSON.stringify(y):Y(y)))}c=`{${d.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${r.replace(fs,"\n  ")}`}("\n"+r.message,c,o,u),r.ngTokenPath=c,r[qi]=null,r}const ou=la(zs("Inject",r=>({token:r})),-1),Ki=la(zs("Optional"),8),qs=la(zs("SkipSelf"),4);let Tc;function Sc(r){var i;return(null===(i=function(){if(void 0===Tc&&(Tc=null,$.trustedTypes))try{Tc=$.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch(r){}return Tc}())||void 0===i?void 0:i.createHTML(r))||r}class Zr{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Ge extends Zr{getTypeName(){return"HTML"}}class ap extends Zr{getTypeName(){return"Style"}}class st extends Zr{getTypeName(){return"Script"}}class lh extends Zr{getTypeName(){return"URL"}}class up extends Zr{getTypeName(){return"ResourceURL"}}function Ri(r){return r instanceof Zr?r.changingThisBreaksApplicationSecurity:r}function Rc(r,i){const o=dh(r);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===i}function dh(r){return r instanceof Zr&&r.getTypeName()||null}function ym(r){return new Ge(r)}function j_(r){return new ap(r)}function B_(r){return new st(r)}function br(r){return new lh(r)}function hh(r){return new up(r)}class ha{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(Sc(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class cp{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=Sc(i),o;const u=this.inertDocument.createElement("body");return u.innerHTML=Sc(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const o=i.attributes;for(let c=o.length-1;0<c;c--){const g=o.item(c).name;("xmlns:ns1"===g||0===g.indexOf("ns1:"))&&i.removeAttribute(g)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const lp=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,dp=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function xc(r){return(r=String(r)).match(lp)||r.match(dp)?r:"unsafe:"+r}function di(r){const i={};for(const o of r.split(","))i[o]=!0;return i}function Nc(...r){const i={};for(const o of r)for(const u in o)o.hasOwnProperty(u)&&(i[u]=!0);return i}const Fr=di("area,br,col,hr,img,wbr"),fh=di("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Yr=di("rp,rt"),Mc=Nc(Fr,Nc(fh,di("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Nc(Yr,di("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Nc(Yr,fh)),ph=di("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Pc=di("srcset"),gh=Nc(ph,Pc,di("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),di("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Oc=di("script,style,template");class Em{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let c=this.checkClobberedElement(o,o.nextSibling);if(c){o=c;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!Mc.hasOwnProperty(o))return this.sanitizedSomething=!0,!Oc.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=i.attributes;for(let c=0;c<u.length;c++){const d=u.item(c),g=d.name,y=g.toLowerCase();if(!gh.hasOwnProperty(y)){this.sanitizedSomething=!0;continue}let w=d.value;ph[y]&&(w=xc(w)),Pc[y]&&(r=w,w=(r=String(r)).split(",").map(i=>xc(i.trim())).join(", ")),this.buf.push(" ",g,'="',bm(w),'"')}var r;return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();Mc.hasOwnProperty(o)&&!Fr.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(bm(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const kl=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wm=/([^\#-~ |!])/g;function bm(r){return r.replace(/&/g,"&amp;").replace(kl,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(wm,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ll;function Fl(r,i){let o=null;try{Ll=Ll||function(r){const i=new cp(r);return function(){try{return!!(new window.DOMParser).parseFromString(Sc(""),"text/html")}catch(r){return!1}}()?new ha(i):i}(r);let u=i?String(i):"";o=Ll.getInertBodyElement(u);let c=5,d=u;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,u=d,d=o.innerHTML,o=Ll.getInertBodyElement(u)}while(u!==d);return Sc((new Em).sanitizeChildren(Vl(o)||o))}finally{if(o){const u=Vl(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Vl(r){return"content"in r&&function(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var rn=(()=>((rn=rn||{})[rn.NONE=0]="NONE",rn[rn.HTML=1]="HTML",rn[rn.STYLE=2]="STYLE",rn[rn.SCRIPT=3]="SCRIPT",rn[rn.URL=4]="URL",rn[rn.RESOURCE_URL=5]="RESOURCE_URL",rn))();function uu(r){const i=function(){const r=Ie();return r&&r[12]}();return i?i.sanitize(rn.URL,r)||"":Rc(r,"URL")?Ri(r):xc(Oe(r))}const cu="__ngContext__";function hr(r,i){r[cu]=i}function vh(r){const i=function(r){return r[cu]||null}(r);return i?Array.isArray(i)?i:i.lView:null}function Fc(r){return r.ngOriginalError}function pa(r,...i){r.error(...i)}class Ao{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i),u=this._findContext(i),c=(r=i)&&r.ngErrorLogger||pa;var r;c(this._console,"ERROR",i),o&&c(this._console,"ORIGINAL ERROR",o),u&&c(this._console,"ERROR CONTEXT",u)}_findContext(i){return i?i.ngDebugContext||this._findContext(Fc(i)):null}_findOriginalError(i){let o=i&&Fc(i);for(;o&&Fc(o);)o=Fc(o);return o||null}}const Wl=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($))();function m(r){return r instanceof Function?r():r}var R=(()=>((R=R||{})[R.Important=1]="Important",R[R.DashCase=2]="DashCase",R))();function te(r,i){return undefined(r,i)}function $e(r){const i=r[3];return gn(i)?i[3]:i}function Vn(r){return Uc(r[13])}function Zi(r){return Uc(r[4])}function Uc(r){for(;null!==r&&!gn(r);)r=r[4];return r}function gs(r,i,o,u,c){if(null!=u){let d,g=!1;gn(u)?d=u:ji(u)&&(g=!0,u=u[0]);const y=bt(u);0===r&&null!==o?null==c?Rm(i,o,y):ms(i,o,y,c||null,!0):1===r&&null!==o?ms(i,o,y,c||null,!0):2===r?function(r,i,o){const u=fu(r,i);u&&function(r,i,o,u){Yt(r)?r.removeChild(i,o,u):i.removeChild(o)}(r,u,i,o)}(i,y,g):3===r&&i.destroyNode(y),null!=d&&function(r,i,o,u,c){const d=o[7];d!==bt(o)&&gs(i,r,u,d,c);for(let y=10;y<o.length;y++){const w=o[y];Cp(w[1],w,r,i,u,d)}}(i,r,d,o,c)}}function du(r,i,o){return Yt(r)?r.createElement(i,o):null===o?r.createElement(i):r.createElementNS(o,i)}function rv(r,i){const o=r[9],u=o.indexOf(i),c=i[3];1024&i[2]&&(i[2]&=-1025,Ku(c,-1)),o.splice(u,1)}function Am(r,i){if(r.length<=10)return;const o=10+i,u=r[o];if(u){const c=u[17];null!==c&&c!==r&&rv(c,u),i>0&&(r[o-1][4]=u[4]);const d=ca(r,10+i);!function(r,i){Cp(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const g=d[19];null!==g&&g.detachView(d[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function iv(r,i){if(!(256&i[2])){const o=i[11];Yt(o)&&o.destroyNode&&Cp(r,i,o,3,null,null),function(r){let i=r[13];if(!i)return sv(r[1],r);for(;i;){let o=null;if(ji(i))o=i[13];else{const u=i[10];u&&(o=u)}if(!o){for(;i&&!i[4]&&i!==r;)ji(i)&&sv(i[1],i),i=i[3];null===i&&(i=r),ji(i)&&sv(i[1],i),o=i&&i[4]}i=o}}(i)}}function sv(r,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(r,i){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const c=i[o[u]];if(!(c instanceof Xa)){const d=o[u+1];if(Array.isArray(d))for(let g=0;g<d.length;g+=2){const y=c[d[g]],w=d[g+1];try{w.call(y)}finally{}}else try{d.call(c)}finally{}}}}(r,i),function(r,i){const o=r.cleanup,u=i[7];let c=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const g=o[d+1],y="function"==typeof g?g(i):bt(i[g]),w=u[c=o[d+2]],C=o[d+3];"boolean"==typeof C?y.removeEventListener(o[d],w,C):C>=0?u[c=C]():u[c=-C].unsubscribe(),d+=2}else{const g=u[c=o[d+1]];o[d].call(g)}if(null!==u){for(let d=c+1;d<u.length;d++)u[d]();i[7]=null}}(r,i),1===i[1].type&&Yt(i[11])&&i[11].destroy();const o=i[17];if(null!==o&&gn(i[3])){o!==i[3]&&rv(o,i);const u=i[19];null!==u&&u.detachView(r)}}}function bp(r,i,o){return function(r,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[0];if(2&u.flags){const c=r.data[u.directiveStart].encapsulation;if(c===yt.None||c===yt.Emulated)return null}return kr(u,o)}(r,i.parent,o)}function ms(r,i,o,u,c){Yt(r)?r.insertBefore(i,o,u,c):i.insertBefore(o,u,c)}function Rm(r,i,o){Yt(r)?r.appendChild(i,o):i.appendChild(o)}function N0(r,i,o,u,c){null!==u?ms(r,i,o,u,c):Rm(r,i,o)}function fu(r,i){return Yt(r)?r.parentNode(i):i.parentNode}let M0=function(r,i,o){return 40&r.type?kr(r,o):null};function Kl(r,i,o,u){const c=bp(r,u,i),d=i[11],y=function(r,i,o){return M0(r,i,o)}(u.parent||i[6],u,i);if(null!=c)if(Array.isArray(o))for(let w=0;w<o.length;w++)N0(d,c,o[w],y,!1);else N0(d,c,o,y,!1)}function Zl(r,i){if(null!==i){const o=i.type;if(3&o)return kr(i,r);if(4&o)return xm(-1,r[i.index]);if(8&o){const u=i.child;if(null!==u)return Zl(r,u);{const c=r[i.index];return gn(c)?xm(-1,c):bt(c)}}if(32&o)return te(i,r)()||bt(r[i.index]);{const u=Ip(r,i);return null!==u?Array.isArray(u)?u[0]:Zl($e(r[16]),u):Zl(r,i.next)}}return null}function Ip(r,i){return null!==i?r[16][6].projection[i.projection]:null}function xm(r,i){const o=10+r+1;if(o<i.length){const u=i[o],c=u[1].firstChild;if(null!==c)return Zl(u,c)}return i[7]}function Th(r,i,o,u,c,d,g){for(;null!=o;){const y=u[o.index],w=o.type;if(g&&0===i&&(y&&hr(bt(y),u),o.flags|=4),64!=(64&o.flags))if(8&w)Th(r,i,o.child,u,c,d,!1),gs(i,r,c,y,d);else if(32&w){const C=te(o,u);let S;for(;S=C();)gs(i,r,c,S,d);gs(i,r,c,y,d)}else 16&w?Sh(r,i,u,o,c,d):gs(i,r,c,y,d);o=g?o.projectionNext:o.next}}function Cp(r,i,o,u,c,d){Th(o,u,r.firstChild,i,c,d,!1)}function Sh(r,i,o,u,c,d){const g=o[16],w=g[6].projection[u.projection];if(Array.isArray(w))for(let C=0;C<w.length;C++)gs(i,r,c,w[C],d);else Th(r,i,w,g[3],c,d,!0)}function cv(r,i,o){Yt(r)?r.setAttribute(i,"style",o):i.style.cssText=o}function lv(r,i,o){Yt(r)?""===o?r.removeAttribute(i,"class"):r.setAttribute(i,"class",o):i.className=o}function P0(r,i,o){let u=r.length;for(;;){const c=r.indexOf(i,o);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const d=i.length;if(c+d===u||r.charCodeAt(c+d)<=32)return c}o=c+1}}const O0="ng-template";function Tp(r,i,o){let u=0;for(;u<r.length;){let c=r[u++];if(o&&"class"===c){if(c=r[u],-1!==P0(c.toLowerCase(),i,0))return!0}else if(1===c){for(;u<r.length&&"string"==typeof(c=r[u++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function gu(r){return 4===r.type&&r.value!==O0}function k0(r,i,o){return i===(4!==r.type||o?r.value:O0)}function L0(r,i,o){let u=4;const c=r.attrs||[],d=function(r){for(let i=0;i<r.length;i++)if(uc(r[i]))return i;return r.length}(c);let g=!1;for(let y=0;y<i.length;y++){const w=i[y];if("number"!=typeof w){if(!g)if(4&u){if(u=2|1&u,""!==w&&!k0(r,w,o)||""===w&&1===i.length){if(Ys(u))return!1;g=!0}}else{const C=8&u?w:i[++y];if(8&u&&null!==r.attrs){if(!Tp(r.attrs,C,o)){if(Ys(u))return!1;g=!0}continue}const N=Ah(8&u?"class":w,c,gu(r),o);if(-1===N){if(Ys(u))return!1;g=!0;continue}if(""!==C){let P;P=N>d?"":c[N+1].toLowerCase();const j=8&u?P:null;if(j&&-1!==P0(j,C,0)||2&u&&C!==P){if(Ys(u))return!1;g=!0}}}}else{if(!g&&!Ys(u)&&!Ys(w))return!1;if(g&&Ys(w))continue;g=!1,u=w|1&u}}return Ys(u)||g}function Ys(r){return 0==(1&r)}function Ah(r,i,o,u){if(null===i)return-1;let c=0;if(u||!o){let d=!1;for(;c<i.length;){const g=i[c];if(g===r)return c;if(3===g||6===g)d=!0;else{if(1===g||2===g){let y=i[++c];for(;"string"==typeof y;)y=i[++c];continue}if(4===g)break;if(0===g){c+=4;continue}}c+=d?1:2}return-1}return function(r,i){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,r)}function F0(r,i,o=!1){for(let u=0;u<i.length;u++)if(L0(r,i[u],o))return!0;return!1}function dv(r,i){return r?":not("+i.trim()+")":i}function hv(r){let i=r[0],o=1,u=2,c="",d=!1;for(;o<r.length;){let g=r[o];if("string"==typeof g)if(2&u){const y=r[++o];c+="["+g+(y.length>0?'="'+y+'"':"")+"]"}else 8&u?c+="."+g:4&u&&(c+=" "+g);else""!==c&&!Ys(g)&&(i+=dv(d,c),c=""),u=g,d=d||!Ys(u);o++}return""!==c&&(i+=dv(d,c)),i}const ft={};function Nm(r){B0(vt(),Ie(),Lr()+r,as())}function B0(r,i,o,u){if(!u)if(3==(3&i[2])){const d=r.preOrderCheckHooks;null!==d&&Qa(i,d,o)}else{const d=r.preOrderHooks;null!==d&&Ja(i,d,0,o)}Wr(o)}function Cv(r,i){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const c=o[u],d=o[u+1];if(-1!==d){const g=r.data[d];nc(c),g.contentQueries(2,i[d],d)}}}function Np(r,i,o,u,c,d,g,y,w,C){const S=i.blueprint.slice();return S[0]=c,S[2]=140|u,Wa(S),S[3]=S[15]=r,S[8]=o,S[10]=g||r&&r[10],S[11]=y||r&&r[11],S[12]=w||r&&r[12]||null,S[9]=C||r&&r[9]||null,S[6]=d,S[16]=2==i.type?r[16]:S,S}function Gc(r,i,o,u,c){let d=r.data[i];if(null===d)d=function(r,i,o,u,c){const d=Qu(),g=qa(),w=r.data[i]=function(r,i,o,u,c,d){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?d:d&&d.parent,o,i,u,c);return null===r.firstChild&&(r.firstChild=w),null!==d&&(g?null==d.child&&null!==w.parent&&(d.child=w):null===d.next&&(d.next=w)),w}(r,i,o,u,c),tt.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=u,d.attrs=c;const g=function(){const r=tt.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();d.injectorIndex=null===g?-1:g.injectorIndex}return ui(d,!0),d}function Mh(r,i,o,u){if(0===o)return-1;const c=i.length;for(let d=0;d<o;d++)i.push(u),r.blueprint.push(u),r.data.push(null);return c}function Ph(r,i,o){us(i);try{const u=r.viewQuery;null!==u&&bu(1,u,o);const c=r.template;null!==c&&Q0(r,i,c,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Cv(r,i),r.staticViewQueries&&bu(2,r.viewQuery,o);const d=r.components;null!==d&&function(r,i){for(let o=0;o<i.length;o++)Wc(r,i[o])}(i,d)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{i[2]&=-5,ic()}}function Oh(r,i,o,u){const c=i[2];if(256==(256&c))return;us(i);const d=as();try{Wa(i),function(r){tt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&Q0(r,i,o,2,u);const g=3==(3&c);if(!d)if(g){const C=r.preOrderCheckHooks;null!==C&&Qa(i,C,null)}else{const C=r.preOrderHooks;null!==C&&Ja(i,C,0,null),oc(i,0)}if(function(r){for(let i=Vn(r);null!==i;i=Zi(i)){if(!i[2])continue;const o=i[9];for(let u=0;u<o.length;u++){const c=o[u],d=c[3];0==(1024&c[2])&&Ku(d,1),c[2]|=1024}}}(i),function(r){for(let i=Vn(r);null!==i;i=Zi(i))for(let o=10;o<i.length;o++){const u=i[o],c=u[1];Xo(u)&&Oh(c,u,c.template,u[8])}}(i),null!==r.contentQueries&&Cv(r,i),!d)if(g){const C=r.contentCheckHooks;null!==C&&Qa(i,C)}else{const C=r.contentHooks;null!==C&&Ja(i,C,1),oc(i,1)}!function(r,i){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)Wr(~c);else{const d=c,g=o[++u],y=o[++u];ec(g,d),y(2,i[d])}}}finally{Wr(-1)}}(r,i);const y=r.components;null!==y&&function(r,i){for(let o=0;o<i.length;o++)Br(r,i[o])}(i,y);const w=r.viewQuery;if(null!==w&&bu(2,w,u),!d)if(g){const C=r.viewCheckHooks;null!==C&&Qa(i,C)}else{const C=r.viewHooks;null!==C&&Ja(i,C,2),oc(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),d||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,Ku(i[3],-1))}finally{ic()}}function Vm(r,i,o,u){const c=i[10],d=!as(),g=qu(i);try{d&&!g&&c.begin&&c.begin(),g&&Ph(r,i,u),Oh(r,i,o,u)}finally{d&&!g&&c.end&&c.end()}}function Q0(r,i,o,u,c){const d=Lr(),g=2&u;try{Wr(-1),g&&i.length>20&&B0(r,i,20,as()),o(u,c)}finally{Wr(d)}}function Ir(r,i,o){!Zu()||(function(r,i,o,u){const c=o.directiveStart,d=o.directiveEnd;r.firstCreatePass||li(o,i),hr(u,i);const g=o.initialInputs;for(let y=c;y<d;y++){const w=r.data[y],C=ai(w);C&&nb(i,o,w);const S=$s(i,r,y,o);hr(S,i),null!==g&&Mp(0,y-c,S,w,0,g),C&&(ar(o.index,i)[8]=S)}}(r,i,o,kr(o,i)),128==(128&o.flags)&&function(r,i,o){const u=o.directiveStart,c=o.directiveEnd,g=o.index,y=tt.lFrame.currentDirectiveIndex;try{Wr(g);for(let w=u;w<c;w++){const C=r.data[w],S=i[w];tc(w),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&X0(C,S)}}finally{Wr(-1),tc(y)}}(r,i,o))}function zc(r,i,o=kr){const u=i.localNames;if(null!==u){let c=i.index+1;for(let d=0;d<u.length;d+=2){const g=u[d+1],y=-1===g?o(i,r):r[g];r[c++]=y}}}function vu(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=kh(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function kh(r,i,o,u,c,d,g,y,w,C){const S=20+u,N=S+c,P=function(r,i){const o=[];for(let u=0;u<i;u++)o.push(u<r?null:ft);return o}(S,N),j="function"==typeof C?C():C;return P[1]={type:r,blueprint:P,template:o,queries:null,viewQuery:y,declTNode:i,data:P.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:w,consts:j,incompleteFirstPass:!1}}function Um(r,i,o,u){const c=Xl(i);null===o?c.push(u):(c.push(o),r.firstCreatePass&&xv(r).push(u,c.length-1))}function it(r,i,o){for(let u in r)if(r.hasOwnProperty(u)){const c=r[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(i,c):o[u]=[i,c]}return o}function se(r,i,o,u,c,d,g,y){const w=kr(i,o);let S,C=i.inputs;!y&&null!=C&&(S=C[u])?(Lp(r,o,S,u,c),Fa(i)&&function(r,i){const o=ar(i,r);16&o[2]||(o[2]|=64)}(o,i.index)):3&i.type&&(u=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),c=null!=g?g(c,i.value||"",u):c,Yt(d)?d.setProperty(w,u,c):cc(u)||(w.setProperty?w.setProperty(u,c):w[u]=c))}function Sv(r,i,o,u){let c=!1;if(Zu()){const d=function(r,i,o){const u=r.directiveRegistry;let c=null;if(u)for(let d=0;d<u.length;d++){const g=u[d];F0(o,g.selectors,!1)&&(c||(c=[]),Er(li(o,i),r,g.type),ai(g)?(Mt(r,o),c.unshift(g)):c.push(g))}return c}(r,i,o),g=null===u?null:{"":-1};if(null!==d){c=!0,Dr(o,r.data.length,d.length);for(let S=0;S<d.length;S++){const N=d[S];N.providersResolver&&N.providersResolver(N)}let y=!1,w=!1,C=Mh(r,i,d.length,null);for(let S=0;S<d.length;S++){const N=d[S];o.mergedAttrs=Ii(o.mergedAttrs,N.hostAttrs),Et(r,o,i,C,N),tb(C,N,g),null!==N.contentQueries&&(o.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(o.flags|=128);const P=N.type.prototype;!y&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),y=!0),!w&&(P.ngOnChanges||P.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),w=!0),C++}!function(r,i){const u=i.directiveEnd,c=r.data,d=i.attrs,g=[];let y=null,w=null;for(let C=i.directiveStart;C<u;C++){const S=c[C],N=S.inputs,P=null===d||gu(i)?null:Jt(N,d);g.push(P),y=it(N,C,y),w=it(S.outputs,C,w)}null!==y&&(y.hasOwnProperty("class")&&(i.flags|=16),y.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=g,i.inputs=y,i.outputs=w}(r,o)}g&&function(r,i,o){if(i){const u=r.localNames=[];for(let c=0;c<i.length;c+=2){const d=o[i[c+1]];if(null==d)throw new fe("301",`Export of name '${i[c+1]}' not found!`);u.push(i[c],d)}}}(o,u,g)}return o.mergedAttrs=Ii(o.mergedAttrs,o.attrs),c}function Av(r,i,o,u,c,d){const g=d.hostBindings;if(g){let y=r.hostBindingOpCodes;null===y&&(y=r.hostBindingOpCodes=[]);const w=~i.index;(function(r){let i=r.length;for(;i>0;){const o=r[--i];if("number"==typeof o&&o<0)return o}return 0})(y)!=w&&y.push(w),y.push(u,c,g)}}function X0(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function Mt(r,i){i.flags|=2,(r.components||(r.components=[])).push(i.index)}function tb(r,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=r;ai(i)&&(o[""]=r)}}function Dr(r,i,o){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+o,r.providerIndexes=i}function Et(r,i,o,u,c){r.data[u]=c;const d=c.factory||(c.factory=mn(c.type)),g=new Xa(d,ai(c),null);r.blueprint[u]=g,o[u]=g,Av(r,i,0,u,Mh(r,o,c.hostVars,ft),c)}function nb(r,i,o){const u=kr(i,r),c=vu(o),d=r[10],g=Eu(r,Np(r,c,null,o.onPush?64:16,u,i,d,d.createRenderer(u,o),null,null));r[i.index]=g}function fi(r,i,o,u,c,d){const g=kr(r,i);!function(r,i,o,u,c,d,g){if(null==d)Yt(r)?r.removeAttribute(i,c,o):i.removeAttribute(c);else{const y=null==g?Oe(d):g(d,u||"",c);Yt(r)?r.setAttribute(i,c,y,o):o?i.setAttributeNS(o,c,y):i.setAttribute(c,y)}}(i[11],g,d,r.value,o,u,c)}function Mp(r,i,o,u,c,d){const g=d[i];if(null!==g){const y=u.setInput;for(let w=0;w<g.length;){const C=g[w++],S=g[w++],N=g[w++];null!==y?u.setInput(o,N,C,S):o[S]=N}}}function Jt(r,i){let o=null,u=0;for(;u<i.length;){const c=i[u];if(0!==c)if(5!==c){if("number"==typeof c)break;r.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,r[c],i[u+1])),u+=2}else u+=2;else u+=4}return o}function jr(r,i,o,u){return new Array(r,!0,!1,i,null,0,u,o,null,null)}function Br(r,i){const o=ar(i,r);if(Xo(o)){const u=o[1];80&o[2]?Oh(u,o,u.template,o[8]):o[5]>0&&Rv(o)}}function Rv(r){for(let u=Vn(r);null!==u;u=Zi(u))for(let c=10;c<u.length;c++){const d=u[c];if(1024&d[2]){const g=d[1];Oh(g,d,g.template,d[8])}else d[5]>0&&Rv(d)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=ar(o[u],r);Xo(c)&&c[5]>0&&Rv(c)}}function Wc(r,i){const o=ar(i,r),u=o[1];(function(r,i){for(let o=i.length;o<r.blueprint.length;o++)i.push(r.blueprint[o])})(u,o),Ph(u,o,o[8])}function Eu(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function Pp(r){for(;r;){r[2]|=64;const i=$e(r);if(Gu(r)&&!i)return r;r=i}return null}function wu(r,i,o){const u=i[10];u.begin&&u.begin();try{Oh(r,i,r.template,o)}catch(c){throw $m(i,c),c}finally{u.end&&u.end()}}function Op(r){!function(r){for(let i=0;i<r.components.length;i++){const o=r.components[i],u=vh(o),c=u[1];Vm(c,u,c.template,o)}}(r[8])}function bu(r,i,o){nc(0),i(r,o)}const kp=(()=>Promise.resolve(null))();function Xl(r){return r[7]||(r[7]=[])}function xv(r){return r.cleanup||(r.cleanup=[])}function $m(r,i){const o=r[9],u=o?o.get(Ao,null):null;u&&u.handleError(i)}function Lp(r,i,o,u,c){for(let d=0;d<o.length;){const g=o[d++],y=o[d++],w=i[g],C=r.data[g];null!==C.setInput?C.setInput(w,c,u,y):w[y]=c}}function Mo(r,i,o){const u=function(r,i){return bt(i[r])}(i,r);!function(r,i,o){Yt(r)?r.setValue(i,o):i.textContent=o}(r[11],u,o)}function Uh(r,i,o){let u=o?r.styles:null,c=o?r.classes:null,d=0;if(null!==i)for(let g=0;g<i.length;g++){const y=i[g];"number"==typeof y?d=y:1==d?c=ae(c,y):2==d&&(u=ae(u,y+": "+i[++g]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=c:r.classesWithoutHost=c}const ya=new Qt("INJECTOR",-1);class Jr{get(i,o=ds){if(o===ds){const u=new Error(`NullInjectorError: No provider for ${Y(i)}!`);throw u.name="NullInjectorError",u}return o}}const jh=new Qt("Set Injector scope."),sn={},GD={};let Hm;function Bh(){return void 0===Hm&&(Hm=new Jr),Hm}function Fp(r,i=null,o=null,u){return new Gm(r,o,i||Bh(),u)}class Gm{constructor(i,o,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];o&&Ti(o,y=>this.processProvider(y,i,o)),Ti([i],y=>this.processInjectorType(y,[],d)),this.records.set(ya,$h(void 0,this));const g=this.records.get(jh);this.scope=null!=g?g.value:null,this.source=c||("object"==typeof i?null:Y(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,o=ds,u=Se.Default){this.assertNotDestroyed();const c=ps(this),d=fn(void 0);try{if(!(u&Se.SkipSelf)){let y=this.records.get(i);if(void 0===y){const w=("function"==typeof(r=i)||"object"==typeof r&&r instanceof Qt)&&mr(i);y=w&&this.injectableDefInScope(w)?$h(Xr(i),sn):null,this.records.set(i,y)}if(null!=y)return this.hydrate(i,y)}return(u&Se.Self?Bh():this.parent).get(i,o=u&Se.Optional&&o===ds?null:o)}catch(g){if("NullInjectorError"===g.name){if((g[qi]=g[qi]||[]).unshift(Y(i)),c)throw g;return xl(g,i,"R3InjectorError",this.source)}throw g}finally{fn(d),ps(c)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((u,c)=>i.push(Y(c))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,o,u){if(!(i=K(i)))return!1;let c=Ei(i);const d=null==c&&i.ngModule||void 0,g=void 0===d?i:d,y=-1!==u.indexOf(g);if(void 0!==d&&(c=Ei(d)),null==c)return!1;if(null!=c.imports&&!y){let S;u.push(g);try{Ti(c.imports,N=>{this.processInjectorType(N,o,u)&&(void 0===S&&(S=[]),S.push(N))})}finally{}if(void 0!==S)for(let N=0;N<S.length;N++){const{ngModule:P,providers:j}=S[N];Ti(j,z=>this.processProvider(z,P,j||Ve))}}this.injectorDefTypes.add(g);const w=mn(g)||(()=>new g);this.records.set(g,$h(w,sn));const C=c.providers;if(null!=C&&!y){const S=i;Ti(C,N=>this.processProvider(N,S,C))}return void 0!==d&&void 0!==i.providers}processProvider(i,o,u){let c=Hh(i=K(i))?i:K(i&&i.provide);const d=Mv(r=i)?$h(void 0,r.useValue):$h(function(r,i,o){let u;if(Hh(r)){const c=K(r);return mn(c)||Xr(c)}if(Mv(r))u=()=>K(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...Kr(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))u=()=>ln(K(r.useExisting));else{const c=K(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return mn(c)||Xr(c);u=()=>new c(...Kr(r.deps))}return u}(r),sn);var r;if(Hh(i)||!0!==i.multi)this.records.get(c);else{let g=this.records.get(c);g||(g=$h(void 0,sn,!0),g.factory=()=>Kr(g.multi),this.records.set(c,g)),c=i,g.multi.push(i)}this.records.set(c,d)}hydrate(i,o){return o.value===sn&&(o.value=GD,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(r=o.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var r}injectableDefInScope(i){if(!i.providedIn)return!1;const o=K(i.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Xr(r){const i=mr(r),o=null!==i?i.factory:mn(r);if(null!==o)return o;if(r instanceof Qt)throw new Error(`Token ${Y(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const i=r.length;if(i>0){const u=function(r,i){const o=[];for(let u=0;u<r;u++)o.push(i);return o}(i,"?");throw new Error(`Can't resolve all parameters for ${Y(r)}: (${u.join(", ")}).`)}const o=function(r){const i=r&&(r[Nt]||r[uo]);if(i){const o=function(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Error("unreachable")}function $h(r,i,o=!1){return{factory:r,value:i,multi:o?[]:void 0}}function Mv(r){return null!==r&&"object"==typeof r&&bc in r}function Hh(r){return"function"==typeof r}const Pv=function(r,i,o){return function(r,i=null,o=null,u){const c=Fp(r,i,o,u);return c._resolveInjectorDefTypes(),c}({name:o},i,r,o)};let qt=(()=>{class r{static create(o,u){return Array.isArray(o)?Pv(o,u,""):Pv(o.providers,o.parent,o.name||"")}}return r.THROW_IF_NOT_FOUND=ds,r.NULL=new Jr,r.\u0275prov=wt({token:r,providedIn:"any",factory:()=>ln(ya)}),r.__NG_ELEMENT_ID__=-1,r})();function Zc(r,i){sc(vh(r)[1],yn())}let td=null;function zn(){if(!td){const r=$.Symbol;if(r&&r.iterator)td=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const u=i[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(td=u)}}}return td}class Js{constructor(i){this.wrapped=i}static wrap(i){return new Js(i)}static unwrap(i){return Js.isWrapped(i)?i.wrapped:i}static isWrapped(i){return i instanceof Js}}function zp(r){return!!Wp(r)&&(Array.isArray(r)||!(r instanceof Map)&&zn()in r)}function Wp(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function pi(r,i,o){return!Object.is(r[i],o)&&(r[i]=o,!0)}function nd(r,i,o,u){const c=Ie();return pi(c,js(),i)&&(vt(),fi(cn(),c,r,i,o,u)),nd}function Zm(r,i,o,u,c,d,g,y){const w=Ie(),C=vt(),S=r+20,N=C.firstCreatePass?function(r,i,o,u,c,d,g,y,w){const C=i.consts,S=Gc(i,r,4,g||null,is(C,y));Sv(i,o,S,is(C,w)),sc(i,S);const N=S.tViews=kh(2,S,u,c,d,i.directiveRegistry,i.pipeRegistry,null,i.schemas,C);return null!==i.queries&&(i.queries.template(i,S),N.queries=i.queries.embeddedTView(S)),S}(S,C,w,i,o,u,c,d,g):C.data[S];ui(N,!1);const P=w[11].createComment("");Kl(C,w,P,N),hr(P,w),Eu(w,w[S]=jr(P,w,P,N)),Ko(N)&&Ir(C,w,N),null!=g&&zc(w,N,y)}function Po(r,i=Se.Default){const o=Ie();return null===o?ln(r,i):zi(yn(),o,K(r),i)}function Tu(r,i,o){const u=Ie();return pi(u,js(),i)&&se(vt(),cn(),u,r,i,u[11],o,!1),Tu}function Jm(r,i,o,u,c){const g=c?"class":"style";Lp(r,o,i.inputs[g],g,u)}function Xm(r,i,o,u){const c=Ie(),d=vt(),g=20+r,y=c[11],w=c[g]=du(y,i,tt.lFrame.currentNamespace),C=d.firstCreatePass?function(r,i,o,u,c,d,g){const y=i.consts,C=Gc(i,r,2,c,is(y,d));return Sv(i,o,C,is(y,g)),null!==C.attrs&&Uh(C,C.attrs,!1),null!==C.mergedAttrs&&Uh(C,C.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,C),C}(g,d,c,0,i,o,u):d.data[g];ui(C,!0);const S=C.mergedAttrs;null!==S&&eu(y,w,S);const N=C.classes;null!==N&&lv(y,w,N);const P=C.styles;null!==P&&cv(y,w,P),64!=(64&C.flags)&&Kl(d,c,w,C),0===tt.lFrame.elementDepthCount&&hr(w,c),tt.lFrame.elementDepthCount++,Ko(C)&&(Ir(d,c,C),function(r,i,o){if(Ls(i)){const c=i.directiveEnd;for(let d=i.directiveStart;d<c;d++){const g=r.data[d];g.contentQueries&&g.contentQueries(1,o[d],d)}}}(d,C,c)),null!==u&&zc(c,C)}function gi(){let r=yn();qa()?tt.lFrame.isParent=!1:(r=r.parent,ui(r,!1));const i=r;tt.lFrame.elementDepthCount--;const o=vt();o.firstCreatePass&&(sc(o,r),Ls(r)&&o.queries.elementEnd(r)),null!=i.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(i)&&Jm(o,i,Ie(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(i)&&Jm(o,i,Ie(),i.stylesWithoutHost,!1)}function ey(r,i,o,u){Xm(r,i,o,u),gi()}function ny(r){return!!r&&"function"==typeof r.then}function ld(r){return!!r&&"function"==typeof r.subscribe}const Qc=ld;function Jc(r,i,o,u){const c=Ie(),d=vt(),g=yn();return function(r,i,o,u,c,d,g,y){const w=Ko(u),S=r.firstCreatePass&&xv(r),N=i[8],P=Xl(i);let j=!0;if(3&u.type||y){const J=kr(u,i),xe=y?y(J):J,_e=P.length,Je=y?ot=>y(bt(ot[u.index])):u.index;if(Yt(o)){let ot=null;if(!y&&w&&(ot=function(r,i,o,u){const c=r.cleanup;if(null!=c)for(let d=0;d<c.length-1;d+=2){const g=c[d];if(g===o&&c[d+1]===u){const y=i[7],w=c[d+2];return y.length>w?y[w]:null}"string"==typeof g&&(d+=2)}return null}(r,i,c,u.index)),null!==ot)(ot.__ngLastListenerFn__||ot).__ngNextListenerFn__=d,ot.__ngLastListenerFn__=d,j=!1;else{d=iy(u,i,N,d,!1);const Pt=o.listen(xe,c,d);P.push(d,Pt),S&&S.push(c,Je,_e,_e+1)}}else d=iy(u,i,N,d,!0),xe.addEventListener(c,d,g),P.push(d),S&&S.push(c,Je,_e,g)}else d=iy(u,i,N,d,!1);const z=u.outputs;let oe;if(j&&null!==z&&(oe=z[c])){const J=oe.length;if(J)for(let xe=0;xe<J;xe+=2){const gr=i[oe[xe]][oe[xe+1]].subscribe(d),oo=P.length;P.push(d,gr),S&&S.push(c,u.index,oo,-(oo+1))}}}(d,c,c[11],g,r,i,!!o,u),Jc}function xb(r,i,o,u){try{return!1!==o(u)}catch(c){return $m(r,c),!1}}function iy(r,i,o,u,c){return function d(g){if(g===Function)return u;const y=2&r.flags?ar(r.index,i):i;0==(32&i[2])&&Pp(y);let w=xb(i,0,u,g),C=d.__ngNextListenerFn__;for(;C;)w=xb(i,0,C,g)&&w,C=C.__ngNextListenerFn__;return c&&!1===w&&(g.preventDefault(),g.returnValue=!1),w}}function mE(r,i=""){const o=Ie(),u=vt(),c=r+20,d=u.firstCreatePass?Gc(u,c,1,i,null):u.data[c],g=o[c]=function(r,i){return Yt(r)?r.createText(i):r.createTextNode(i)}(o[11],i);Kl(u,o,g,d),ui(d,!1)}function cy(r){return yE("",r,""),cy}function yE(r,i,o){const u=Ie(),c=function(r,i,o,u){return pi(r,js(),o)?i+Oe(o)+u:ft}(u,r,i,o);return c!==ft&&Mo(u,Lr(),c),yE}function TE(r,i,o){const u=Ie();return pi(u,js(),i)&&se(vt(),cn(),u,r,i,u[11],o,!0),TE}const fd=void 0;var kT=["en",[["a","p"],["AM","PM"],fd],[["AM","PM"],fd,fd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fd,"{1} 'at' {0}",fd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const i=Math.floor(Math.abs(r)),o=r.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let Ca={};function el(r){const i=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=df(i);if(o)return o;const u=i.split("-")[0];if(o=df(u),o)return o;if("en"===u)return kT;throw new Error(`Missing locale data for the locale "${r}".`)}function ng(r){return el(r)[nt.PluralCase]}function df(r){return r in Ca||(Ca[r]=$.ng&&$.ng.common&&$.ng.common.locales&&$.ng.common.locales[r]),Ca[r]}var nt=(()=>((nt=nt||{})[nt.LocaleId=0]="LocaleId",nt[nt.DayPeriodsFormat=1]="DayPeriodsFormat",nt[nt.DayPeriodsStandalone=2]="DayPeriodsStandalone",nt[nt.DaysFormat=3]="DaysFormat",nt[nt.DaysStandalone=4]="DaysStandalone",nt[nt.MonthsFormat=5]="MonthsFormat",nt[nt.MonthsStandalone=6]="MonthsStandalone",nt[nt.Eras=7]="Eras",nt[nt.FirstDayOfWeek=8]="FirstDayOfWeek",nt[nt.WeekendRange=9]="WeekendRange",nt[nt.DateFormat=10]="DateFormat",nt[nt.TimeFormat=11]="TimeFormat",nt[nt.DateTimeFormat=12]="DateTimeFormat",nt[nt.NumberSymbols=13]="NumberSymbols",nt[nt.NumberFormats=14]="NumberFormats",nt[nt.CurrencyCode=15]="CurrencyCode",nt[nt.CurrencySymbol=16]="CurrencySymbol",nt[nt.CurrencyName=17]="CurrencyName",nt[nt.Currencies=18]="Currencies",nt[nt.Directionality=19]="Directionality",nt[nt.PluralCase=20]="PluralCase",nt[nt.ExtraData=21]="ExtraData",nt))();const rg="en-US";let _y=rg;function ff(r){an(r,"Expected localeId to be defined"),"string"==typeof r&&(_y=r.toLowerCase().replace(/_/g,"-"))}class Ny{}const Py="ngComponent";class CI{resolveComponentFactory(i){throw function(r){const i=Error(`No component factory found for ${Y(r)}. Did you add it to @NgModule.entryComponents?`);return i[Py]=r,i}(i)}}let _d=(()=>{class r{}return r.NULL=new CI,r})();function ag(...r){}function _f(r,i){return new Lo(kr(r,i))}const eS=function(){return _f(yn(),Ie())};let Lo=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=eS,r})();function ky(r){return r instanceof Lo?r.nativeElement:r}class vf{}let rw=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>ow(),r})();const ow=function(){const r=Ie(),o=ar(yn().index,r);return function(r){return r[11]}(ji(o)?o:r)};let Ly=(()=>{class r{}return r.\u0275prov=wt({token:r,providedIn:"root",factory:()=>null}),r})();class Fy{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const il=new Fy("12.2.14");class Vy{constructor(){}supports(i){return zp(i)}create(i){return new rS(i)}}const nS=(r,i)=>i;class rS{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||nS}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,c=0,d=null;for(;o||u;){const g=!u||o&&o.currentIndex<SI(u,c,d)?o:u,y=SI(g,c,d),w=g.currentIndex;if(g===u)c--,u=u._nextRemoved;else if(o=o._next,null==g.previousIndex)c++;else{d||(d=[]);const C=y-c,S=w-c;if(C!=S){for(let P=0;P<C;P++){const j=P<d.length?d[P]:d[P]=0,z=j+P;S<=z&&z<C&&(d[P]=j+1)}d[g.previousIndex]=S-C}}y!==w&&i(g,y,w)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!zp(i))throw new Error(`Error trying to diff '${Y(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,d,g,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let y=0;y<this.length;y++)d=i[y],g=this._trackByFn(y,d),null!==o&&Object.is(o.trackById,g)?(u&&(o=this._verifyReinsertion(o,d,g,y)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,g,y),u=!0),o=o._next}else c=0,function(r,i){if(Array.isArray(r))for(let o=0;o<r.length;o++)i(r[o]);else{const o=r[zn()]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,y=>{g=this._trackByFn(c,y),null!==o&&Object.is(o.trackById,g)?(u&&(o=this._verifyReinsertion(o,y,g,c)),Object.is(o.item,y)||this._addIdentityChange(o,y)):(o=this._mismatch(o,y,g,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,c){let d;return null===i?d=this._itTail:(d=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,d,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,d,c)):i=this._addAfter(new TI(o,u),d,c),i}_verifyReinsertion(i,o,u,c){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==d?i=this._reinsertAfter(d,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,d=i._nextRemoved;return null===c?this._removalsHead=d:c._nextRemoved=d,null===d?this._removalsTail=c:d._prevRemoved=c,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const c=null===o?this._itHead:o._next;return i._next=c,i._prev=o,null===c?this._itTail=i:c._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new uw),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uw),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class TI{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class iS{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class uw{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new iS,this.map.set(o,u)),u.add(i)}get(i,o){const c=this.map.get(i);return c?c.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function SI(r,i,o){const u=r.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+i+c}class AI{constructor(){}supports(i){return i instanceof Map||Wp(i)}create(){return new sS}}class sS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Wp(i)))throw new Error(`Error trying to diff '${Y(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,o);const d=c._prev,g=c._next;return d&&(d._next=g),g&&(g._prev=d),c._next=null,c._prev=null,c}const u=new oS(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class oS{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function RI(){return new Nu([new Vy])}let Nu=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||RI()),deps:[[r,new qs,new Ki]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(r){return r.name||typeof r}(o)}'`)}}return r.\u0275prov=wt({token:r,providedIn:"root",factory:RI}),r})();function Uy(){return new ug([new AI])}let ug=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||Uy()),deps:[[r,new qs,new Ki]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(u)return u;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return r.\u0275prov=wt({token:r,providedIn:"root",factory:Uy}),r})();function cg(r,i,o,u,c=!1){for(;null!==o;){const d=i[o.index];if(null!==d&&u.push(bt(d)),gn(d))for(let y=10;y<d.length;y++){const w=d[y],C=w[1].firstChild;null!==C&&cg(w[1],w,C,u)}const g=o.type;if(8&g)cg(r,i,o.child,u);else if(32&g){const y=te(o,i);let w;for(;w=y();)u.push(w)}else if(16&g){const y=Ip(i,o);if(Array.isArray(y))u.push(...y);else{const w=$e(i[16]);cg(w[1],w,y,u,!0)}}o=c?o.projectionNext:o.next}return u}class Ef{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return cg(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(gn(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(Am(i,u),ca(o,u))}this._attachedToViewContainer=!1}iv(this._lView[1],this._lView)}onDestroy(i){Um(this._lView[1],this._lView,null,i)}markForCheck(){Pp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){wu(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,i,o){Gi(!0);try{wu(r,i,o)}finally{Gi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,Cp(this._lView[1],i=this._lView,i[11],2,null,null)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class jy extends Ef{constructor(i){super(i),this._view=i}detectChanges(){Op(this._view)}checkNoChanges(){!function(r){Gi(!0);try{Op(r)}finally{Gi(!1)}}(this._view)}get context(){return null}}const NI=function(r){return function(r,i,o){if(Fa(r)&&!o){const u=ar(r.index,i);return new Ef(u,u)}return 47&r.type?new Ef(i[16],i):null}(yn(),Ie(),16==(16&r))};let lg=(()=>{class r{}return r.__NG_ELEMENT_ID__=NI,r})();const mi=[new AI],MI=new Nu([new Vy]),cS=new ug(mi),PI=function(){return dn(yn(),Ie())};let dg=(()=>{class r{}return r.__NG_ELEMENT_ID__=PI,r})();const cw=dg,dS=class extends cw{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i){const o=this._declarationTContainer.tViews,u=Np(this._declarationLView,o,i,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(u[19]=d.createEmbeddedView(o)),Ph(o,u,i),new Ef(u)}};function dn(r,i){return 4&r.type?new dS(i,r,_f(r,i)):null}class wf{}class fS{}const gS=function(){return yS(yn(),Ie())};let $y=(()=>{class r{}return r.__NG_ELEMENT_ID__=gS,r})();const mS=$y,kI=class extends mS{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return _f(this._hostTNode,this._hostLView)}get injector(){return new sa(this._hostTNode,this._hostLView)}get parentInjector(){const i=fc(this._hostTNode,this._hostLView);if(dc(i)){const o=nu(i,this._hostLView),u=tu(i);return new sa(o[1].data[u+8],o)}return new sa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=LI(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,u){const c=i.createEmbeddedView(o||{});return this.insert(c,u),c}createComponent(i,o,u,c,d){const g=u||this.parentInjector;if(!d&&null==i.ngModule&&g){const w=g.get(wf,null);w&&(d=w)}const y=i.create(g,c,void 0,d);return this.insert(y.hostView,o),y}insert(i,o){const u=i._lView,c=u[1];if(gn(u[3])){const S=this.indexOf(i);if(-1!==S)this.detach(S);else{const N=u[3],P=new kI(N,N[6],N[3]);P.detach(P.indexOf(i))}}const d=this._adjustIndex(o),g=this._lContainer;!function(r,i,o,u){const c=10+u,d=o.length;u>0&&(o[c-1][4]=i),u<d-10?(i[4]=o[c],Si(o,10+u,i)):(o.push(i),i[4]=null),i[3]=o;const g=i[17];null!==g&&o!==g&&function(r,i){const o=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===o?r[9]=[i]:o.push(i)}(g,i);const y=i[19];null!==y&&y.insertView(r),i[2]|=128}(c,u,g,d);const y=xm(d,g),w=u[11],C=fu(w,g[7]);return null!==C&&function(r,i,o,u,c,d){u[0]=c,u[6]=i,Cp(r,u,o,1,c,d)}(c,g[6],w,u,C,y),i.attachToViewContainerRef(),Si(lw(g),d,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=LI(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=Am(this._lContainer,o);u&&(ca(lw(this._lContainer),o),iv(u[1],u))}detach(i){const o=this._adjustIndex(i,-1),u=Am(this._lContainer,o);return u&&null!=ca(lw(this._lContainer),o)?new Ef(u):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function LI(r){return r[8]}function lw(r){return r[8]||(r[8]=[])}function yS(r,i){let o;const u=i[r.index];if(gn(u))o=u;else{let c;if(8&r.type)c=bt(u);else{const d=i[11];c=d.createComment("");const g=kr(r,i);ms(d,fu(d,g),c,function(r,i){return Yt(r)?r.nextSibling(i):i.nextSibling}(d,g),!1)}i[r.index]=o=jr(u,i,c,r),Eu(i,o)}return new kI(o,r,i)}const ul={};class oC extends _d{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Bn(i);return new cC(o,this.ngModule)}}function aC(r){const i=[];for(let o in r)r.hasOwnProperty(o)&&i.push({propName:r[o],templateName:o});return i}const Jy=new Qt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Wl});class cC extends Ny{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=i.selectors.map(hv).join(","),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return aC(this.componentDef.inputs)}get outputs(){return aC(this.componentDef.outputs)}create(i,o,u,c){const d=(c=c||this.ngModule)?function(r,i){return{get:(o,u,c)=>{const d=r.get(o,ul,c);return d!==ul||u===ul?d:i.get(o,u,c)}}}(i,c.injector):i,g=d.get(vf,Ga),y=d.get(Ly,null),w=g.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",S=u?function(r,i,o){if(Yt(r))return r.selectRootElement(i,o===yt.ShadowDom);let u="string"==typeof i?r.querySelector(i):i;return u.textContent="",u}(w,u,this.componentDef.encapsulation):du(g.createRenderer(null,this.componentDef),C,function(r){const i=r.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(C)),N=this.componentDef.onPush?576:528,P=function(r,i){return{components:[],scheduler:r||Wl,clean:kp,playerHandler:i||null,flags:0}}(),j=kh(0,null,null,1,0,null,null,null,null,null),z=Np(null,j,P,N,null,null,g,w,y,d);let oe,J;us(z);try{const xe=function(r,i,o,u,c,d){const g=o[1];o[20]=r;const w=Gc(g,20,2,"#host",null),C=w.mergedAttrs=i.hostAttrs;null!==C&&(Uh(w,C,!0),null!==r&&(eu(c,r,C),null!==w.classes&&lv(c,r,w.classes),null!==w.styles&&cv(c,r,w.styles)));const S=u.createRenderer(r,i),N=Np(o,vu(i),null,i.onPush?64:16,o[20],w,u,S,d||null,null);return g.firstCreatePass&&(Er(li(w,o),g,i.type),Mt(g,w),Dr(w,o.length,1)),Eu(o,N),o[20]=N}(S,this.componentDef,z,g,w);if(S)if(u)eu(w,S,["ng-version",il.full]);else{const{attrs:_e,classes:Je}=function(r){const i=[],o=[];let u=1,c=2;for(;u<r.length;){let d=r[u];if("string"==typeof d)2===c?""!==d&&i.push(d,r[++u]):8===c&&o.push(d);else{if(!Ys(c))break;c=d}u++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);_e&&eu(w,S,_e),Je&&Je.length>0&&lv(w,S,Je.join(" "))}if(J=Hi(j,20),void 0!==o){const _e=J.projection=[];for(let Je=0;Je<this.ngContentSelectors.length;Je++){const ot=o[Je];_e.push(null!=ot?Array.from(ot):null)}}oe=function(r,i,o,u,c){const d=o[1],g=function(r,i,o){const u=yn();r.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Et(r,u,i,Mh(r,i,1,null),o));const c=$s(i,r,u.directiveStart,u);hr(c,i);const d=kr(u,i);return d&&hr(d,i),c}(d,o,i);if(u.components.push(g),r[8]=g,c&&c.forEach(w=>w(g,i)),i.contentQueries){const w=yn();i.contentQueries(1,g,w.directiveStart)}const y=yn();return!d.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Wr(y.index),Av(o[1],y,0,y.directiveStart,y.directiveEnd,i),X0(i,g)),g}(xe,this.componentDef,z,P,[Zc]),Ph(j,z,null)}finally{ic()}return new zS(this.componentType,oe,_f(J,z),z,J)}}class zS extends class{}{constructor(i,o,u,c,d){super(),this.location=u,this._rootLView=c,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new jy(c),this.componentType=i}get injector(){return new sa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}const Sf=new Map;class Xy extends wf{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new oC(this);const u=or(i),c=i[At]||null;c&&ff(c),this._bootstrapComponents=m(u.bootstrap),this._r3Injector=Fp(i,o,[{provide:wf,useValue:this},{provide:_d,useValue:this.componentFactoryResolver}],Y(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,o=qt.THROW_IF_NOT_FOUND,u=Se.Default){return i===qt||i===wf||i===ya?this:this._r3Injector.get(i,o,u)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class bw extends fS{constructor(i){super(),this.moduleType=i,null!==or(i)&&function(r){const i=new Set;!function o(u){const c=or(u,!0),d=c.id;null!==d&&(function(r,i,o){if(i&&i!==o)throw new Error(`Duplicate module registered for ${r} - ${Y(i)} vs ${Y(i.name)}`)}(d,Sf.get(d),u),Sf.set(d,u));const g=m(c.imports);for(const y of g)i.has(y)||(i.add(y),o(y))}(r)}(i)}create(i){return new Xy(this.moduleType,i)}}function QS(r,i,o,u,c,d){const g=i+o;return pi(r,g,c)?function(r,i,o){return r[i]=o}(r,g+1,d?u.call(d,c):u(c)):function(r,i){const o=r[i];return o===ft?void 0:o}(r,g+1)}function hC(r,i){const o=vt();let u;const c=r+20;o.firstCreatePass?(u=function(r,i){if(i)for(let o=i.length-1;o>=0;o--){const u=i[o];if(r===u.name)return u}throw new fe("302",`The pipe '${r}' could not be found!`)}(i,o.pipeRegistry),o.data[c]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(c,u.onDestroy)):u=o.data[c];const d=u.factory||(u.factory=mn(u.type)),g=fn(Po);try{const y=Io(!1),w=d();return Io(y),function(r,i,o,u){o>=r.data.length&&(r.data[o]=null,r.blueprint[o]=null),i[o]=u}(o,Ie(),c,w),w}finally{fn(g)}}function xr(r,i,o){const u=r+20,c=Ie(),d=function(r,i){return r[i]}(c,u);return function(r,i){Js.isWrapped(i)&&(i=Js.unwrap(i),r[tt.lFrame.bindingIndex]=ft);return i}(c,function(r,i){return r[1].data[i].pure}(c,u)?QS(c,function(){const r=tt.lFrame;let i=r.bindingRootIndex;return-1===i&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}(),i,d.transform,o,d):d.transform(o))}function Tw(r){return i=>{setTimeout(r,void 0,i)}}const xa=class extends v.xQ{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){var c,d,g;let y=i,w=o||(()=>null),C=u;if(i&&"object"==typeof i){const N=i;y=null===(c=N.next)||void 0===c?void 0:c.bind(N),w=null===(d=N.error)||void 0===d?void 0:d.bind(N),C=null===(g=N.complete)||void 0===g?void 0:g.bind(N)}this.__isAsync&&(w=Tw(w),y&&(y=Tw(y)),C&&(C=Tw(C)));const S=super.subscribe({next:y,error:w,complete:C});return i instanceof X.w&&i.add(S),S}};function rA(){return this._results[zn()]()}class n_{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=zn(),u=n_.prototype;u[o]||(u[o]=rA)}get changes(){return this._changes||(this._changes=new xa)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const c=Di(i);(this._changesDetected=!function(r,i,o){if(r.length!==i.length)return!1;for(let u=0;u<r.length;u++){let c=r[u],d=i[u];if(o&&(c=o(c),d=o(d)),d!==c)return!1}return!0}(u._results,c,o))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Sw{constructor(i){this.queryList=i,this.matches=null}clone(){return new Sw(this.queryList)}setDirty(){this.queryList.setDirty()}}class wg{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,c=[];for(let d=0;d<u;d++){const g=o.getByIndex(d);c.push(this.queries[g.indexInDeclarationView].clone())}return new wg(c)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==s_(i,o).matches&&this.queries[o].setDirty()}}class bg{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class Ig{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const c=null!==o?o.length:0,d=this.getByIndex(u).embeddedTView(i,c);d&&(d.indexInDeclarationView=u,null!==o?o.push(d):o=[d])}return null!==o?new Ig(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Cg{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new Cg(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const d=u[c];this.matchTNodeWithReadOption(i,o,sA(o,d)),this.matchTNodeWithReadOption(i,o,ia(o,i,d,!1,!1))}else u===dg?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,ia(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Lo||c===$y||c===dg&&4&o.type)this.addMatch(o.index,-2);else{const d=ia(o,i,c,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function sA(r,i){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function aA(r,i,o,u){return-1===o?function(r,i){return 11&r.type?_f(r,i):4&r.type?dn(r,i):null}(i,r):-2===o?function(r,i,o){return o===Lo?_f(i,r):o===dg?dn(i,r):o===$y?yS(i,r):void 0}(r,i,u):$s(r,r[1],o,i)}function pC(r,i,o,u){const c=i[19].queries[u];if(null===c.matches){const d=r.data,g=o.matches,y=[];for(let w=0;w<g.length;w+=2){const C=g[w];y.push(C<0?null:aA(i,d[C],g[w+1],o.metadata.read))}c.matches=y}return c.matches}function Cd(r,i,o,u){const c=r.queries.getByIndex(o),d=c.matches;if(null!==d){const g=pC(r,i,c,o);for(let y=0;y<d.length;y+=2){const w=d[y];if(w>0)u.push(g[y/2]);else{const C=d[y+1],S=i[-w];for(let N=10;N<S.length;N++){const P=S[N];P[17]===P[3]&&Cd(P[1],P,C,u)}if(null!==S[9]){const N=S[9];for(let P=0;P<N.length;P++){const j=N[P];Cd(j[1],j,C,u)}}}}}return u}function Aw(r){const i=Ie(),o=vt(),u=qd();nc(u+1);const c=s_(o,u);if(r.dirty&&qu(i)===(2==(2&c.metadata.flags))){if(null===c.matches)r.reset([]);else{const d=c.crossesNgTemplate?Cd(o,i,u,[]):pC(o,i,c,u);r.reset(d,ky),r.notifyOnChanges()}return!0}return!1}function Rw(r,i,o,u){const c=vt();if(c.firstCreatePass){const d=yn();(function(r,i,o){null===r.queries&&(r.queries=new Ig),r.queries.track(new Cg(i,o))})(c,new bg(i,o,u),d.index),function(r,i){const o=r.contentQueries||(r.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,i)}(c,r),2==(2&o)&&(c.staticContentQueries=!0)}!function(r,i,o){const u=new n_(4==(4&o));Um(r,i,u,u.destroy),null===i[19]&&(i[19]=new wg),i[19].queries.push(new Sw(u))}(c,Ie(),o)}function gC(){return r=Ie(),i=qd(),r[19].queries[i].queryList;var r,i}function s_(r,i){return r.queries.getByIndex(i)}const d_=new Qt("Application Initializer");let Rg=(()=>{class r{constructor(o){this.appInits=o,this.resolve=ag,this.reject=ag,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const d=this.appInits[c]();if(ny(d))o.push(d);else if(Qc(d)){const g=new Promise((y,w)=>{d.subscribe({complete:y,error:w})});o.push(g)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(ln(d_,8))},r.\u0275prov=wt({token:r,factory:r.\u0275fac}),r})();const LC=new Qt("AppId"),MA={provide:LC,useFactory:function(){return`${xg()}${xg()}${xg()}`},deps:[]};function xg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ng=new Qt("Platform Initializer"),$w=new Qt("Platform ID"),VC=new Qt("appBootstrapListener");let jC=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=wt({token:r,factory:r.\u0275fac}),r})();const Mg=new Qt("LocaleId"),Hw=new Qt("DefaultCurrencyCode");class $C{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}const f_=function(r){return new bw(r)},jo=f_,LA=function(r){return Promise.resolve(f_(r))},HC=function(r){const i=f_(r),u=m(or(r).declarations).reduce((c,d)=>{const g=Bn(d);return g&&c.push(new cC(g)),c},[]);return new $C(i,u)},GC=HC,FA=function(r){return Promise.resolve(HC(r))};let Pg=(()=>{class r{constructor(){this.compileModuleSync=jo,this.compileModuleAsync=LA,this.compileModuleAndAllComponentsSync=GC,this.compileModuleAndAllComponentsAsync=FA}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=wt({token:r,factory:r.\u0275fac}),r})();const UA=(()=>Promise.resolve(0))();function Og(r){"undefined"==typeof Zone?UA.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Ts{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xa(!1),this.onMicrotaskEmpty=new xa(!1),this.onStable=new xa(!1),this.onError=new xa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let r=$.requestAnimationFrame,i=$.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&i){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(r){const i=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call($,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,Gw(r),r.isCheckStableRunning=!0,Li(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),Gw(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,d,g,y)=>{try{return zC(r),o.invokeTask(c,d,g,y)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||r.shouldCoalesceRunChangeDetection)&&i(),Ma(r)}},onInvoke:(o,u,c,d,g,y,w)=>{try{return zC(r),o.invoke(c,d,g,y,w)}finally{r.shouldCoalesceRunChangeDetection&&i(),Ma(r)}},onHasTask:(o,u,c,d)=>{o.hasTask(c,d),u===c&&("microTask"==d.change?(r._hasPendingMicrotasks=d.microTask,Gw(r),Li(r)):"macroTask"==d.change&&(r.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,u,c,d)=>(o.handleError(c,d),r.runOutsideAngular(()=>r.onError.emit(d)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ts.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ts.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,c){const d=this._inner,g=d.scheduleEventTask("NgZoneEvent: "+c,i,BA,ag,ag);try{return d.runTask(g,o,u)}finally{d.cancelTask(g)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const BA={};function Li(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function Gw(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function zC(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function Ma(r){r._nesting--,Li(r)}class zw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xa,this.onMicrotaskEmpty=new xa,this.onStable=new xa,this.onError=new xa}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,c){return i.apply(o,u)}}let Rf=(()=>{class r{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ts.assertNotInAngularZone(),Og(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Og(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let d=-1;u&&u>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==d),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,c){return[]}}return r.\u0275fac=function(o){return new(o||r)(ln(Ts))},r.\u0275prov=wt({token:r,factory:r.\u0275fac}),r})(),Ww=(()=>{class r{constructor(){this._applications=new Map,qw.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return qw.findTestabilityInTree(this,o,u)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=wt({token:r,factory:r.\u0275fac}),r})();class GA{addToWindow(i){}findTestabilityInTree(i,o,u){return null}}function zA(r){qw=r}let qw=new GA,WC=!0,qC=!1;function Kw(){return qC=!0,WC}function KC(){if(qC)throw new Error("Cannot enable prod mode after platform setup.");WC=!1}let ro;const p_=new Qt("AllowMultipleToken");class ZA{constructor(i,o){this.name=i,this.token=o}}function QC(r,i,o=[]){const u=`Platform: ${i}`,c=new Qt(u);return(d=[])=>{let g=Zw();if(!g||g.injector.get(p_,!1))if(r)r(o.concat(d).concat({provide:c,useValue:!0}));else{const y=o.concat(d).concat({provide:c,useValue:!0},{provide:jh,useValue:"platform"});!function(r){if(ro&&!ro.destroyed&&!ro.injector.get(p_,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ro=r.get(Yw);const i=r.get(Ng,null);i&&i.forEach(o=>o())}(qt.create({providers:y,name:u}))}return function(r){const i=Zw();if(!i)throw new Error("No platform exists!");if(!i.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return i}(c)}}function Zw(){return ro&&!ro.destroyed?ro:null}let Yw=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const y=function(r,i){let o;return o="noop"===r?new zw:("zone.js"===r?void 0:r)||new Ts({enableLongStackTrace:Kw(),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),w=[{provide:Ts,useValue:y}];return y.run(()=>{const C=qt.create({providers:w,parent:this.injector,name:o.moduleType.name}),S=o.create(C),N=S.injector.get(Ao,null);if(!N)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return y.runOutsideAngular(()=>{const P=y.onError.subscribe({next:j=>{N.handleError(j)}});S.onDestroy(()=>{Qw(this._modules,S),P.unsubscribe()})}),function(r,i,o){try{const u=o();return ny(u)?u.catch(c=>{throw i.runOutsideAngular(()=>r.handleError(c)),c}):u}catch(u){throw i.runOutsideAngular(()=>r.handleError(u)),u}}(N,y,()=>{const P=S.injector.get(Rg);return P.runInitializers(),P.donePromise.then(()=>(ff(S.injector.get(Mg,rg)||rg),this._moduleDoBootstrap(S),S))})})}bootstrapModule(o,u=[]){const c=Bo({},u);return function(r,i,o){const u=new bw(o);return Promise.resolve(u)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,c))}_moduleDoBootstrap(o){const u=o.injector.get(Lg);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${Y(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(ln(qt))},r.\u0275prov=wt({token:r,factory:r.\u0275fac}),r})();function Bo(r,i){return Array.isArray(i)?i.reduce(Bo,r):Object.assign(Object.assign({},r),i)}let Lg=(()=>{class r{constructor(o,u,c,d,g){this._zone=o,this._injector=u,this._exceptionHandler=c,this._componentFactoryResolver=d,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new k.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),w=new k.y(C=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Ts.assertNotInAngularZone(),Og(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{Ts.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{S.unsubscribe(),N.unsubscribe()}});this.isStable=(0,ce.T)(y,w.pipe(r=>(0,ue.x)()(function(r,i){return function(u){let c;c="function"==typeof r?r:function(){return r};const d=Object.create(u,ne.N);return d.source=u,d.subjectFactory=c,d}}(ee)(r))))}bootstrap(o,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=o instanceof Ny?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(c.componentType);const d=function(r){return r.isBoundToModule}(c)?void 0:this._injector.get(wf),y=c.create(qt.NULL,[],u||c.selector,d),w=y.location.nativeElement,C=y.injector.get(Rf,null),S=C&&y.injector.get(Ww);return C&&S&&S.registerApplication(w,C),y.onDestroy(()=>{this.detachView(y.hostView),Qw(this.components,y),S&&S.unregisterApplication(w)}),this._loadComponent(y),y}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Qw(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(VC,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(o){return new(o||r)(ln(Ts),ln(qt),ln(Ao),ln(_d),ln(Rg))},r.\u0275prov=wt({token:r,factory:r.\u0275fac}),r})();function Qw(r,i){const o=r.indexOf(i);o>-1&&r.splice(o,1)}class JA{}class Ft{}const Vg={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let tR=(()=>{class r{constructor(o,u){this._compiler=o,this._config=u||Vg}load(o){return this.loadAndCompile(o)}loadAndCompile(o){let[u,c]=o.split("#");return void 0===c&&(c="default"),F(8255)(u).then(d=>d[c]).then(d=>dl(d,u,c)).then(d=>this._compiler.compileModuleAsync(d))}loadFactory(o){let[u,c]=o.split("#"),d="NgFactory";return void 0===c&&(c="default",d=""),F(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(g=>g[c+d]).then(g=>dl(g,u,c))}}return r.\u0275fac=function(o){return new(o||r)(ln(Pg),ln(Ft,8))},r.\u0275prov=wt({token:r,factory:r.\u0275fac}),r})();function dl(r,i,o){if(!r)throw new Error(`Cannot find '${o}' in '${i}'`);return r}const Uu=function(r){return null},oR=QC(null,"core",[{provide:$w,useValue:"unknown"},{provide:Yw,deps:[qt]},{provide:Ww,deps:[]},{provide:jC,deps:[]}]),u0=[{provide:Lg,useClass:Lg,deps:[Ts,qt,Ao,_d,Rg]},{provide:Jy,deps:[Ts],useFactory:function(r){let i=[];return r.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(o){i.push(o)}}},{provide:Rg,useClass:Rg,deps:[[new Ki,d_]]},{provide:Pg,useClass:Pg,deps:[]},MA,{provide:Nu,useFactory:function(){return MI},deps:[]},{provide:ug,useFactory:function(){return cS},deps:[]},{provide:Mg,useFactory:function(r){return ff(r=r||"undefined"!=typeof $localize&&$localize.locale||rg),r},deps:[[new ou(Mg),new Ki,new qs]]},{provide:Hw,useValue:"USD"}];let E_=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(ln(Lg))},r.\u0275mod=Ho({type:r}),r.\u0275inj=Mr({providers:u0}),r})()},8939:(Ye,we,F)=>{"use strict";F.d(we,{hO:()=>Y,xv:()=>ee,Dh:()=>ue,GT:()=>re,cc:()=>ae,on:()=>L,pX:()=>ne});var v=F(3018),X=F(7841),k=F(2257);Ye=F.hmd(Ye);const ce=["ngOnDestroy"],ne=(ye,ge,fe,Ae={})=>new Proxy(ye,{get:(ze,Oe)=>fe.runOutsideAngular(()=>{var Tt;if(ye[Oe])return(null===(Tt=null==Ae?void 0:Ae.spy)||void 0===Tt?void 0:Tt.get)&&Ae.spy.get(Oe,ye[Oe]),ye[Oe];if(ce.indexOf(Oe)>-1)return()=>{};const gt=ge.toPromise().then(hn=>{const mt=hn&&hn[Oe];return"function"==typeof mt?mt.bind(hn):mt&&mt.then?mt.then(_t=>fe.run(()=>_t)):fe.run(()=>mt)});return new Proxy(()=>{},{get:(hn,mt)=>gt[mt],apply:(hn,mt,_t)=>gt.then(ht=>{var at;const St=ht&&ht(..._t);return(null===(at=null==Ae?void 0:Ae.spy)||void 0===at?void 0:at.apply)&&Ae.spy.apply(Oe,_t,St),St})})})}),re=(ye,ge)=>{ge.forEach(fe=>{Object.getOwnPropertyNames(fe.prototype||fe).forEach(Ae=>{Object.defineProperty(ye.prototype,Ae,Object.getOwnPropertyDescriptor(fe.prototype||fe,Ae))})})};class me{constructor(ge){return ge}}const ue=new v.OlP("angularfire2.app.options"),ee=new v.OlP("angularfire2.app.name");function L(ye,ge,fe){const ze="object"==typeof fe&&fe||{};ze.name=ze.name||"string"==typeof fe&&fe||"[DEFAULT]";const Tt=X.Z.apps.filter(gt=>gt&&gt.name===ze.name)[0]||ge.runOutsideAngular(()=>X.Z.initializeApp(ye,ze));try{JSON.stringify(ye)!==JSON.stringify(Tt.options)&&V("error",`${Tt.name} Firebase App already initialized with different options${Ye.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(gt){}return new me(Tt)}const V=(ye,...ge)=>{(0,v.X6Q)()&&"undefined"!=typeof console&&console[ye](...ge)},Q={provide:me,useFactory:L,deps:[ue,v.R0b,[new v.FiY,ee]]};let Y=(()=>{class ye{constructor(fe){X.Z.registerVersion("angularfire",k.q4.full,"core"),X.Z.registerVersion("angularfire",k.q4.full,"app-compat"),X.Z.registerVersion("angular",v.q4F.full,fe.toString())}static initializeApp(fe,Ae){return{ngModule:ye,providers:[{provide:ue,useValue:fe},{provide:ee,useValue:Ae}]}}}return ye.\u0275fac=function(fe){return new(fe||ye)(v.LFG(v.Lbi))},ye.\u0275mod=v.oAB({type:ye}),ye.\u0275inj=v.cJS({providers:[Q]}),ye})();function ae(ye,ge,fe,Ae,ze){const[,Oe,Tt]=globalThis.\u0275AngularfireInstanceCache.find(gt=>gt[0]===ye)||[];if(Oe)return function(ye,ge){try{return ye.toString()===ge.toString()}catch(fe){return ye===ge}}(ze,Tt)||(K("error",`${ge} was already initialized on the ${fe} Firebase App with different settings.${he?" You may need to reload as Firebase is not HMR aware.":""}`),K("warn",{is:ze,was:Tt})),Oe;{const gt=Ae();return globalThis.\u0275AngularfireInstanceCache.push([ye,gt,ze]),gt}}const he=!!Ye.hot,K=(ye,...ge)=>{(0,v.X6Q)()&&"undefined"!=typeof console&&console[ye](...ge)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2257:(Ye,we,F)=>{"use strict";F.d(we,{q4:()=>Qf,iC:()=>vc,HU:()=>Ti,vb:()=>ua,JM:()=>_c});var v=F(3018),X=F(2329),k=F(8239),ce=F(8026),ne=F(3854),re=F(3910),me=F(5422),ue=F(6676);const ee="@firebase/installations",L="0.5.4",Q=`w:${L}`,Y="FIS_v2",ge=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function fe(I){return I instanceof ne.ZR&&I.code.includes("request-failed")}function Ae({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function ze(I){return{token:I.token,requestStatus:2,expiresIn:ht(I.expiresIn),creationTime:Date.now()}}function Oe(I,T){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,k.Z)(function*(I,T){const U=(yield T.json()).error;return ge.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function gt({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function hn(I,{refreshToken:T}){const x=gt(I);return x.append("Authorization",function(I){return`${Y} ${I}`}(T)),x}function mt(I){return _t.apply(this,arguments)}function _t(){return(_t=(0,k.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function ht(I){return Number(I.replace("s","000"))}function St(I,T){return qe.apply(this,arguments)}function qe(){return(qe=(0,k.Z)(function*(I,{fid:T}){const x=Ae(I),le={method:"POST",headers:gt(I),body:JSON.stringify({fid:T,authVersion:Y,appId:I.appId,sdkVersion:Q})},Ce=yield mt(()=>fetch(x,le));if(Ce.ok){const Fe=yield Ce.json();return{fid:Fe.fid||T,registrationStatus:2,refreshToken:Fe.refreshToken,authToken:ze(Fe.authToken)}}throw yield Oe("Create Installation",Ce)})).apply(this,arguments)}function ii(I){return new Promise(T=>{setTimeout(T,I)})}const ao=/^[cdef][\w-]{21}$/;function On(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const x=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return ao.test(x)?x:""}catch(I){return""}}function Ji(I){return`${I.appName}!${I.appId}`}const xs=new Map;function Xi(I,T){const x=Ji(I);Wn(x,T),function(I,T){const x=(!Vt&&"BroadcastChannel"in self&&(Vt=new BroadcastChannel("[Firebase] FID Change"),Vt.onmessage=I=>{Wn(I.data.key,I.data.fid)}),Vt);x&&x.postMessage({key:I,fid:T}),0===xs.size&&Vt&&(Vt.close(),Vt=null)}(x,T)}function Wn(I,T){const x=xs.get(I);if(x)for(const U of x)U(T)}let Vt=null;const Te="firebase-installations-store";let sr=null;function kn(){return sr||(sr=(0,ue.openDb)("firebase-installations-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(Te)}})),sr}function Ei(I,T){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,k.Z)(function*(I,T){const x=Ji(I),Z=(yield kn()).transaction(Te,"readwrite"),le=Z.objectStore(Te),Ce=yield le.get(x);return yield le.put(T,x),yield Z.complete,(!Ce||Ce.fid!==T.fid)&&Xi(I,T.fid),T})).apply(this,arguments)}function Gr(I){return uo.apply(this,arguments)}function uo(){return(uo=(0,k.Z)(function*(I){const T=Ji(I),U=(yield kn()).transaction(Te,"readwrite");yield U.objectStore(Te).delete(T),yield U.complete})).apply(this,arguments)}function et(I,T){return Se.apply(this,arguments)}function Se(){return(Se=(0,k.Z)(function*(I,T){const x=Ji(I),Z=(yield kn()).transaction(Te,"readwrite"),le=Z.objectStore(Te),Ce=yield le.get(x),Fe=T(Ce);return void 0===Fe?yield le.delete(x):yield le.put(Fe,x),yield Z.complete,Fe&&(!Ce||Ce.fid!==Fe.fid)&&Xi(I,Fe.fid),Fe})).apply(this,arguments)}function Ut(I){return en.apply(this,arguments)}function en(){return(en=(0,k.Z)(function*(I){let T;const x=yield et(I,U=>{const Z=fn(U),le=kt(I,Z);return T=le.registrationPromise,le.installationEntry});return""===x.fid?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}})).apply(this,arguments)}function fn(I){return yt(I||{fid:On(),registrationStatus:0})}function kt(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(ge.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:x,registrationPromise:function(I,T){return We.apply(this,arguments)}(I,x)}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Pr(I)}:{installationEntry:T}}function We(){return(We=(0,k.Z)(function*(I,T){try{return Ei(I,yield St(I,T))}catch(x){throw fe(x)&&409===x.customData.serverCode?yield Gr(I):yield Ei(I,{fid:T.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Pr(I){return co.apply(this,arguments)}function co(){return(co=(0,k.Z)(function*(I){let T=yield zt(I);for(;1===T.registrationStatus;)yield ii(100),T=yield zt(I);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:U}=yield Ut(I);return U||x}return T})).apply(this,arguments)}function zt(I){return et(I,T=>{if(!T)throw ge.create("installation-not-found");return yt(T)})}function yt(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function $u(I,T){return G.apply(this,arguments)}function G(){return(G=(0,k.Z)(function*({appConfig:I,platformLoggerProvider:T},x){const U=H(I,x),Z=hn(I,x),le=T.getImmediate({optional:!0});le&&Z.append("x-firebase-client",le.getPlatformInfoString());const Fe={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:Q}})},Be=yield mt(()=>fetch(U,Fe));if(Be.ok)return ze(yield Be.json());throw yield Oe("Generate Auth Token",Be)})).apply(this,arguments)}function H(I,{fid:T}){return`${Ae(I)}/${T}/authTokens:generate`}function $(I){return ve.apply(this,arguments)}function ve(){return(ve=(0,k.Z)(function*(I,T=!1){let x;const U=yield et(I.appConfig,le=>{if(!un(le))throw ge.create("not-registered");const Ce=le.authToken;if(!T&&Or(Ce))return le;if(1===Ce.requestStatus)return x=ie(I,T),le;{if(!navigator.onLine)throw ge.create("app-offline");const Fe=on(le);return x=Wt(I,Fe),Fe}});return x?yield x:U.authToken})).apply(this,arguments)}function ie(I,T){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,k.Z)(function*(I,T){let x=yield Ve(I.appConfig);for(;1===x.authToken.requestStatus;)yield ii(100),x=yield Ve(I.appConfig);const U=x.authToken;return 0===U.requestStatus?$(I,T):U})).apply(this,arguments)}function Ve(I){return et(I,T=>{if(!un(T))throw ge.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Wt(I,T){return jn.apply(this,arguments)}function jn(){return(jn=(0,k.Z)(function*(I,T){try{const x=yield $u(I,T),U=Object.assign(Object.assign({},T),{authToken:x});return yield Ei(I.appConfig,U),x}catch(x){if(!fe(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Ei(I.appConfig,U)}else yield Gr(I.appConfig);throw x}})).apply(this,arguments)}function un(I){return void 0!==I&&2===I.registrationStatus}function Or(I){return 2===I.requestStatus&&!function(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+36e5}(I)}function on(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}function lo(){return(lo=(0,k.Z)(function*(I){const T=I,{installationEntry:x,registrationPromise:U}=yield Ut(T.appConfig);return U?U.catch(console.error):$(T).catch(console.error),x.fid})).apply(this,arguments)}function ho(){return(ho=(0,k.Z)(function*(I,T=!1){const x=I;return yield yl(x.appConfig),(yield $(x,T)).token})).apply(this,arguments)}function yl(I){return si.apply(this,arguments)}function si(){return(si=(0,k.Z)(function*(I){const{registrationPromise:T}=yield Ut(I);T&&(yield T)})).apply(this,arguments)}function or(I){return ge.create("missing-app-config-values",{valueName:I})}const Nd="installations";(0,ce._registerComponent)(new re.wA(Nd,I=>{const T=I.getProvider("app").getImmediate();return{app:T,appConfig:function(I){if(!I||!I.options)throw or("App Configuration");if(!I.name)throw or("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!I.options[x])throw or(x);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T),platformLoggerProvider:(0,ce._getProvider)(T,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ce._registerComponent)(new re.wA("installations-internal",I=>{const T=I.getProvider("app").getImmediate(),x=(0,ce._getProvider)(T,Nd).getImmediate();return{getId:()=>function(I){return lo.apply(this,arguments)}(x),getToken:Z=>function(I){return ho.apply(this,arguments)}(x,Z)}},"PRIVATE")),(0,ce.registerVersion)(ee,L),(0,ce.registerVersion)(ee,L,"esm2017");const pn="@firebase/remote-config",Ln=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Vf{constructor(T,x,U,Z){this.client=T,this.storage=x,this.storageCache=U,this.logger=Z}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-x,Z=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Z}.`),Z}fetch(T){var x=this;return(0,k.Z)(function*(){const[U,Z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Z&&x.isCachedDataFresh(T.cacheMaxAgeMillis,U))return Z;T.eTag=Z&&Z.eTag;const le=yield x.client.fetch(T),Ce=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Ce.push(x.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Ce),le})()}}function ji(I=navigator){return I.languages&&I.languages[0]||I.language}class gn{constructor(T,x,U,Z,le,Ce){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=U,this.projectId=Z,this.apiKey=le,this.appId=Ce}fetch(T){var x=this;return(0,k.Z)(function*(){const[U,Z]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Ce=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Fe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Be={sdk_version:x.sdkVersion,app_instance_id:U,app_instance_id_token:Z,app_id:x.appId,language_code:ji()},Lt={method:"POST",headers:Fe,body:JSON.stringify(Be)},Ct=fetch(Ce,Lt),Qn=new Promise((hs,fs)=>{T.signal.addEventListener(()=>{const wc=new Error("The operation was aborted.");wc.name="AbortError",fs(wc)})});let Jn;try{yield Promise.race([Ct,Qn]),Jn=yield Ct}catch(hs){let fs="fetch-client-network";throw"AbortError"===hs.name&&(fs="fetch-timeout"),Ln.create(fs,{originalErrorMessage:hs.message})}let xn=Jn.status;const ds=Jn.headers.get("ETag")||void 0;let To,qi;if(200===Jn.status){let hs;try{hs=yield Jn.json()}catch(fs){throw Ln.create("fetch-client-parse",{originalErrorMessage:fs.message})}To=hs.entries,qi=hs.state}if("INSTANCE_STATE_UNSPECIFIED"===qi?xn=500:"NO_CHANGE"===qi?xn=304:("NO_TEMPLATE"===qi||"EMPTY_CONFIG"===qi)&&(To={}),304!==xn&&200!==xn)throw Ln.create("fetch-status",{httpStatus:xn});return{status:xn,eTag:ds,config:To}})()}}class Ko{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,k.Z)(function*(){const U=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:U}){var Z=this;return(0,k.Z)(function*(){yield function(I,T){return new Promise((x,U)=>{const Z=Math.max(T-Date.now(),0),le=setTimeout(x,Z);I.addEventListener(()=>{clearTimeout(le),U(Ln.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const le=yield Z.client.fetch(T);return yield Z.storage.deleteThrottleMetadata(),le}catch(le){if(!function(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(le))throw le;const Ce={throttleEndTimeMillis:Date.now()+(0,ne.$s)(U),backoffCount:U+1};return yield Z.storage.setThrottleMetadata(Ce),Z.attemptFetch(T,Ce)}})()}}class rm{constructor(T,x,U,Z,le){this.app=T,this._client=x,this._storageCache=U,this._storage=Z,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Zo(I,T){const x=I.target.error||void 0;return Ln.create(T,{originalErrorMessage:x&&x.message})}const mo="app_namespace_store";class im{constructor(T,x,U,Z=function(){return new Promise((I,T)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=U=>{T(Zo(U,"storage-open"))},x.onsuccess=U=>{I(U.target.result)},x.onupgradeneeded=U=>{const Z=U.target.result;switch(U.oldVersion){case 0:Z.createObjectStore(mo,{keyPath:"compositeKey"})}}}catch(x){T(Ln.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=T,this.appName=x,this.namespace=U,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,k.Z)(function*(){const U=yield x.openDbPromise;return new Promise((Z,le)=>{const Fe=U.transaction([mo],"readonly").objectStore(mo),Be=x.createCompositeKey(T);try{const Lt=Fe.get(Be);Lt.onerror=Ct=>{le(Zo(Ct,"storage-get"))},Lt.onsuccess=Ct=>{const Qn=Ct.target.result;Z(Qn?Qn.value:void 0)}}catch(Lt){le(Ln.create("storage-get",{originalErrorMessage:Lt&&Lt.message}))}})})()}set(T,x){var U=this;return(0,k.Z)(function*(){const Z=yield U.openDbPromise;return new Promise((le,Ce)=>{const Be=Z.transaction([mo],"readwrite").objectStore(mo),Lt=U.createCompositeKey(T);try{const Ct=Be.put({compositeKey:Lt,value:x});Ct.onerror=Qn=>{Ce(Zo(Qn,"storage-set"))},Ct.onsuccess=()=>{le()}}catch(Ct){Ce(Ln.create("storage-set",{originalErrorMessage:Ct&&Ct.message}))}})})()}delete(T){var x=this;return(0,k.Z)(function*(){const U=yield x.openDbPromise;return new Promise((Z,le)=>{const Fe=U.transaction([mo],"readwrite").objectStore(mo),Be=x.createCompositeKey(T);try{const Lt=Fe.delete(Be);Lt.onerror=Ct=>{le(Zo(Ct,"storage-delete"))},Lt.onsuccess=()=>{Z()}}catch(Lt){le(Ln.create("storage-delete",{originalErrorMessage:Lt&&Lt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Ld{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,k.Z)(function*(){const x=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),Z=T.storage.getActiveConfig(),le=yield x;le&&(T.lastFetchStatus=le);const Ce=yield U;Ce&&(T.lastSuccessfulFetchTimestampMillis=Ce);const Fe=yield Z;Fe&&(T.activeConfig=Fe)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function vl(){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,k.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ce._registerComponent)(new re.wA("remote-config",function(T,{instanceIdentifier:x}){const U=T.getProvider("app").getImmediate(),Z=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ln.create("registration-window");if(!(0,ne.hl)())throw Ln.create("indexed-db-unavailable");const{projectId:le,apiKey:Ce,appId:Fe}=U.options;if(!le)throw Ln.create("registration-project-id");if(!Ce)throw Ln.create("registration-api-key");if(!Fe)throw Ln.create("registration-app-id");const Be=new im(Fe,U.name,x=x||"firebase"),Lt=new Ld(Be),Ct=new me.Yd(pn);Ct.logLevel=me.in.ERROR;const Qn=new gn(Z,ce.SDK_VERSION,x,le,Ce,Fe),Jn=new Ko(Qn,Be),xn=new Vf(Jn,Be,Lt,Ct),ds=new rm(U,xn,Lt,Be,Ct);return function(I){const T=(0,ne.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(ds),ds},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(pn,"0.3.3"),(0,ce.registerVersion)(pn,"0.3.3","esm2017");const Ud="/firebase-messaging-sw.js",om="/firebase-cloud-messaging-push-scope",Va="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ua="google.c.a.c_id",Yo="google.c.a.c_l",ns="google.c.a.ts",El="google.c.a.e";var mn=(()=>{return(I=mn||(mn={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",mn;var I})();function Bi(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zu(I){const x=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(x),Z=new Uint8Array(U.length);for(let le=0;le<U.length;++le)Z[le]=U.charCodeAt(le);return Z}const ja="fcm_token_details_db",jf="fcm_token_object_Store";function wl(I){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,k.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(ja))return null;let T=null;return(yield(0,ue.openDb)(ja,5,function(){var U=(0,k.Z)(function*(Z){var le;if(Z.oldVersion<2||!Z.objectStoreNames.contains(jf))return;const Ce=Z.transaction.objectStore(jf),Fe=yield Ce.index("fcmSenderId").get(I);if(yield Ce.clear(),Fe)if(2===Z.oldVersion){const Be=Fe;if(!Be.auth||!Be.p256dh||!Be.endpoint)return;T={token:Be.fcmToken,createTime:null!==(le=Be.createTime)&&void 0!==le?le:Date.now(),subscriptionOptions:{auth:Be.auth,p256dh:Be.p256dh,endpoint:Be.endpoint,swScope:Be.swScope,vapidKey:"string"==typeof Be.vapidKey?Be.vapidKey:Bi(Be.vapidKey)}}}else if(3===Z.oldVersion){const Be=Fe;T={token:Be.fcmToken,createTime:Be.createTime,subscriptionOptions:{auth:Bi(Be.auth),p256dh:Bi(Be.p256dh),endpoint:Be.endpoint,swScope:Be.swScope,vapidKey:Bi(Be.vapidKey)}}}else if(4===Z.oldVersion){const Be=Fe;T={token:Be.fcmToken,createTime:Be.createTime,subscriptionOptions:{auth:Bi(Be.auth),p256dh:Bi(Be.p256dh),endpoint:Be.endpoint,swScope:Be.swScope,vapidKey:Bi(Be.vapidKey)}}}});return function(Z){return U.apply(this,arguments)}}())).close(),yield(0,ue.deleteDb)(ja),yield(0,ue.deleteDb)("fcm_vapid_details_db"),yield(0,ue.deleteDb)("undefined"),Bf(T)?T:null})).apply(this,arguments)}function Bf(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Zn="firebase-messaging-store";let $a=null;function Fs(){return $a||($a=(0,ue.openDb)("firebase-messaging-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(Zn)}})),$a}function Ha(I){return rs.apply(this,arguments)}function rs(){return(rs=(0,k.Z)(function*(I){const T=Ga(I),U=yield(yield Fs()).transaction(Zn).objectStore(Zn).get(T);if(U)return U;{const Z=yield wl(I.appConfig.senderId);if(Z)return yield zr(I,Z),Z}})).apply(this,arguments)}function zr(I,T){return $i.apply(this,arguments)}function $i(){return($i=(0,k.Z)(function*(I,T){const x=Ga(I),Z=(yield Fs()).transaction(Zn,"readwrite");return yield Z.objectStore(Zn).put(T,x),yield Z.complete,T})).apply(this,arguments)}function Yt(I){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,k.Z)(function*(I){const T=Ga(I),U=(yield Fs()).transaction(Zn,"readwrite");yield U.objectStore(Zn).delete(T),yield U.complete})).apply(this,arguments)}function Ga({appConfig:I}){return I.appId}const bt=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Jo(I,T){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,k.Z)(function*(I,T){const x=yield ar(I),U=Xo(T),Z={method:"POST",headers:x,body:JSON.stringify(U)};let le;try{le=yield(yield fetch($n(I.appConfig),Z)).json()}catch(Ce){throw bt.create("token-subscribe-failed",{errorInfo:Ce})}if(le.error)throw bt.create("token-subscribe-failed",{errorInfo:le.error.message});if(!le.token)throw bt.create("token-subscribe-no-token");return le.token})).apply(this,arguments)}function _o(I,T){return kr.apply(this,arguments)}function kr(){return(kr=(0,k.Z)(function*(I,T){const x=yield ar(I),U=Xo(T.subscriptionOptions),Z={method:"PATCH",headers:x,body:JSON.stringify(U)};let le;try{le=yield(yield fetch(`${$n(I.appConfig)}/${T.token}`,Z)).json()}catch(Ce){throw bt.create("token-update-failed",{errorInfo:Ce})}if(le.error)throw bt.create("token-update-failed",{errorInfo:le.error.message});if(!le.token)throw bt.create("token-update-no-token");return le.token})).apply(this,arguments)}function Gd(I,T){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,k.Z)(function*(I,T){const U={method:"DELETE",headers:yield ar(I)};try{const le=yield(yield fetch(`${$n(I.appConfig)}/${T}`,U)).json();if(le.error)throw bt.create("token-unsubscribe-failed",{errorInfo:le.error.message})}catch(Z){throw bt.create("token-unsubscribe-failed",{errorInfo:Z})}})).apply(this,arguments)}function $n({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function ar(I){return qu.apply(this,arguments)}function qu(){return(qu=(0,k.Z)(function*({appConfig:I,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Xo({p256dh:I,auth:T,endpoint:x,vapidKey:U}){const Z={web:{endpoint:x,auth:T,p256dh:I}};return U!==Va&&(Z.web.applicationPubKey=U),Z}const za=6048e5;function is(I){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,k.Z)(function*(I){const T=yield Zu(I.swRegistration,I.vapidKey),x={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:Bi(T.getKey("auth")),p256dh:Bi(T.getKey("p256dh"))},U=yield Ha(I.firebaseDependencies);if(U){if(bl(U.subscriptionOptions,x))return Date.now()>=U.createTime+za?zd(I,{token:U.token,createTime:Date.now(),subscriptionOptions:x}):U.token;try{yield Gd(I.firebaseDependencies,U.token)}catch(Z){console.warn(Z)}return Vs(I.firebaseDependencies,x)}return Vs(I.firebaseDependencies,x)})).apply(this,arguments)}function Ku(I){return tt.apply(this,arguments)}function tt(){return(tt=(0,k.Z)(function*(I){const T=yield Ha(I.firebaseDependencies);T&&(yield Gd(I.firebaseDependencies,T.token),yield Yt(I.firebaseDependencies));const x=yield I.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function zd(I,T){return ss.apply(this,arguments)}function ss(){return(ss=(0,k.Z)(function*(I,T){try{const x=yield _o(I.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield zr(I.firebaseDependencies,U),x}catch(x){throw yield Ku(I),x}})).apply(this,arguments)}function Vs(I,T){return vo.apply(this,arguments)}function vo(){return(vo=(0,k.Z)(function*(I,T){const U={token:yield Jo(I,T),createTime:Date.now(),subscriptionOptions:T};return yield zr(I,U),U.token})).apply(this,arguments)}function Zu(I,T){return os.apply(this,arguments)}function os(){return(os=(0,k.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zu(T)})})).apply(this,arguments)}function bl(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}function Ie(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcm_message_id};return function(I,T){if(!T.notification)return;I.notification={};const x=T.notification.title;x&&(I.notification.title=x);const U=T.notification.body;U&&(I.notification.body=U);const Z=T.notification.image;Z&&(I.notification.image=Z)}(T,I),function(I,T){!T.data||(I.data=T.data)}(T,I),function(I,T){if(!T.fcmOptions)return;I.fcmOptions={};const x=T.fcmOptions.link;x&&(I.fcmOptions.link=x);const U=T.fcmOptions.analytics_label;U&&(I.fcmOptions.analyticsLabel=U)}(T,I),T}function Qu(I){return"object"==typeof I&&!!I&&Ua in I}function Eo(I,T){const x=[];for(let U=0;U<I.length;U++)x.push(I.charAt(U)),U<T.length&&x.push(T.charAt(U));return x.join("")}function qa(I){return bt.create("missing-app-config-values",{valueName:I})}Eo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Eo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Us{constructor(T,x,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function(I){if(!I||!I.options)throw qa("App Configuration Object");if(!I.name)throw qa("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=I;for(const U of T)if(!x[U])throw qa(U);return{appName:I.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Z,installations:x,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Wd(I){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,k.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Ud,{scope:om}),I.swRegistration.update().catch(()=>{})}catch(T){throw bt.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function as(I,T){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,k.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield Wd(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw bt.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function Yn(I,T){return ci.apply(this,arguments)}function ci(){return(ci=(0,k.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=Va)})).apply(this,arguments)}function js(){return(js=(0,k.Z)(function*(I,T){if(!navigator)throw bt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw bt.create("permission-blocked");return yield Yn(I,null==T?void 0:T.vapidKey),yield as(I,null==T?void 0:T.serviceWorkerRegistration),is(I)})).apply(this,arguments)}function bi(I,T,x){return Il.apply(this,arguments)}function Il(){return(Il=(0,k.Z)(function*(I,T,x){const U=Xu(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:x[Ua],message_name:x[Yo],message_time:x[ns],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Xu(I){switch(I){case mn.NOTIFICATION_CLICKED:return"notification_open";case mn.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ta(){return(ta=(0,k.Z)(function*(I,T){const x=T.data;if(!x.isFirebaseMessaging)return;I.onMessageHandler&&x.messageType===mn.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ie(x)):I.onMessageHandler.next(Ie(x)));const U=x.data;Qu(U)&&"1"===U[El]&&(yield bi(I,x.messageType,U))})).apply(this,arguments)}const tc="@firebase/messaging";function Kd(){return us.apply(this,arguments)}function us(){return(us=(0,k.Z)(function*(){return"undefined"!=typeof window&&(0,ne.hl)()&&(yield(0,ne.eu)())&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ce._registerComponent)(new re.wA("messaging",I=>{const T=new Us(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function(I,T){return ta.apply(this,arguments)}(T,x)),T},"PUBLIC")),(0,ce._registerComponent)(new re.wA("messaging-internal",I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:U=>function(I,T){return js.apply(this,arguments)}(T,U)}},"PRIVATE")),(0,ce.registerVersion)(tc,"0.9.4"),(0,ce.registerVersion)(tc,"0.9.4","esm2017");const Wr="analytics",cn="firebase_id",Ya="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qd="https://www.googletagmanager.com/gtag/js",Fn=new me.Yd("@firebase/analytics");function Jd(I){return Promise.all(I.map(T=>T.catch(x=>x)))}function sc(I,T){const x=document.createElement("script");x.src=`${Qd}?l=${I}&id=${T}`,x.async=!0,document.head.appendChild(x)}function Ja(I,T,x,U,Z,le){return oc.apply(this,arguments)}function oc(){return(oc=(0,k.Z)(function*(I,T,x,U,Z,le){const Ce=U[Z];try{if(Ce)yield T[Ce];else{const Be=(yield Jd(x)).find(Lt=>Lt.measurementId===Z);Be&&(yield T[Be.appId])}}catch(Fe){Fn.error(Fe)}I("config",Z,le)})).apply(this,arguments)}function wo(I,T,x,U,Z){return ac.apply(this,arguments)}function ac(){return(ac=(0,k.Z)(function*(I,T,x,U,Z){try{let le=[];if(Z&&Z.send_to){let Ce=Z.send_to;Array.isArray(Ce)||(Ce=[Ce]);const Fe=yield Jd(x);for(const Be of Ce){const Lt=Fe.find(Qn=>Qn.measurementId===Be),Ct=Lt&&T[Lt.appId];if(!Ct){le=[];break}le.push(Ct)}}0===le.length&&(le=Object.values(T)),yield Promise.all(le),I("event",U,Z||{})}catch(le){Fn.error(le)}})).apply(this,arguments)}function um(){const I=window.document.getElementsByTagName("script");for(const T of Object.values(I))if(T.src&&T.src.includes(Qd))return T;return null}const ur=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),lm=new class{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function O_(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function eu(I){return uc.apply(this,arguments)}function uc(){return(uc=(0,k.Z)(function*(I){var T;const{appId:x,apiKey:U}=I,Z={method:"GET",headers:O_(U)},le=Ya.replace("{app-id}",x),Ce=yield fetch(le,Z);if(200!==Ce.status&&304!==Ce.status){let Fe="";try{const Be=yield Ce.json();(null===(T=Be.error)||void 0===T?void 0:T.message)&&(Fe=Be.error.message)}catch(Be){}throw ur.create("config-fetch-failed",{httpStatus:Ce.status,responseMessage:Fe})}return Ce.json()})).apply(this,arguments)}function cc(I){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,k.Z)(function*(I,T=lm,x){const{appId:U,apiKey:Z,measurementId:le}=I.options;if(!U)throw ur.create("no-app-id");if(!Z){if(le)return{measurementId:le,appId:U};throw ur.create("no-api-key")}const Ce=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Fe=new nu;return setTimeout((0,k.Z)(function*(){Fe.abort()}),void 0!==x?x:6e4),lc({appId:U,apiKey:Z,measurementId:le},Ce,Fe,T)})).apply(this,arguments)}function lc(I,T,x){return dc.apply(this,arguments)}function dc(){return(dc=(0,k.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:x},U,Z=lm){const{appId:le,measurementId:Ce}=I;try{yield tu(U,T)}catch(Fe){if(Ce)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ce} provided in the "measurementId" field in the local Firebase config. [${Fe.message}]`),{appId:le,measurementId:Ce};throw Fe}try{const Fe=yield eu(I);return Z.deleteThrottleMetadata(le),Fe}catch(Fe){if(!qf(Fe)){if(Z.deleteThrottleMetadata(le),Ce)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ce} provided in the "measurementId" field in the local Firebase config. [${Fe.message}]`),{appId:le,measurementId:Ce};throw Fe}const Be=503===Number(Fe.customData.httpStatus)?(0,ne.$s)(x,Z.intervalMillis,30):(0,ne.$s)(x,Z.intervalMillis),Lt={throttleEndTimeMillis:Date.now()+Be,backoffCount:x+1};return Z.setThrottleMetadata(le,Lt),Fn.debug(`Calling attemptFetch again in ${Be} millis`),lc(I,Lt,U,Z)}})).apply(this,arguments)}function tu(I,T){return new Promise((x,U)=>{const Z=Math.max(T-Date.now(),0),le=setTimeout(x,Z);I.addEventListener(()=>{clearTimeout(le),U(ur.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function qf(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}class nu{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function hc(){return Io.apply(this,arguments)}function Io(){return(Io=(0,k.Z)(function*(){if(!(0,ne.hl)())return Fn.warn(ur.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(I){return Fn.warn(ur.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function ra(){return(ra=(0,k.Z)(function*(I,T,x,U,Z,le,Ce){var Fe;const Be=cc(I);Be.then(xn=>{x[xn.measurementId]=xn.appId,I.options.measurementId&&xn.measurementId!==I.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${xn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(xn=>Fn.error(xn)),T.push(Be);const Lt=hc().then(xn=>{if(xn)return U.getId()}),[Ct,Qn]=yield Promise.all([Be,Lt]);um()||sc(le,Ct.measurementId),Z("js",new Date);const Jn=null!==(Fe=null==Ce?void 0:Ce.config)&&void 0!==Fe?Fe:{};return Jn.origin="firebase",Jn.update=!0,null!=Qn&&(Jn[cn]=Qn),Z("config",Ct.measurementId,Jn),Ct.measurementId})).apply(this,arguments)}class Ze{constructor(T){this.app=T}_delete(){return delete _n[this.app.options.appId],Promise.resolve()}}let _n={},cr=[];const li={};let fc,Er,vr="dataLayer",rt=!1;function zi(I,T,x){!function(){const I=[];if((0,ne.ru)()&&I.push("This is a browser extension environment."),(0,ne.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((U,Z)=>`(${Z+1}) ${U}`).join(" "),x=ur.create("invalid-analytics-context",{errorInfo:T});Fn.warn(x.message)}}();const U=I.options.appId;if(!U)throw ur.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw ur.create("no-api-key");Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=_n[U])throw ur.create("already-exists",{id:U});if(!rt){!function(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(vr);const{wrappedGtag:le,gtagCore:Ce}=function(I,T,x,U,Z){let le=function(...Ce){window[U].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(le=window[Z]),window[Z]=function(I,T,x,U){function le(){return(le=(0,k.Z)(function*(Ce,Fe,Be){try{"event"===Ce?yield wo(I,T,x,Fe,Be):"config"===Ce?yield Ja(I,T,x,U,Fe,Be):I("set",Fe)}catch(Lt){Fn.error(Lt)}})).apply(this,arguments)}return function(Ce,Fe,Be){return le.apply(this,arguments)}}(le,I,T,x),{gtagCore:le,wrappedGtag:window[Z]}}(_n,cr,li,vr,"gtag");Er=le,fc=Ce,rt=!0}return _n[U]=function(I,T,x,U,Z,le,Ce){return ra.apply(this,arguments)}(I,cr,li,T,fc,vr,x),new Ze(I)}function Cl(){return(Cl=(0,k.Z)(function*(I,T,x,U,Z){if(Z&&Z.global)I("event",x,U);else{const le=yield T;I("event",x,Object.assign(Object.assign({},U),{send_to:le}))}})).apply(this,arguments)}function Wi(){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,k.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(I){return!1}})).apply(this,arguments)}const Tl="@firebase/analytics";(0,ce._registerComponent)(new re.wA(Wr,(T,{options:x})=>zi(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ce._registerComponent)(new re.wA("analytics-internal",function(T){try{const x=T.getProvider(Wr).getImmediate();return{logEvent:(U,Z,le)=>function(I,T,x,U){I=(0,ne.m9)(I),function(I,T,x,U,Z){return Cl.apply(this,arguments)}(Er,_n[I.app.options.appId],T,x,U).catch(Z=>Fn.error(Z))}(x,U,Z,le)}}catch(x){throw ur.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ce.registerVersion)(Tl,"0.7.4"),(0,ce.registerVersion)(Tl,"0.7.4","esm2017");var Kf=F(7771),Qt=F(3637),Zf=F(3342),Yf=F(3101),k_=F(309);const Qf=new v.GfV("7.2.0"),th="__angularfire_symbol__analyticsIsSupported",Xf="__angularfire_symbol__remoteConfigIsSupported",iu="__angularfire_symbol__messagingIsSupported";function _c(I,T,x){if(T){if(1===T.length)return T[0];const le=T.filter(Ce=>Ce.app===x);if(1===le.length)return le[0]}return x.container.getProvider(I).getImmediate({optional:!0})}globalThis[th]||(globalThis[th]=Wi().then(I=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=I)),globalThis[iu]||(globalThis[iu]=Kd().then(I=>globalThis.__angularfire_symbol__messagingIsSupportedValue=I)),globalThis[Xf]||(globalThis[Xf]=vl().then(I=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=I));const ua=(I,T)=>{const x=T?[T]:(0,X.C6)(),U=[];return x.forEach(Z=>{Z.container.getProvider(I).instances.forEach(Ce=>{U.includes(Ce)||U.push(Ce)})}),U};function su(){}class np{constructor(T,x=Kf.N){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,U){const Z=this.zone;return this.delegate.schedule(function(Ce){Z.runGuarded(()=>{T.apply(this,[Ce])})},x,U)}}class Di{constructor(T){this.zone=T,this.task=null}call(T,x){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",su,{},su,su)),x.pipe((0,Zf.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ti=(()=>{class I{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new np(Zone.current)),this.insideAngular=x.run(()=>new np(Zone.current,Qt.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(x){return new(x||I)(v.LFG(v.R0b))},I.\u0275prov=v.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Si(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function vc(I){return Si(),function(I){return function(x){return(x=x.lift(new Di(I.ngZone))).pipe((0,Yf.R)(I.outsideAngular),(0,k_.QV)(I.insideAngular))}}(Si())(I)}},3854:(Ye,we,F)=>{"use strict";F.d(we,{BH:()=>Y,LL:()=>qe,ZR:()=>St,zI:()=>_t,US:()=>re,tV:()=>ee,$s:()=>zt,r3:()=>an,Sg:()=>ae,ne:()=>sr,vZ:()=>Vt,ZB:()=>V,pd:()=>mr,m9:()=>$u,z$:()=>be,jU:()=>ye,ru:()=>ge,d:()=>Ae,xb:()=>Wn,w1:()=>ze,hl:()=>hn,uI:()=>he,UG:()=>K,b$:()=>fe,G6:()=>gt,Mn:()=>Oe,xO:()=>ka,zd:()=>Mr,eu:()=>mt});const ce=function(G){const H=[];let $=0;for(let ve=0;ve<G.length;ve++){let ie=G.charCodeAt(ve);ie<128?H[$++]=ie:ie<2048?(H[$++]=ie>>6|192,H[$++]=63&ie|128):55296==(64512&ie)&&ve+1<G.length&&56320==(64512&G.charCodeAt(ve+1))?(ie=65536+((1023&ie)<<10)+(1023&G.charCodeAt(++ve)),H[$++]=ie>>18|240,H[$++]=ie>>12&63|128,H[$++]=ie>>6&63|128,H[$++]=63&ie|128):(H[$++]=ie>>12|224,H[$++]=ie>>6&63|128,H[$++]=63&ie|128)}return H},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,H){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let ie=0;ie<G.length;ie+=3){const Ue=G[ie],Ve=ie+1<G.length,Wt=Ve?G[ie+1]:0,jn=ie+2<G.length,un=jn?G[ie+2]:0;let on=(15&Wt)<<2|un>>6,Fi=63&un;jn||(Fi=64,Ve||(on=64)),ve.push($[Ue>>2],$[(3&Ue)<<4|Wt>>4],$[on],$[Fi])}return ve.join("")},encodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(G):this.encodeByteArray(ce(G),H)},decodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(G):function(G){const H=[];let $=0,ve=0;for(;$<G.length;){const ie=G[$++];if(ie<128)H[ve++]=String.fromCharCode(ie);else if(ie>191&&ie<224){const Ue=G[$++];H[ve++]=String.fromCharCode((31&ie)<<6|63&Ue)}else if(ie>239&&ie<365){const jn=((7&ie)<<18|(63&G[$++])<<12|(63&G[$++])<<6|63&G[$++])-65536;H[ve++]=String.fromCharCode(55296+(jn>>10)),H[ve++]=String.fromCharCode(56320+(1023&jn))}else{const Ue=G[$++],Ve=G[$++];H[ve++]=String.fromCharCode((15&ie)<<12|(63&Ue)<<6|63&Ve)}}return H.join("")}(this.decodeStringToByteArray(G,H))},decodeStringToByteArray(G,H){this.init_();const $=H?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let ie=0;ie<G.length;){const Ue=$[G.charAt(ie++)],Wt=ie<G.length?$[G.charAt(ie)]:0;++ie;const un=ie<G.length?$[G.charAt(ie)]:64;++ie;const At=ie<G.length?$[G.charAt(ie)]:64;if(++ie,null==Ue||null==Wt||null==un||null==At)throw Error();ve.push(Ue<<2|Wt>>4),64!==un&&(ve.push(Wt<<4&240|un>>2),64!==At&&ve.push(un<<6&192|At))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},ue=function(G){return function(G){const H=ce(G);return re.encodeByteArray(H,!0)}(G).replace(/\./g,"")},ee=function(G){try{return re.decodeString(G,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function V(G,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return H}for(const $ in H)!H.hasOwnProperty($)||!Q($)||(G[$]=V(G[$],H[$]));return G}function Q(G){return"__proto__"!==G}class Y{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,$)=>{this.resolve=H,this.reject=$})}wrapCallback(H){return($,ve)=>{$?this.reject($):this.resolve(ve),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H($):H($,ve))}}}function ae(G,H){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=H||"demo-project",ie=G.iat||0,Ue=G.sub||G.user_id;if(!Ue)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ve=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:ie,exp:ie+3600,auth_time:ie,sub:Ue,user_id:Ue,firebase:{sign_in_provider:"custom",identities:{}}},G);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(Ve)),""].join(".")}function be(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(be())}function K(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(G){return!1}}function ye(){return"object"==typeof self&&self.self===self}function ge(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){return be().indexOf("Electron/")>=0}function ze(){const G=be();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function Oe(){return be().indexOf("MSAppHost/")>=0}function gt(){return!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hn(){return"object"==typeof indexedDB}function mt(){return new Promise((G,H)=>{try{let $=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",ie=self.indexedDB.open(ve);ie.onsuccess=()=>{ie.result.close(),$||self.indexedDB.deleteDatabase(ve),G(!0)},ie.onupgradeneeded=()=>{$=!1},ie.onerror=()=>{var Ue;H((null===(Ue=ie.error)||void 0===Ue?void 0:Ue.message)||"")}}catch($){H($)}})}function _t(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class St extends Error{constructor(H,$,ve){super($),this.code=H,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,St.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qe.prototype.create)}}class qe{constructor(H,$,ve){this.service=H,this.serviceName=$,this.errors=ve}create(H,...$){const ve=$[0]||{},ie=`${this.service}/${H}`,Ue=this.errors[H],Ve=Ue?function(G,H){return G.replace(As,($,ve)=>{const ie=H[ve];return null!=ie?String(ie):`<${ve}?>`})}(Ue,ve):"Error";return new St(ie,`${this.serviceName}: ${Ve} (${ie}).`,ve)}}const As=/\{\$([^}]+)}/g;function an(G,H){return Object.prototype.hasOwnProperty.call(G,H)}function Wn(G){for(const H in G)if(Object.prototype.hasOwnProperty.call(G,H))return!1;return!0}function Vt(G,H){if(G===H)return!0;const $=Object.keys(G),ve=Object.keys(H);for(const ie of $){if(!ve.includes(ie))return!1;const Ue=G[ie],Ve=H[ie];if(wt(Ue)&&wt(Ve)){if(!Vt(Ue,Ve))return!1}else if(Ue!==Ve)return!1}for(const ie of ve)if(!$.includes(ie))return!1;return!0}function wt(G){return null!==G&&"object"==typeof G}function ka(G){const H=[];for(const[$,ve]of Object.entries(G))Array.isArray(ve)?ve.forEach(ie=>{H.push(encodeURIComponent($)+"="+encodeURIComponent(ie))}):H.push(encodeURIComponent($)+"="+encodeURIComponent(ve));return H.length?"&"+H.join("&"):""}function Mr(G){const H={};return G.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[ie,Ue]=ve.split("=");H[decodeURIComponent(ie)]=decodeURIComponent(Ue)}}),H}function mr(G){const H=G.indexOf("?");if(!H)return"";const $=G.indexOf("#",H);return G.substring(H,$>0?$:void 0)}function sr(G,H){const $=new kn(G,H);return $.subscribe.bind($)}class kn{constructor(H,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{H(this)}).catch(ve=>{this.error(ve)})}next(H){this.forEachObserver($=>{$.next(H)})}error(H){this.forEachObserver($=>{$.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,$,ve){let ie;if(void 0===H&&void 0===$&&void 0===ve)throw new Error("Missing Observer.");ie=function(G,H){if("object"!=typeof G||null===G)return!1;for(const $ of["next","error","complete"])if($ in G&&"function"==typeof G[$])return!0;return!1}(H)?H:{next:H,error:$,complete:ve},void 0===ie.next&&(ie.next=Gr),void 0===ie.error&&(ie.error=Gr),void 0===ie.complete&&(ie.complete=Gr);const Ue=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ie.error(this.finalError):ie.complete()}catch(Ve){}}),this.observers.push(ie),Ue}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,H)}sendOne(H,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{$(this.observers[H])}catch(ve){"undefined"!=typeof console&&console.error&&console.error(ve)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gr(){}function zt(G,H=1e3,$=2){const ve=H*Math.pow($,G),ie=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+ie)}function $u(G){return G&&G._delegate?G._delegate:G}},2329:(Ye,we,F)=>{"use strict";F.d(we,{Mq:()=>v.getApp,C6:()=>v.getApps});var v=F(8026);(0,v.registerVersion)("firebase","9.6.0","app")},7841:(Ye,we,F)=>{"use strict";F.d(we,{Z:()=>v.Z});var v=F(3394);v.Z.registerVersion("firebase","9.6.0","app-compat")},941:(Ye,we,F)=>{"use strict";F.r(we);var v=F(8239),X=F(3394),k=F(3854),ce=F(8026);function ue(m,h){var f={};for(var E in m)Object.prototype.hasOwnProperty.call(m,E)&&h.indexOf(E)<0&&(f[E]=m[E]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(E=Object.getOwnPropertySymbols(m);D<E.length;D++)h.indexOf(E[D])<0&&Object.prototype.propertyIsEnumerable.call(m,E[D])&&(f[E[D]]=m[E[D]])}return f}var St=F(5422),qe=F(3910);const xs=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Xi=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},an=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Wn=new St.Yd("@firebase/auth");function Ns(m,...h){Wn.logLevel<=St.in.ERROR&&Wn.error(`Auth (${ce.SDK_VERSION}): ${m}`,...h)}function Vt(m,...h){throw mr(m,...h)}function wt(m,...h){return mr(m,...h)}function ka(m,h,f){const E=Object.assign(Object.assign({},Xi()),{[h]:f});return new k.LL("auth","Firebase",E).create(h,{appName:m.name})}function Mr(m,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&Vt(m,"argument-error"),ka(m,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mr(m,...h){if("string"!=typeof m){const f=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=m.name),m._errorFactory.create(f,...E)}return an.create(m,...h)}function Te(m,h,...f){if(!m)throw mr(h,...f)}function sr(m){const h="INTERNAL ASSERTION FAILED: "+m;throw Ns(h),new Error(h)}function kn(m,h){m||sr(h)}const Ei=new Map;function Nt(m){kn(m instanceof Function,"Expected a class definition");let h=Ei.get(m);return h?(kn(h instanceof m,"Instance stored in cache mismatched with class"),h):(h=new m,Ei.set(m,h),h)}function et(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function Se(){return"http:"===Ut()||"https:"===Ut()}function Ut(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class kt{constructor(h,f){this.shortDelay=h,this.longDelay=f,kn(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Se()||(0,k.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ke(m,h){kn(m.emulator,"Emulator should always be set here");const{url:f}=m.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class We{static initialize(h,f,E){this.fetchImpl=h,f&&(this.headersImpl=f),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Pr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},co=new kt(3e4,6e4);function zt(m,h){return m.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:m.tenantId}):h}function yt(m,h,f,E){return yr.apply(this,arguments)}function yr(){return(yr=(0,v.Z)(function*(m,h,f,E,D={}){return $u(m,D,()=>{let R={},B={};E&&("GET"===h?B=E:R={body:JSON.stringify(E)});const te=(0,k.xO)(Object.assign({key:m.config.apiKey},B)).slice(1),Ne=new(We.headers());return Ne.set("Content-Type","application/json"),Ne.set("X-Client-Version",m._getSdkClientVersion()),m.languageCode&&Ne.set("X-Firebase-Locale",m.languageCode),We.fetch()(ve(m,m.config.apiHost,f,te),Object.assign({method:h,headers:Ne,referrerPolicy:"no-referrer"},R))})})).apply(this,arguments)}function $u(m,h,f){return G.apply(this,arguments)}function G(){return(G=(0,v.Z)(function*(m,h,f){m._canInitEmulator=!1;const E=Object.assign(Object.assign({},Pr),h);try{const D=new ie(m),R=yield Promise.race([f(),D.promise]);D.clearNetworkTimeout();const B=yield R.json();if("needConfirmation"in B)throw Ue(m,"account-exists-with-different-credential",B);if(R.ok&&!("errorMessage"in B))return B;{const te=R.ok?B.errorMessage:B.error.message,[Ne,Ee]=te.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ne)throw Ue(m,"credential-already-in-use",B);if("EMAIL_EXISTS"===Ne)throw Ue(m,"email-already-in-use",B);const $e=E[Ne]||Ne.toLowerCase().replace(/[_\s]+/g,"-");if(Ee)throw ka(m,$e,Ee);Vt(m,$e)}}catch(D){if(D instanceof k.ZR)throw D;Vt(m,"network-request-failed")}})).apply(this,arguments)}function H(m,h,f,E){return $.apply(this,arguments)}function $(){return($=(0,v.Z)(function*(m,h,f,E,D={}){const R=yield yt(m,h,f,E,D);return"mfaPendingCredential"in R&&Vt(m,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function ve(m,h,f,E){const D=`${h}${f}?${E}`;return m.config.emulator?Ke(m.config,D):`${m.config.apiScheme}://${D}`}class ie{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,E)=>{this.timer=setTimeout(()=>E(wt(this.auth,"timeout")),co.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ue(m,h,f){const E={appName:m.name};f.email&&(E.email=f.email),f.phoneNumber&&(E.phoneNumber=f.phoneNumber);const D=wt(m,h,E);return D.customData._tokenResponse=f,D}function Wt(){return(Wt=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function jn(m,h){return un.apply(this,arguments)}function un(){return(un=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Or(m,h){return At.apply(this,arguments)}function At(){return(At=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function on(m){if(m)try{const h=new Date(Number(m));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function lo(){return(lo=(0,v.Z)(function*(m,h=!1){const f=(0,k.m9)(m),E=yield f.getIdToken(h),D=ho(E);Te(D&&D.exp&&D.auth_time&&D.iat,f.auth,"internal-error");const R="object"==typeof D.firebase?D.firebase:void 0,B=null==R?void 0:R.sign_in_provider;return{claims:D,token:E,authTime:on(ml(D.auth_time)),issuedAtTime:on(ml(D.iat)),expirationTime:on(ml(D.exp)),signInProvider:B||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function ml(m){return 1e3*Number(m)}function ho(m){const[h,f,E]=m.split(".");if(void 0===h||void 0===f||void 0===E)return Ns("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,k.tV)(f);return D?JSON.parse(D):(Ns("Failed to decode base64 JWT payload"),null)}catch(D){return Ns("Caught error parsing JWT payload as JSON",D),null}}function si(m,h){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,v.Z)(function*(m,h,f=!1){if(f)return h;try{return yield h}catch(E){throw E instanceof k.ZR&&fo(E)&&m.auth.currentUser===m&&(yield m.auth.signOut()),E}})).apply(this,arguments)}function fo({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class Go{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const D=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,v.Z)(function*(){yield f.iteration()}),E)}iteration(){var h=this;return(0,v.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&h.schedule(!0))}h.schedule()})()}}class xd{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=on(this.lastLoginAt),this.creationTime=on(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ms(m){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,v.Z)(function*(m){var h;const f=m.auth,E=yield m.getIdToken(),D=yield si(m,Or(f,{idToken:E}));Te(null==D?void 0:D.users.length,f,"internal-error");const R=D.users[0];m._notifyReloadListener(R);const B=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?Nd(R.providerUserInfo):[],te=or(m.providerData,B),$e=!!m.isAnonymous&&!(m.email&&R.passwordHash||(null==te?void 0:te.length)),He={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:te,metadata:new xd(R.createdAt,R.lastLoginAt),isAnonymous:$e};Object.assign(m,He)})).apply(this,arguments)}function es(){return(es=(0,v.Z)(function*(m){const h=(0,k.m9)(m);yield Ms(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function or(m,h){return[...m.filter(E=>!h.some(D=>D.providerId===E.providerId)),...h]}function Nd(m){return m.map(h=>{var{providerId:f}=h,E=ue(h,["providerId"]);return{providerId:f,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function ke(){return(ke=(0,v.Z)(function*(m,h){const f=yield $u(m,{},()=>{const E=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:D,apiKey:R}=m.config,B=ve(m,D,"/v1/token",`key=${R}`);return We.fetch()(B,{method:"POST",headers:{"X-Client-Version":m._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:E})});return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class ut{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){Te(h.idToken,"internal-error"),Te(void 0!==h.idToken,"internal-error"),Te(void 0!==h.refreshToken,"internal-error");const f="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function(m){const h=ho(m);return Te(h,"internal-error"),Te(void 0!==h.exp,"internal-error"),Te(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}getToken(h,f=!1){var E=this;return(0,v.Z)(function*(){return Te(!E.accessToken||E.refreshToken,h,"user-token-expired"),f||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var E=this;return(0,v.Z)(function*(){const{accessToken:D,refreshToken:R,expiresIn:B}=yield function(m,h){return ke.apply(this,arguments)}(h,f);E.updateTokensAndExpiration(D,R,Number(B))})()}updateTokensAndExpiration(h,f,E){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,f){const{refreshToken:E,accessToken:D,expirationTime:R}=f,B=new ut;return E&&(Te("string"==typeof E,"internal-error",{appName:h}),B.refreshToken=E),D&&(Te("string"==typeof D,"internal-error",{appName:h}),B.accessToken=D),R&&(Te("number"==typeof R,"internal-error",{appName:h}),B.expirationTime=R),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new ut,this.toJSON())}_performRefresh(){return sr("not implemented")}}function jt(m,h){Te("string"==typeof m||void 0===m,"internal-error",{appName:h})}class pn{constructor(h){var{uid:f,auth:E,stsTokenManager:D}=h,R=ue(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Go(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=E,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.metadata=new xd(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,v.Z)(function*(){const E=yield si(f,f.stsTokenManager.getToken(f.auth,h));return Te(E,f.auth,"internal-error"),f.accessToken!==E&&(f.accessToken=E,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),E})()}getIdTokenResult(h){return function(m){return lo.apply(this,arguments)}(this,h)}reload(){return function(m){return es.apply(this,arguments)}(this)}_assign(h){this!==h&&(Te(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new pn(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var E=this;return(0,v.Z)(function*(){let D=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),D=!0),f&&(yield Ms(E)),yield E.auth._persistUserIfCurrent(E),D&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,v.Z)(function*(){const f=yield h.getIdToken();return yield si(h,function(m,h){return Wt.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var E,D,R,B,te,Ne,Ee,$e;const He=null!==(E=f.displayName)&&void 0!==E?E:void 0,It=null!==(D=f.email)&&void 0!==D?D:void 0,Vn=null!==(R=f.phoneNumber)&&void 0!==R?R:void 0,Zi=null!==(B=f.photoURL)&&void 0!==B?B:void 0,Uc=null!==(te=f.tenantId)&&void 0!==te?te:void 0,vp=null!==(Ne=f._redirectEventId)&&void 0!==Ne?Ne:void 0,gs=null!==(Ee=f.createdAt)&&void 0!==Ee?Ee:void 0,jc=null!==($e=f.lastLoginAt)&&void 0!==$e?$e:void 0,{uid:Bc,emailVerified:Ih,isAnonymous:du,providerData:hu,stsTokenManager:Ep}=f;Te(Bc&&Ep,h,"internal-error");const tv=ut.fromJSON(this.name,Ep);Te("string"==typeof Bc,h,"internal-error"),jt(He,h.name),jt(It,h.name),Te("boolean"==typeof Ih,h,"internal-error"),Te("boolean"==typeof du,h,"internal-error"),jt(Vn,h.name),jt(Zi,h.name),jt(Uc,h.name),jt(vp,h.name),jt(gs,h.name),jt(jc,h.name);const ql=new pn({uid:Bc,auth:h,email:It,emailVerified:Ih,displayName:He,isAnonymous:du,photoURL:Zi,phoneNumber:Vn,tenantId:Uc,stsTokenManager:tv,createdAt:gs,lastLoginAt:jc});return hu&&Array.isArray(hu)&&(ql.providerData=hu.map(Ch=>Object.assign({},Ch))),vp&&(ql._redirectEventId=vp),ql}static _fromIdTokenResponse(h,f,E=!1){return(0,v.Z)(function*(){const D=new ut;D.updateFromServerResponse(f);const R=new pn({uid:f.localId,auth:h,stsTokenManager:D,isAnonymous:E});return yield Ms(R),R})()}}const tn=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,v.Z)(function*(){return!0})()}_set(f,E){var D=this;return(0,v.Z)(function*(){D.storage[f]=E})()}_get(f){var E=this;return(0,v.Z)(function*(){const D=E.storage[f];return void 0===D?null:D})()}_remove(f){var E=this;return(0,v.Z)(function*(){delete E.storage[f]})()}_addListener(f,E){}_removeListener(f,E){}}return m.type="NONE",m})();function qn(m,h,f){return`firebase:${m}:${h}:${f}`}class Kt{constructor(h,f,E){this.persistence=h,this.auth=f,this.userKey=E;const{config:D,name:R}=this.auth;this.fullUserKey=qn(this.userKey,D.apiKey,R),this.fullPersistenceKey=qn("persistence",D.apiKey,R),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,v.Z)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?pn._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,v.Z)(function*(){if(f.persistence===h)return;const E=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,E?f.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,E="authUser"){return(0,v.Z)(function*(){if(!f.length)return new Kt(Nt(tn),h,E);const D=(yield Promise.all(f.map(function(){var Ee=(0,v.Z)(function*($e){if(yield $e._isAvailable())return $e});return function($e){return Ee.apply(this,arguments)}}()))).filter(Ee=>Ee);let R=D[0]||Nt(tn);const B=qn(E,h.config.apiKey,h.name);let te=null;for(const Ee of f)try{const $e=yield Ee._get(B);if($e){const He=pn._fromJSON(h,$e);Ee!==R&&(te=He),R=Ee;break}}catch($e){}const Ne=D.filter(Ee=>Ee._shouldAllowMigration);return R._shouldAllowMigration&&Ne.length?(R=Ne[0],te&&(yield R._set(B,te.toJSON())),yield Promise.all(f.map(function(){var Ee=(0,v.Z)(function*($e){if($e!==R)try{yield $e._remove(B)}catch(He){}});return function($e){return Ee.apply(this,arguments)}}())),new Kt(R,h,E)):new Kt(R,h,E)})()}}function Ln(m){const h=m.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Os(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(zo(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Vi(h))return"Blackberry";if(_r(h))return"Webos";if(ct(h))return"Safari";if((h.includes("chrome/")||La(h))&&!h.includes("edge/"))return"Chrome";if(go(h))return"Android";{const E=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function zo(m=(0,k.z$)()){return/firefox\//i.test(m)}function ct(m=(0,k.z$)()){const h=m.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function La(m=(0,k.z$)()){return/crios\//i.test(m)}function Os(m=(0,k.z$)()){return/iemobile/i.test(m)}function go(m=(0,k.z$)()){return/android/i.test(m)}function Vi(m=(0,k.z$)()){return/blackberry/i.test(m)}function _r(m=(0,k.z$)()){return/webos/i.test(m)}function Ui(m=(0,k.z$)()){return/iphone|ipad|ipod/i.test(m)}function Wo(m=(0,k.z$)()){return Ui(m)||go(m)||_r(m)||Vi(m)||/windows phone/i.test(m)||Os(m)}function Hu(m,h=[]){let f;switch(m){case"Browser":f=Ln((0,k.z$)());break;case"Worker":f=`${Ln((0,k.z$)())}-${m}`;break;default:f=m}const E=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${ce.SDK_VERSION}/${E}`}class Pd{constructor(h,f){this.app=h,this.config=f,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ts(this),this.idTokenSubscription=new ts(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=an,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=f.sdkClientVersion}_initializeWithPersistence(h,f){var E=this;return f&&(this._popupRedirectResolver=Nt(f)),this._initializationPromise=this.queue((0,v.Z)(function*(){var D,R;E._deleted||(E.persistenceManager=yield Kt.create(E,h),!E._deleted&&((null===(D=E._popupRedirectResolver)||void 0===D?void 0:D._shouldInitProactively)&&(yield E._popupRedirectResolver._initialize(E)),yield E.initializeCurrentUser(f),E.lastNotifiedUid=(null===(R=E.currentUser)||void 0===R?void 0:R.uid)||null,!E._deleted&&(E._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,v.Z)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f)}})()}initializeCurrentUser(h){var f=this;return(0,v.Z)(function*(){var E;let D=yield f.assertedPersistence.getCurrentUser();if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const R=null===(E=f.redirectUser)||void 0===E?void 0:E._redirectEventId,B=null==D?void 0:D._redirectEventId,te=yield f.tryRedirectSignIn(h);(!R||R===B)&&(null==te?void 0:te.user)&&(D=te.user)}return D?D._redirectEventId?(Te(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===D._redirectEventId?f.directlySetCurrentUser(D):f.reloadAndSetCurrentUserOrClear(D)):f.reloadAndSetCurrentUserOrClear(D):f.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var f=this;return(0,v.Z)(function*(){let E=null;try{E=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch(D){yield f._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,v.Z)(function*(){try{yield Ms(h)}catch(E){if("auth/network-request-failed"!==E.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var h=this;return(0,v.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,v.Z)(function*(){const E=h?(0,k.m9)(h):null;return E&&Te(E.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(E&&E._clone(f))})()}_updateCurrentUser(h){var f=this;return(0,v.Z)(function*(){if(!f._deleted)return h&&Te(f.tenantId===h.tenantId,f,"tenant-id-mismatch"),f.queue((0,v.Z)(function*(){yield f.directlySetCurrentUser(h),f.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,v.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var f=this;return this.queue((0,v.Z)(function*(){yield f.assertedPersistence.setPersistence(Nt(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,f,E){return this.registerStateListener(this.authStateSubscription,h,f,E)}onIdTokenChanged(h,f,E){return this.registerStateListener(this.idTokenSubscription,h,f,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var E=this;return(0,v.Z)(function*(){const D=yield E.getOrInitRedirectPersistenceManager(f);return null===h?D.removeCurrentUser():D.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,v.Z)(function*(){if(!f.redirectPersistenceManager){const E=h&&Nt(h)||f._popupRedirectResolver;Te(E,f,"argument-error"),f.redirectPersistenceManager=yield Kt.create(f,[Nt(E._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,v.Z)(function*(){var E,D;return f._isInitialized&&(yield f.queue((0,v.Z)(function*(){}))),(null===(E=f._currentUser)||void 0===E?void 0:E._redirectEventId)===h?f._currentUser:(null===(D=f.redirectUser)||void 0===D?void 0:D._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,v.Z)(function*(){if(h===f.currentUser)return f.queue((0,v.Z)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,E,D){if(this._deleted)return()=>{};const R="function"==typeof f?f:f.next.bind(f),B=this._isInitialized?Promise.resolve():this._initializationPromise;return Te(B,this,"internal-error"),B.then(()=>R(this.currentUser)),"function"==typeof f?h.addObserver(f,E,D):h.addObserver(f)}directlySetCurrentUser(h){var f=this;return(0,v.Z)(function*(){f.currentUser&&f.currentUser!==h&&(f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh()),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Hu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Sn(m){return(0,k.m9)(m)}class ts{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(f=>this.observer=f)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Kn(m){const h=m.indexOf(":");return h<0?"":m.substr(0,h+1)}function ji(m){if(!m)return null;const h=Number(m);return isNaN(h)?null:h}class Ls{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return sr("not implemented")}_getIdTokenResponse(h){return sr("not implemented")}_linkToIdToken(h,f){return sr("not implemented")}_getReauthenticationResolver(h){return sr("not implemented")}}function Fa(m,h){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:resetPassword",zt(m,h))})).apply(this,arguments)}function ai(m,h){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function rm(m,h){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:update",zt(m,h))})).apply(this,arguments)}function Od(){return(Od=(0,v.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithPassword",zt(m,h))})).apply(this,arguments)}function _l(m,h){return kd.apply(this,arguments)}function kd(){return(kd=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:sendOobCode",zt(m,h))})).apply(this,arguments)}function im(m,h){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,v.Z)(function*(m,h){return _l(m,h)})).apply(this,arguments)}function sm(m,h){return Uf.apply(this,arguments)}function Uf(){return(Uf=(0,v.Z)(function*(m,h){return _l(m,h)})).apply(this,arguments)}function Fd(m,h){return vl.apply(this,arguments)}function vl(){return(vl=(0,v.Z)(function*(m,h){return _l(m,h)})).apply(this,arguments)}function Vd(m,h){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,v.Z)(function*(m,h){return _l(m,h)})).apply(this,arguments)}function Va(){return(Va=(0,v.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithEmailLink",zt(m,h))})).apply(this,arguments)}function Ua(){return(Ua=(0,v.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithEmailLink",zt(m,h))})).apply(this,arguments)}class Yo extends Ls{constructor(h,f,E,D=null){super("password",E),this._email=h,this._password=f,this._tenantId=D}static _fromEmailAndPassword(h,f){return new Yo(h,f,"password")}static _fromEmailAndCode(h,f,E=null){return new Yo(h,f,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,v.Z)(function*(){switch(f.signInMethod){case"password":return function(m,h){return Od.apply(this,arguments)}(h,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function(m,h){return Va.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:Vt(h,"internal-error")}})()}_linkToIdToken(h,f){var E=this;return(0,v.Z)(function*(){switch(E.signInMethod){case"password":return ai(h,{idToken:f,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(m,h){return Ua.apply(this,arguments)}(h,{idToken:f,email:E._email,oobCode:E._password});default:Vt(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function ns(m,h){return El.apply(this,arguments)}function El(){return(El=(0,v.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithIdp",zt(m,h))})).apply(this,arguments)}class mn extends Ls{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new mn(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):Vt("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:D}=f,R=ue(f,["providerId","signInMethod"]);if(!E||!D)return null;const B=new mn(E,D);return B.idToken=R.idToken||void 0,B.accessToken=R.accessToken||void 0,B.secret=R.secret,B.nonce=R.nonce,B.pendingToken=R.pendingToken||null,B}_getIdTokenResponse(h){return ns(h,this.buildRequest())}_linkToIdToken(h,f){const E=this.buildRequest();return E.idToken=f,ns(h,E)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,ns(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,k.xO)(f)}return h}}function Bi(m,h){return zu.apply(this,arguments)}function zu(){return(zu=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:sendVerificationCode",zt(m,h))})).apply(this,arguments)}function Bd(){return(Bd=(0,v.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithPhoneNumber",zt(m,h))})).apply(this,arguments)}function wl(){return(wl=(0,v.Z)(function*(m,h){const f=yield H(m,"POST","/v1/accounts:signInWithPhoneNumber",zt(m,h));if(f.temporaryProof)throw Ue(m,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Ba={USER_NOT_FOUND:"user-not-found"};function Qo(){return(Qo=(0,v.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithPhoneNumber",zt(m,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Ba)})).apply(this,arguments)}class yo extends Ls{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new yo({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new yo({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function(m,h){return Bd.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function(m,h){return wl.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function(m,h){return Qo.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:E,verificationCode:D}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:E,code:D}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:E,phoneNumber:D,temporaryProof:R}=h;return E||f||D||R?new yo({verificationId:f,verificationCode:E,phoneNumber:D,temporaryProof:R}):null}}class Fs{constructor(h){var f,E,D,R,B,te;const Ne=(0,k.zd)((0,k.pd)(h)),Ee=null!==(f=Ne.apiKey)&&void 0!==f?f:null,$e=null!==(E=Ne.oobCode)&&void 0!==E?E:null,He=function(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=Ne.mode)&&void 0!==D?D:null);Te(Ee&&$e&&He,"argument-error"),this.apiKey=Ee,this.operation=He,this.code=$e,this.continueUrl=null!==(R=Ne.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(B=Ne.languageCode)&&void 0!==B?B:null,this.tenantId=null!==(te=Ne.tenantId)&&void 0!==te?te:null}static parseLink(h){const f=function(m){const h=(0,k.zd)((0,k.pd)(m)).link,f=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,E=(0,k.zd)((0,k.pd)(m)).deep_link_id;return(E?(0,k.zd)((0,k.pd)(E)).link:null)||E||f||h||m}(h);try{return new Fs(f)}catch(E){return null}}}let rs=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(f,E){return Yo._fromEmailAndPassword(f,E)}static credentialWithLink(f,E){const D=Fs.parseLink(E);return Te(D,"argument-error"),Yo._fromEmailAndCode(f,D.code,D.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class zr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class $i extends zr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Yt extends $i{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return Te("providerId"in f&&"signInMethod"in f,"argument-error"),mn._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return Te(h.idToken||h.accessToken,"argument-error"),mn._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Yt.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Yt.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:E,oauthTokenSecret:D,pendingToken:R,nonce:B,providerId:te}=h;if(!E&&!D&&!f&&!R||!te)return null;try{return new Yt(te)._credential({idToken:f,accessToken:E,nonce:B,pendingToken:R})}catch(Ne){return null}}}let Wu=(()=>{class m extends $i{constructor(){super("facebook.com")}static credential(f){return mn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch(E){return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Ga=(()=>{class m extends $i{constructor(){super("google.com"),this.addScope("profile")}static credential(f,E){return mn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:E})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:E,oauthAccessToken:D}=f;if(!E&&!D)return null;try{return m.credential(E,D)}catch(R){return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),$d=(()=>{class m extends $i{constructor(){super("github.com")}static credential(f){return mn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch(E){return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class Jo extends Ls{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return ns(h,this.buildRequest())}_linkToIdToken(h,f){const E=this.buildRequest();return E.idToken=f,ns(h,E)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,ns(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:D,pendingToken:R}=f;return E&&D&&R&&E===D?new Jo(E,R):null}static _create(h,f){return new Jo(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class _o extends zr{constructor(h){Te(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return _o.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return _o.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=Jo.fromJSON(h);return Te(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:E}=h;if(!f||!E)return null;try{return Jo._create(E,f)}catch(D){return null}}}let kr=(()=>{class m extends $i{constructor(){super("twitter.com")}static credential(f,E){return mn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:E})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:E,oauthTokenSecret:D}=f;if(!E||!D)return null;try{return m.credential(E,D)}catch(R){return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function Gd(m,h){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,v.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signUp",zt(m,h))})).apply(this,arguments)}class $n{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,E,D=!1){return(0,v.Z)(function*(){const R=yield pn._fromIdTokenResponse(h,E,D),B=ar(E);return new $n({user:R,providerId:B,_tokenResponse:E,operationType:f})})()}static _forOperation(h,f,E){return(0,v.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const D=ar(E);return new $n({user:h,providerId:D,_tokenResponse:E,operationType:f})})()}}function ar(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function Xo(){return(Xo=(0,v.Z)(function*(m){var h;const f=Sn(m);if(yield f._initializationPromise,null===(h=f.currentUser)||void 0===h?void 0:h.isAnonymous)return new $n({user:f.currentUser,providerId:null,operationType:"signIn"});const E=yield Gd(f,{returnSecureToken:!0}),D=yield $n._fromIdTokenResponse(f,"signIn",E,!0);return yield f._updateCurrentUser(D.user),D})).apply(this,arguments)}class za extends k.ZR{constructor(h,f,E,D){var R;super(f.code,f.message),this.operationType=E,this.user=D,Object.setPrototypeOf(this,za.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:f.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,f,E,D){return new za(h,f,E,D)}}function is(m,h,f,E){return("reauthenticate"===h?f._getReauthenticationResolver(m):f._getIdTokenResponse(m)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?za._fromErrorAndOperation(m,R,h,E):R})}function Wa(m){return new Set(m.map(({providerId:h})=>h).filter(h=>!!h))}function tt(){return(tt=(0,v.Z)(function*(m,h){const f=(0,k.m9)(m);yield Vs(!0,f,h);const{providerUserInfo:E}=yield jn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),D=Wa(E||[]);return f.providerData=f.providerData.filter(R=>D.has(R.providerId)),D.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function zd(m,h){return ss.apply(this,arguments)}function ss(){return(ss=(0,v.Z)(function*(m,h,f=!1){const E=yield si(m,h._linkToIdToken(m.auth,yield m.getIdToken()),f);return $n._forOperation(m,"link",E)})).apply(this,arguments)}function Vs(m,h,f){return vo.apply(this,arguments)}function vo(){return(vo=(0,v.Z)(function*(m,h,f){yield Ms(h);const D=!1===m?"provider-already-linked":"no-such-provider";Te(Wa(h.providerData).has(f)===m,h.auth,D)})).apply(this,arguments)}function Zu(m,h){return os.apply(this,arguments)}function os(){return(os=(0,v.Z)(function*(m,h,f=!1){const{auth:E}=m,D="reauthenticate";try{const R=yield si(m,is(E,D,h,m),f);Te(R.idToken,E,"internal-error");const B=ho(R.idToken);Te(B,E,"internal-error");const{sub:te}=B;return Te(m.uid===te,E,"user-mismatch"),$n._forOperation(m,D,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&Vt(E,"user-mismatch"),R}})).apply(this,arguments)}function bl(m,h){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,v.Z)(function*(m,h,f=!1){const E="signIn",D=yield is(m,E,h),R=yield $n._fromIdTokenResponse(m,E,D);return f||(yield m._updateCurrentUser(R.user)),R})).apply(this,arguments)}function vt(m,h){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,v.Z)(function*(m,h){return bl(Sn(m),h)})).apply(this,arguments)}function yn(m,h){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,v.Z)(function*(m,h){const f=(0,k.m9)(m);return yield Vs(!1,f,h.providerId),zd(f,h)})).apply(this,arguments)}function Eo(m,h){return ui.apply(this,arguments)}function ui(){return(ui=(0,v.Z)(function*(m,h){return Zu((0,k.m9)(m),h)})).apply(this,arguments)}function qa(m,h){return Us.apply(this,arguments)}function Us(){return(Us=(0,v.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithCustomToken",zt(m,h))})).apply(this,arguments)}function Ju(){return(Ju=(0,v.Z)(function*(m,h){const f=Sn(m),E=yield qa(f,{token:h,returnSecureToken:!0}),D=yield $n._fromIdTokenResponse(f,"signIn",E);return yield f._updateCurrentUser(D.user),D})).apply(this,arguments)}class as{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?Gi._fromServerResponse(h,f):Vt(h,"internal-error")}}class Gi extends as{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new Gi(f)}}function Yn(m,h,f){var E;Te((null===(E=f.url)||void 0===E?void 0:E.length)>0,m,"invalid-continue-uri"),Te(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(Te(f.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(Te(f.android.packageName.length>0,m,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function ea(){return(ea=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m),D={requestType:"PASSWORD_RESET",email:h};f&&Yn(E,D,f),yield sm(E,D)})).apply(this,arguments)}function bi(){return(bi=(0,v.Z)(function*(m,h,f){yield Fa((0,k.m9)(m),{oobCode:h,newPassword:f})})).apply(this,arguments)}function Xu(){return(Xu=(0,v.Z)(function*(m,h){yield rm((0,k.m9)(m),{oobCode:h})})).apply(this,arguments)}function ec(m,h){return ta.apply(this,arguments)}function ta(){return(ta=(0,v.Z)(function*(m,h){const f=(0,k.m9)(m),E=yield Fa(f,{oobCode:h}),D=E.requestType;switch(Te(D,f,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Te(E.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Te(E.mfaInfo,f,"internal-error");default:Te(E.email,f,"internal-error")}let R=null;return E.mfaInfo&&(R=as._fromServerResponse(Sn(f),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:R},operation:D}})).apply(this,arguments)}function na(){return(na=(0,v.Z)(function*(m,h){const{data:f}=yield ec((0,k.m9)(m),h);return f.email})).apply(this,arguments)}function nc(){return(nc=(0,v.Z)(function*(m,h,f){const E=Sn(m),D=yield Gd(E,{returnSecureToken:!0,email:h,password:f}),R=yield $n._fromIdTokenResponse(E,"signIn",D);return yield E._updateCurrentUser(R.user),R})).apply(this,arguments)}function us(){return(us=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m),D={requestType:"EMAIL_SIGNIN",email:h};Te(f.handleCodeInApp,E,"argument-error"),f&&Yn(E,D,f),yield Fd(E,D)})).apply(this,arguments)}function Ka(){return(Ka=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m),D=rs.credentialWithLink(h,f||et());return Te(D._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),vt(E,D)})).apply(this,arguments)}function am(m,h){return ic.apply(this,arguments)}function ic(){return(ic=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:createAuthUri",zt(m,h))})).apply(this,arguments)}function Hf(){return(Hf=(0,v.Z)(function*(m,h){const E={identifier:h,continueUri:Se()?et():"http://localhost"},{signinMethods:D}=yield am((0,k.m9)(m),E);return D||[]})).apply(this,arguments)}function Wr(){return(Wr=(0,v.Z)(function*(m,h){const f=(0,k.m9)(m),D={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};h&&Yn(f.auth,D,h);const{email:R}=yield im(f.auth,D);R!==m.email&&(yield m.reload())})).apply(this,arguments)}function Za(){return(Za=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:h};f&&Yn(E.auth,R,f);const{email:B}=yield Vd(E.auth,R);B!==m.email&&(yield m.reload())})).apply(this,arguments)}function Gf(m,h){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,v.Z)(function*(m,h){return yt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Fn(){return(Fn=(0,v.Z)(function*(m,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const E=(0,k.m9)(m),R={idToken:yield E.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},B=yield si(E,Gf(E.auth,R));E.displayName=B.displayName||null,E.photoURL=B.photoUrl||null;const te=E.providerData.find(({providerId:Ne})=>"password"===Ne);te&&(te.displayName=E.displayName,te.photoURL=E.photoURL),yield E._updateTokensIfNecessary(B)})).apply(this,arguments)}function Qa(m,h,f){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,v.Z)(function*(m,h,f){const{auth:E}=m,R={idToken:yield m.getIdToken(),returnSecureToken:!0};h&&(R.email=h),f&&(R.password=f);const B=yield si(m,ai(E,R));yield m._updateTokensIfNecessary(B,!0)})).apply(this,arguments)}class wo{constructor(h,f,E={}){this.isNewUser=h,this.providerId=f,this.profile=E}}class ac extends wo{constructor(h,f,E,D){super(h,f,E),this.username=D}}class Bs extends wo{constructor(h,f){super(h,"facebook.com",f)}}class Xa extends ac{constructor(h,f){super(h,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class um extends wo{constructor(h,f){super(h,"google.com",f)}}class zf extends ac{constructor(h,f,E){super(h,"twitter.com",f,E)}}function ur(m){const{user:h,_tokenResponse:f}=m;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function(m){var h,f;if(!m)return null;const{providerId:E}=m,D=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},R=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!E&&(null==m?void 0:m.idToken)){const B=null===(f=null===(h=ho(m.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(B)return new wo(R,"anonymous"!==B&&"custom"!==B?B:null)}if(!E)return null;switch(E){case"facebook.com":return new Bs(R,D);case"github.com":return new Xa(R,D);case"google.com":return new um(R,D);case"twitter.com":return new zf(R,D,m.screenName||null);case"custom":case"anonymous":return new wo(R,null);default:return new wo(R,E,D)}}(f)}class Ii{constructor(h,f){this.type=h,this.credential=f}static _fromIdtoken(h){return new Ii("enroll",h)}static _fromMfaPendingCredential(h){return new Ii("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,E;if(null==h?void 0:h.multiFactorSession){if(null===(f=h.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return Ii._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return Ii._fromIdtoken(h.multiFactorSession.idToken)}return null}}class lc{constructor(h,f,E){this.session=h,this.hints=f,this.signInResolver=E}static _fromError(h,f){const E=Sn(h),D=f.customData._serverResponse,R=(D.mfaInfo||[]).map(te=>as._fromServerResponse(E,te));Te(D.mfaPendingCredential,E,"internal-error");const B=Ii._fromMfaPendingCredential(D.mfaPendingCredential);return new lc(B,R,function(){var te=(0,v.Z)(function*(Ne){const Ee=yield Ne._process(E,B);delete D.mfaInfo,delete D.mfaPendingCredential;const $e=Object.assign(Object.assign({},D),{idToken:Ee.idToken,refreshToken:Ee.refreshToken});switch(f.operationType){case"signIn":const He=yield $n._fromIdTokenResponse(E,f.operationType,$e);return yield E._updateCurrentUser(He.user),He;case"reauthenticate":return Te(f.user,E,"internal-error"),$n._forOperation(f.user,f.operationType,$e);default:Vt(E,"internal-error")}});return function(Ne){return te.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,v.Z)(function*(){return f.signInResolver(h)})()}}function tu(m,h){return yt(m,"POST","/v2/accounts/mfaEnrollment:start",zt(m,h))}class hc{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(E=>as._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new hc(h)}getSession(){var h=this;return(0,v.Z)(function*(){return Ii._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,f){var E=this;return(0,v.Z)(function*(){const D=h,R=yield E.getSession(),B=yield si(E.user,D._process(E.user.auth,R,f));return yield E.user._updateTokensIfNecessary(B),E.user.reload()})()}unenroll(h){var f=this;return(0,v.Z)(function*(){const E="string"==typeof h?h:h.uid,D=yield f.user.getIdToken(),R=yield si(f.user,function(m,h){return yt(m,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(m,h))}(f.user.auth,{idToken:D,mfaEnrollmentId:E}));f.enrolledFactors=f.enrolledFactors.filter(({uid:B})=>B!==E),yield f.user._updateTokensIfNecessary(R);try{yield f.user.reload()}catch(B){if("auth/user-token-expired"!==B.code)throw B}})()}}const Io=new WeakMap,ra="__sak";class Ze{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(ra,"1"),this.storage.removeItem(ra),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const lr=(()=>{class m extends Ze{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,E)=>this.onStorageEvent(f,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const m=(0,k.z$)();return ct(m)||Ui(m)}()&&function(){try{return!(!window||window===window.top)}catch(m){return!1}}(),this.fallbackToPolling=Wo(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const E of Object.keys(this.listeners)){const D=this.storage.getItem(E),R=this.localCache[E];D!==R&&f(E,R,D)}}onStorageEvent(f,E=!1){if(!f.key)return void this.forAllChangedKeys((te,Ne,Ee)=>{this.notifyListeners(te,Ee)});const D=f.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const te=this.storage.getItem(D);if(f.newValue!==te)null!==f.newValue?this.storage.setItem(D,f.newValue):this.storage.removeItem(D);else if(this.localCache[D]===f.newValue&&!E)return}const R=()=>{const te=this.storage.getItem(D);!E&&this.localCache[D]===te||this.notifyListeners(D,te)},B=this.storage.getItem(D);(0,k.w1)()&&10===document.documentMode&&B!==f.newValue&&f.newValue!==f.oldValue?setTimeout(R,10):R()}notifyListeners(f,E){this.localCache[f]=E;const D=this.listeners[f];if(D)for(const R of Array.from(D))R(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,E,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:E,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,E){var D=()=>super._set,R=this;return(0,v.Z)(function*(){yield D().call(R,f,E),R.localCache[f]=JSON.stringify(E)})()}_get(f){var E=()=>super._get,D=this;return(0,v.Z)(function*(){const R=yield E().call(D,f);return D.localCache[f]=JSON.stringify(R),R})()}_remove(f){var E=()=>super._remove,D=this;return(0,v.Z)(function*(){yield E().call(D,f),delete D.localCache[f]})()}}return m.type="LOCAL",m})(),Er=(()=>{class m extends Ze{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,E){}_removeListener(f,E){}}return m.type="SESSION",m})();let Xd=(()=>{class m{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const E=this.receivers.find(R=>R.isListeningto(f));if(E)return E;const D=new m(f);return this.receivers.push(D),D}isListeningto(f){return this.eventTarget===f}handleEvent(f){var E=this;return(0,v.Z)(function*(){const D=f,{eventId:R,eventType:B,data:te}=D.data,Ne=E.handlersMap[B];if(!(null==Ne?void 0:Ne.size))return;D.ports[0].postMessage({status:"ack",eventId:R,eventType:B});const Ee=Array.from(Ne).map(function(){var He=(0,v.Z)(function*(It){return It(D.origin,te)});return function(It){return He.apply(this,arguments)}}()),$e=yield function(m){return Promise.all(m.map(function(){var h=(0,v.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(E){return{fulfilled:!1,reason:E}}});return function(f){return h.apply(this,arguments)}}()))}(Ee);D.ports[0].postMessage({status:"done",eventId:R,eventType:B,response:$e})})()}_subscribe(f,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(E)}_unsubscribe(f,E){this.handlersMap[f]&&E&&this.handlersMap[f].delete(E),(!E||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function Co(m="",h=10){let f="";for(let E=0;E<h;E++)f+=Math.floor(10*Math.random());return m+f}class zi{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,E=50){var D=this;return(0,v.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let B,te;return new Promise((Ne,Ee)=>{const $e=Co("",20);R.port1.start();const He=setTimeout(()=>{Ee(new Error("unsupported_event"))},E);te={messageChannel:R,onMessage(It){const Vn=It;if(Vn.data.eventId===$e)switch(Vn.data.status){case"ack":clearTimeout(He),B=setTimeout(()=>{Ee(new Error("timeout"))},3e3);break;case"done":clearTimeout(B),Ne(Vn.data.response);break;default:clearTimeout(He),clearTimeout(B),Ee(new Error("invalid_response"))}}},D.handlers.add(te),R.port1.addEventListener("message",te.onMessage),D.target.postMessage({eventType:h,eventId:$e,data:f},[R.port2])}).finally(()=>{te&&D.removeMessageHandler(te)})})()}}function An(){return window}function Dl(){return void 0!==An().WorkerGlobalScope&&"function"==typeof An().importScripts}function $s(){return($s=(0,v.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(m){return null}})).apply(this,arguments)}const gc="firebaseLocalStorageDb",Do="firebaseLocalStorage",mc="fbase_key";class Hs{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Wi(m,h){return m.transaction([Do],h?"readwrite":"readonly").objectStore(Do)}function Ci(){const m=indexedDB.open(gc,1);return new Promise((h,f)=>{m.addEventListener("error",()=>{f(m.error)}),m.addEventListener("upgradeneeded",()=>{const E=m.result;try{E.createObjectStore(Do,{keyPath:mc})}catch(D){f(D)}}),m.addEventListener("success",(0,v.Z)(function*(){const E=m.result;E.objectStoreNames.contains(Do)?h(E):(E.close(),yield function(){const m=indexedDB.deleteDatabase(gc);return new Hs(m).toPromise()}(),h(yield Ci()))}))})}function nn(m,h,f){return oa.apply(this,arguments)}function oa(){return(oa=(0,v.Z)(function*(m,h,f){const E=Wi(m,!0).put({[mc]:h,value:f});return new Hs(E).toPromise()})).apply(this,arguments)}function ru(){return(ru=(0,v.Z)(function*(m,h){const f=Wi(m,!1).get(h),E=yield new Hs(f).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Tl(m,h){const f=Wi(m,!0).delete(h);return new Hs(f).toPromise()}const Qt=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,v.Z)(function*(){return f.db||(f.db=yield Ci()),f.db})()}_withRetries(f){var E=this;return(0,v.Z)(function*(){let D=0;for(;;)try{const R=yield E._openDb();return yield f(R)}catch(R){if(D++>3)throw R;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,v.Z)(function*(){return Dl()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,v.Z)(function*(){f.receiver=Xd._getInstance(Dl()?self:null),f.receiver._subscribe("keyChanged",function(){var E=(0,v.Z)(function*(D,R){return{keyProcessed:(yield f._poll()).includes(R.key)}});return function(D,R){return E.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var E=(0,v.Z)(function*(D,R){return["keyChanged"]});return function(D,R){return E.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,v.Z)(function*(){var E,D;if(f.activeServiceWorker=yield function(){return $s.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new zi(f.activeServiceWorker);const R=yield f.sender._send("ping",{},800);!R||(null===(E=R[0])||void 0===E?void 0:E.fulfilled)&&(null===(D=R[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var E=this;return(0,v.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var m;return(null===(m=null==navigator?void 0:navigator.serviceWorker)||void 0===m?void 0:m.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:f},E.serviceWorkerReceiverAvailable?800:50)}catch(D){}})()}_isAvailable(){return(0,v.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Ci();return yield nn(f,ra,"1"),yield Tl(f,ra),!0}catch(f){}return!1})()}_withPendingWrite(f){var E=this;return(0,v.Z)(function*(){E.pendingWrites++;try{yield f()}finally{E.pendingWrites--}})()}_set(f,E){var D=this;return(0,v.Z)(function*(){return D._withPendingWrite((0,v.Z)(function*(){return yield D._withRetries(R=>nn(R,f,E)),D.localCache[f]=E,D.notifyServiceWorker(f)}))})()}_get(f){var E=this;return(0,v.Z)(function*(){const D=yield E._withRetries(R=>function(m,h){return ru.apply(this,arguments)}(R,f));return E.localCache[f]=D,D})()}_remove(f){var E=this;return(0,v.Z)(function*(){return E._withPendingWrite((0,v.Z)(function*(){return yield E._withRetries(D=>Tl(D,f)),delete E.localCache[f],E.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,v.Z)(function*(){const E=yield f._withRetries(B=>{const te=Wi(B,!1).getAll();return new Hs(te).toPromise()});if(!E)return[];if(0!==f.pendingWrites)return[];const D=[],R=new Set;for(const{fbase_key:B,value:te}of E)R.add(B),JSON.stringify(f.localCache[B])!==JSON.stringify(te)&&(f.notifyListeners(B,te),D.push(B));for(const B of Object.keys(f.localCache))f.localCache[B]&&!R.has(B)&&(f.notifyListeners(B,null),D.push(B));return D})()}notifyListeners(f,E){this.localCache[f]=E;const D=this.listeners[f];if(D)for(const R of Array.from(D))R(E)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,v.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function Zf(m,h){return yt(m,"POST","/v2/accounts/mfaSignIn:start",zt(m,h))}function Qf(){return(Qf=(0,v.Z)(function*(m){return(yield yt(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function th(m){return new Promise((h,f)=>{const E=document.createElement("script");E.setAttribute("src",m),E.onload=h,E.onerror=D=>{const R=wt("internal-error");R.customData=D,f(R)},E.type="text/javascript",E.charset="UTF-8",function(){var m,h;return null!==(h=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==h?h:document}().appendChild(E)})}function Jf(m){return`__${m}${Math.floor(1e6*Math.random())}`}const iu=1e12;class Sl{constructor(h){this.auth=h,this.counter=iu,this._widgets=new Map}render(h,f){const E=this.counter;return this._widgets.set(E,new aa(h,this.auth.name,f||{})),this.counter++,E}reset(h){var f;const E=h||iu;null===(f=this._widgets.get(E))||void 0===f||f.delete(),this._widgets.delete(E)}getResponse(h){var f;return(null===(f=this._widgets.get(h||iu))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,v.Z)(function*(){var E;return null===(E=f._widgets.get(h||iu))||void 0===E||E.execute(),""})()}}class aa{constructor(h,f,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof h?document.getElementById(h):h;Te(D,"argument-error",{appName:f}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(m){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)h.push(f.charAt(Math.floor(Math.random()*f.length)));return h.join("")}();const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const vn=Jf("rcb"),_c=new kt(3e4,6e4);class su{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!An().grecaptcha}load(h,f=""){return Te((m=f).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m),h,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(An().grecaptcha):new Promise((E,D)=>{const R=An().setTimeout(()=>{D(wt(h,"network-request-failed"))},_c.get());An()[vn]=()=>{An().clearTimeout(R),delete An()[vn];const te=An().grecaptcha;if(!te)return void D(wt(h,"internal-error"));const Ne=te.render;te.render=(Ee,$e)=>{const He=Ne(Ee,$e);return this.counter++,He},this.hostLanguage=f,E(te)},th(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:vn,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(R),D(wt(h,"internal-error"))})});var m}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!An().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Di{load(h){return(0,v.Z)(function*(){return new Sl(h)})()}clearedOneInstance(){}}const Ti="recaptcha",Si={theme:"light",type:"image"};class ca{constructor(h,f=Object.assign({},Si),E){this.parameters=f,this.type=Ti,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Sn(E),this.isInvisible="invisible"===this.parameters.size,Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof h?document.getElementById(h):h;Te(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Di:new su,this.validateStartingState()}verify(){var h=this;return(0,v.Z)(function*(){h.assertNotDestroyed();const f=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(f)||new Promise(R=>{const B=te=>{!te||(h.tokenChangeListeners.delete(B),R(te))};h.tokenChangeListeners.add(B),h.isInvisible&&E.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){Te(!this.parameters.sitekey,this.auth,"argument-error"),Te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(E=>E(f)),"function"==typeof h)h(f);else if("string"==typeof h){const E=An()[h];"function"==typeof E&&E(f)}}}assertNotDestroyed(){Te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,v.Z)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const E=document.createElement("div");f.appendChild(E),f=E}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,v.Z)(function*(){Te(Se()&&!Dl(),h.auth,"internal-error"),yield function(){let m=null;return new Promise(h=>{"complete"!==document.readyState?(m=()=>h(),window.addEventListener("load",m)):h()}).catch(h=>{throw m&&window.removeEventListener("load",m),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function(m){return Qf.apply(this,arguments)}(h.auth);Te(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return Te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ls{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=yo._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function vc(){return(vc=(0,v.Z)(function*(m,h,f){const E=Sn(m),D=yield T(E,h,(0,k.m9)(f));return new ls(D,R=>vt(E,R))})).apply(this,arguments)}function rh(){return(rh=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m);yield Vs(!1,E,"phone");const D=yield T(E.auth,h,(0,k.m9)(f));return new ls(D,R=>yn(E,R))})).apply(this,arguments)}function I(){return(I=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m),D=yield T(E.auth,h,(0,k.m9)(f));return new ls(D,R=>Eo(E,R))})).apply(this,arguments)}function T(m,h,f){return x.apply(this,arguments)}function x(){return(x=(0,v.Z)(function*(m,h,f){var E;const D=yield f.verify();try{let R;if(Te("string"==typeof D,m,"argument-error"),Te(f.type===Ti,m,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const B=R.session;if("phoneNumber"in R)return Te("enroll"===B.type,m,"internal-error"),(yield tu(m,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{Te("signin"===B.type,m,"internal-error");const te=(null===(E=R.multiFactorHint)||void 0===E?void 0:E.uid)||R.multiFactorUid;return Te(te,m,"missing-multi-factor-info"),(yield Zf(m,{mfaPendingCredential:B.credential,mfaEnrollmentId:te,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield Bi(m,{phoneNumber:R.phoneNumber,recaptchaToken:D});return B}}finally{f._reset()}})).apply(this,arguments)}function Z(){return(Z=(0,v.Z)(function*(m,h){yield zd((0,k.m9)(m),h)})).apply(this,arguments)}let le=(()=>{class m{constructor(f){this.providerId=m.PROVIDER_ID,this.auth=Sn(f)}verifyPhoneNumber(f,E){return T(this.auth,f,(0,k.m9)(E))}static credential(f,E){return yo._fromVerification(f,E)}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:E,temporaryProof:D}=f;return E&&D?yo._fromTokenResponse(E,D):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function Ce(m,h){return h?Nt(h):(Te(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class Fe extends Ls{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return ns(h,this._buildIdpRequest())}_linkToIdToken(h,f){return ns(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return ns(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function Be(m){return bl(m.auth,new Fe(m),m.bypassAuthState)}function Lt(m){const{auth:h,user:f}=m;return Te(f,h,"internal-error"),Zu(f,new Fe(m),m.bypassAuthState)}function Ct(m){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,v.Z)(function*(m){const{auth:h,user:f}=m;return Te(f,h,"internal-error"),zd(f,new Fe(m),m.bypassAuthState)})).apply(this,arguments)}class Jn{constructor(h,f,E,D,R=!1){this.auth=h,this.resolver=E,this.user=D,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,v.Z)(function*(E,D){h.pendingPromise={resolve:E,reject:D};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(E,D){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,v.Z)(function*(){const{urlResponse:E,sessionId:D,postBody:R,tenantId:B,error:te,type:Ne}=h;if(te)return void f.reject(te);const Ee={auth:f.auth,requestUri:E,sessionId:D,tenantId:B||void 0,postBody:R||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Ne)(Ee))}catch($e){f.reject($e)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Be;case"linkViaPopup":case"linkViaRedirect":return Ct;case"reauthViaPopup":case"reauthViaRedirect":return Lt;default:Vt(this.auth,"internal-error")}}resolve(h){kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xn=new kt(2e3,1e4);function To(){return(To=(0,v.Z)(function*(m,h,f){const E=Sn(m);Mr(m,h,zr);const D=Ce(E,f);return new Ws(E,"signInViaPopup",h,D).executeNotNull()})).apply(this,arguments)}function hs(){return(hs=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m);Mr(E.auth,h,zr);const D=Ce(E.auth,f);return new Ws(E.auth,"reauthViaPopup",h,D,E).executeNotNull()})).apply(this,arguments)}function wc(){return(wc=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m);Mr(E.auth,h,zr);const D=Ce(E.auth,f);return new Ws(E.auth,"linkViaPopup",h,D,E).executeNotNull()})).apply(this,arguments)}let Ws=(()=>{class m extends Jn{constructor(f,E,D,R,B){super(f,E,R,B),this.provider=D,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var f=this;return(0,v.Z)(function*(){const E=yield f.execute();return Te(E,f.auth,"internal-error"),E})()}onExecution(){var f=this;return(0,v.Z)(function*(){kn(1===f.filter.length,"Popup operations only handle one event");const E=Co();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],E),f.authWindow.associatedEvent=E,f.resolver._originValidation(f.auth).catch(D=>{f.reject(D)}),f.resolver._isIframeWebStorageSupported(f.auth,D=>{D||f.reject(wt(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(wt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const f=()=>{var E,D;this.pollId=(null===(D=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===D?void 0:D.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(wt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,xn.get())};f()}}return m.currentPopupAction=null,m})();const bc=new Map;class Al extends Jn{constructor(h,f,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,v.Z)(function*(){let E=bc.get(f.auth._key());if(!E){try{const R=(yield function(m,h){return ih.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;E=()=>Promise.resolve(R)}catch(D){E=()=>Promise.reject(D)}bc.set(f.auth._key(),E)}return f.bypassAuthState||bc.set(f.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,E=this;return(0,v.Z)(function*(){if("signInViaRedirect"===h.type)return f().call(E,h);if("unknown"!==h.type){if(h.eventId){const D=yield E.auth._redirectUserForId(h.eventId);if(D)return E.user=D,f().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,v.Z)(function*(){})()}cleanUp(){}}function ih(){return(ih=(0,v.Z)(function*(m,h){const f=la(h),E=Kr(m);if(!(yield E._isAvailable()))return!1;const D="true"===(yield E._get(f));return yield E._remove(f),D})).apply(this,arguments)}function ln(m,h){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,v.Z)(function*(m,h){return Kr(m)._set(la(h),"true")})).apply(this,arguments)}function Kr(m){return Nt(m._redirectPersistence)}function la(m){return qn("pendingRedirect",m.config.apiKey,m.name)}function Nl(){return(Nl=(0,v.Z)(function*(m,h,f){const E=Sn(m);Mr(m,h,zr);const D=Ce(E,f);return yield ln(D,E),D._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function Ki(){return(Ki=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m);Mr(E.auth,h,zr);const D=Ce(E.auth,f);yield ln(D,E.auth);const R=yield ah(E);return D._openRedirect(E.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Ml(){return(Ml=(0,v.Z)(function*(m,h,f){const E=(0,k.m9)(m);Mr(E.auth,h,zr);const D=Ce(E.auth,f);yield Vs(!1,E,h.providerId),yield ln(D,E.auth);const R=yield ah(E);return D._openRedirect(E.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function da(){return(da=(0,v.Z)(function*(m,h){return yield Sn(m)._initializationPromise,Cc(m,h,!1)})).apply(this,arguments)}function Cc(m,h){return oh.apply(this,arguments)}function oh(){return(oh=(0,v.Z)(function*(m,h,f=!1){const E=Sn(m),D=Ce(E,h),B=yield new Al(E,D,f).execute();return B&&!f&&(delete B.user._redirectEventId,yield E._persistUserIfCurrent(B.user),yield E._setRedirectUser(null,h)),B})).apply(this,arguments)}function ah(m){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,v.Z)(function*(m){const h=Co(`${m.uid}:::`);return m._redirectEventId=h,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),h})).apply(this,arguments)}class Nn{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(f=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uh(m);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var E;if(h.error&&!uh(h)){const D=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";f.onError(wt(this.auth,D))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const E=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sp(h))}saveEventToCache(h){this.cachedEventUids.add(sp(h)),this.lastProcessedEventTime=Date.now()}}function sp(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(h=>h).join("-")}function uh({type:m,error:h}){return"unknown"===m&&"auth/no-auth-event"===(null==h?void 0:h.code)}function pm(m){return gm.apply(this,arguments)}function gm(){return(gm=(0,v.Z)(function*(m,h={}){return yt(m,"GET","/v1/projects",h)})).apply(this,arguments)}const Pl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,L_=/^https?/;function Tc(){return(Tc=(0,v.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:h}=yield pm(m);for(const f of h)try{if(op(f))return}catch(E){}Vt(m,"unauthorized-domain")})).apply(this,arguments)}function op(m){const h=et(),{protocol:f,hostname:E}=new URL(h);if(m.startsWith("chrome-extension://")){const B=new URL(m);return""===B.hostname&&""===E?"chrome-extension:"===f&&m.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&B.hostname===E}if(!L_.test(f))return!1;if(Pl.test(m))return E===m;const D=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(E)}const Sc=new kt(3e4,6e4);function V_(){const m=An().___jsl;if(null==m?void 0:m.H)for(const h of Object.keys(m.H))if(m.H[h].r=m.H[h].r||[],m.H[h].L=m.H[h].L||[],m.H[h].r=[...m.H[h].L],m.CP)for(let f=0;f<m.CP.length;f++)m.CP[f]=null}let pe=null;function Ks(m){return pe=pe||function(m){return new Promise((h,f)=>{var E,D,R;function B(){V_(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{V_(),f(wt(m,"network-request-failed"))},timeout:Sc.get()})}if(null===(D=null===(E=An().gapi)||void 0===E?void 0:E.iframes)||void 0===D?void 0:D.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=An().gapi)||void 0===R?void 0:R.load)){const te=Jf("iframefcb");return An()[te]=()=>{gapi.load?B():f(wt(m,"network-request-failed"))},th(`https://apis.google.com/js/api.js?onload=${te}`)}B()}}).catch(h=>{throw pe=null,h})}(m),pe}const Ac=new kt(5e3,15e3),mm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ge(m){const h=m.config;Te(h.authDomain,m,"auth-domain-config-required");const f=h.emulator?Ke(h,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:m.name,v:ce.SDK_VERSION},D=Zr.get(m.config.apiHost);D&&(E.eid=D);const R=m._getFrameworks();return R.length&&(E.fw=R.join(",")),`${f}?${(0,k.xO)(E).slice(1)}`}function st(){return(st=(0,v.Z)(function*(m){const h=yield Ks(m),f=An().gapi;return Te(f,m,"internal-error"),h.open({where:document.body,url:Ge(m),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mm,dontclear:!0},E=>new Promise(function(){var D=(0,v.Z)(function*(R,B){yield E.restyle({setHideOnLeave:!1});const te=wt(m,"network-request-failed"),Ne=An().setTimeout(()=>{B(te)},Ac.get());function Ee(){An().clearTimeout(Ne),R(E)}E.ping(Ee).then(Ee,()=>{B(te)})});return function(R,B){return D.apply(this,arguments)}}()))})).apply(this,arguments)}const lh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ym{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Hn(m,h,f,E,D,R){Te(m.config.authDomain,m,"auth-domain-config-required"),Te(m.config.apiKey,m,"invalid-api-key");const B={apiKey:m.config.apiKey,appName:m.name,authType:f,redirectUrl:E,v:ce.SDK_VERSION,eventId:D};if(h instanceof zr){h.setDefaultLanguage(m.languageCode),B.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||(B.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ne,Ee]of Object.entries(R||{}))B[Ne]=Ee}if(h instanceof $i){const Ne=h.getScopes().filter(Ee=>""!==Ee);Ne.length>0&&(B.scopes=Ne.join(","))}m.tenantId&&(B.tid=m.tenantId);const te=B;for(const Ne of Object.keys(te))void 0===te[Ne]&&delete te[Ne];return`${function({config:m}){return m.emulator?Ke(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}(m)}?${(0,k.xO)(te).slice(1)}`}const cp="webStorageSupport";class dp extends class{constructor(h){this.factorId=h}_process(h,f,E){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,E);case"signin":return this._finalizeSignIn(h,f.credential);default:return sr("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new dp(h)}_finalizeEnroll(h,f,E){return function(m,h){return yt(m,"POST","/v2/accounts/mfaEnrollment:finalize",zt(m,h))}(h,{idToken:f,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function(m,h){return yt(m,"POST","/v2/accounts/mfaSignIn:finalize",zt(m,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let xc=(()=>{class m{constructor(){}static assertion(f){return dp._fromCredential(f)}}return m.FACTOR_ID="phone",m})();var m,Ol="@firebase/auth";class Nc{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,v.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(E=>{var D;h((null===(D=E)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);!f||(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function au(){return window}function Mc(){return(Mc=(0,v.Z)(function*(m,h,f){var E;const{BuildInfo:D}=au();kn(h.sessionId,"AuthEvent did not contain a session ID");const R=yield Em(h.sessionId),B={};return Ui()?B.ibi=D.packageName:go()?B.apn=D.packageName:Vt(m,"operation-not-supported-in-this-environment"),D.displayName&&(B.appDisplayName=D.displayName),B.sessionId=R,Hn(m,f,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,B)})).apply(this,arguments)}function Pc(){return(Pc=(0,v.Z)(function*(m){const{BuildInfo:h}=au(),f={};Ui()?f.iosBundleId=h.packageName:go()?f.androidPackageName=h.packageName:Vt(m,"operation-not-supported-in-this-environment"),yield pm(m,f)})).apply(this,arguments)}function gh(){return(gh=(0,v.Z)(function*(m,h,f){const{cordova:E}=au();let D=()=>{};try{yield new Promise((R,B)=>{let te=null;function Ne(){var He;R();const It=null===(He=E.plugins.browsertab)||void 0===He?void 0:He.close;"function"==typeof It&&It(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function Ee(){te||(te=window.setTimeout(()=>{B(wt(m,"redirect-cancelled-by-user"))},2e3))}function $e(){"visible"===(null==document?void 0:document.visibilityState)&&Ee()}h.addPassiveListener(Ne),document.addEventListener("resume",Ee,!1),go()&&document.addEventListener("visibilitychange",$e,!1),D=()=>{h.removePassiveListener(Ne),document.removeEventListener("resume",Ee,!1),document.removeEventListener("visibilitychange",$e,!1),te&&window.clearTimeout(te)}})}finally{D()}})).apply(this,arguments)}function Em(m){return kl.apply(this,arguments)}function kl(){return(kl=(0,v.Z)(function*(m){const h=wm(m),f=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(f)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function wm(m){if(kn(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(m);const h=new ArrayBuffer(m.length),f=new Uint8Array(h);for(let E=0;E<m.length;E++)f[E]=m.charCodeAt(E);return f}m="Browser",(0,ce._registerComponent)(new qe.wA("auth",(h,{options:f})=>{const E=h.getProvider("app").getImmediate(),{apiKey:D,authDomain:R}=E.options;return(B=>{Te(D&&!D.includes(":"),"invalid-api-key",{appName:B.name}),Te(!(null==R?void 0:R.includes(":")),"argument-error",{appName:B.name});const te={apiKey:D,authDomain:R,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hu(m)},Ne=new Pd(B,te);return function(m,h){const f=(null==h?void 0:h.persistence)||[],E=(Array.isArray(f)?f:[f]).map(Nt);(null==h?void 0:h.errorMap)&&m._updateErrorMap(h.errorMap),m._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(Ne,f),Ne})(E)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,E)=>{h.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new qe.wA("auth-internal",h=>{const f=Sn(h.getProvider("auth").getImmediate());return new Nc(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(Ol,"0.19.3",void 0),(0,ce.registerVersion)(Ol,"0.19.3","esm2017");class Ll extends Nn{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(h)),super.onEvent(h)}initialized(){var h=this;return(0,v.Z)(function*(){yield h.initPromise})()}}function mh(m){return rn.apply(this,arguments)}function rn(){return(rn=(0,v.Z)(function*(m){const h=yield uu()._get(Ul(m));return h&&(yield uu()._remove(Ul(m))),h})).apply(this,arguments)}function W_(){const m=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const E=Math.floor(Math.random()*h.length);m.push(h.charAt(E))}return m.join("")}function uu(){return Nt(lr)}function Ul(m){return qn("authEvent",m.config.apiKey,m.name)}function Xn(m){if(!(null==m?void 0:m.includes("?")))return{};const[h,...f]=m.split("?");return(0,k.zd)(f.join("?"))}function Y_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:wt("no-auth-event")}}function cu(){var m;return(null===(m=null==self?void 0:self.location)||void 0===m?void 0:m.protocol)||null}function fa(m=(0,k.z$)()){return!("file:"!==cu()&&"ionic:"!==cu()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function fp(){try{const m=self.localStorage,h=Co();if(m)return m.setItem(h,"1"),m.removeItem(h),!function(m=(0,k.z$)()){return(0,k.w1)()&&11===(null==document?void 0:document.documentMode)||function(m=(0,k.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,k.hl)()}catch(m){return Lc()&&(0,k.hl)()}return!1}function Lc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Eh(){return("http:"===cu()||"https:"===cu()||(0,k.ru)()||fa())&&!((0,k.b$)()||(0,k.UG)())&&fp()&&!Lc()}function pp(){return fa()&&"undefined"!=typeof document}function $l(){return($l=(0,v.Z)(function*(){return!!pp()&&new Promise(m=>{const h=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),m(!0)})})})).apply(this,arguments)}const Qr={LOCAL:"local",NONE:"none",SESSION:"session"},En=Te,Gn="persistence";function Gl(m){return Cm.apply(this,arguments)}function Cm(){return(Cm=(0,v.Z)(function*(m){yield m._initializationPromise;const h=Fc(),f=qn(Gn,m.config.apiKey,m.name);(null==h?void 0:h.sessionStorage)&&h.sessionStorage.setItem(f,m._getPersistence())})).apply(this,arguments)}function Fc(){return"undefined"!=typeof window?window:null}const J_=Te;class pa{constructor(){this.browserResolver=Nt(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Er,this._completeRedirectFn=Cc}_openPopup(h,f,E,D){var R=this;return(0,v.Z)(function*(){var B;kn(null===(B=R.eventManagers[h._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const te=Hn(h,f,E,et(),D);return function(m,h,f,E=500,D=600){const R=Math.max((window.screen.availHeight-D)/2,0).toString(),B=Math.max((window.screen.availWidth-E)/2,0).toString();let te="";const Ne=Object.assign(Object.assign({},lh),{width:E.toString(),height:D.toString(),top:R,left:B}),Ee=(0,k.z$)().toLowerCase();f&&(te=La(Ee)?"_blank":f),zo(Ee)&&(h=h||"http://localhost",Ne.scrollbars="yes");const $e=Object.entries(Ne).reduce((It,[Vn,Zi])=>`${It}${Vn}=${Zi},`,"");if(function(m=(0,k.z$)()){var h;return Ui(m)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Ee)&&"_self"!==te)return function(m,h){const f=document.createElement("a");f.href=m,f.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(E)}(h||"",te),new ym(null);const He=window.open(h||"",te,$e);Te(He,m,"popup-blocked");try{He.focus()}catch(It){}return new ym(He)}(h,te,Co())})()}_openRedirect(h,f,E,D){var R=this;return(0,v.Z)(function*(){return yield R._originValidation(h),m=Hn(h,f,E,et(),D),An().location.href=m,new Promise(()=>{});var m})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:D,promise:R}=this.eventManagers[f];return D?Promise.resolve(D):(kn(R,"If manager is not set, promise should be"),R)}const E=this.initAndGetManager(h);return this.eventManagers[f]={promise:E},E}initAndGetManager(h){var f=this;return(0,v.Z)(function*(){const E=yield function(m){return st.apply(this,arguments)}(h),D=new Nn(h);return E.register("authEvent",R=>(Te(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:D.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:D},f.iframes[h._key()]=E,D})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(cp,{type:cp},D=>{var R;const B=null===(R=null==D?void 0:D[0])||void 0===R?void 0:R[cp];void 0!==B&&f(!!B),Vt(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function(m){return Tc.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return Wo()||ct()||Ui()}}),this.cordovaResolver=Nt(class{constructor(){this._redirectPersistence=Er,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Cc}_initialize(h){var f=this;return(0,v.Z)(function*(){const E=h._key();let D=f.eventManagers.get(E);return D||(D=new Ll(h),f.eventManagers.set(E,D),f.attachCallbackListeners(h,D)),D})()}_openPopup(h){Vt(h,"operation-not-supported-in-this-environment")}_openRedirect(h,f,E,D){var R=this;return(0,v.Z)(function*(){!function(m){var h,f,E,D,R,B,te,Ne,Ee,$e;const He=au();Te("function"==typeof(null===(h=null==He?void 0:He.universalLinks)||void 0===h?void 0:h.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Te(void 0!==(null===(f=null==He?void 0:He.BuildInfo)||void 0===f?void 0:f.packageName),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Te("function"==typeof(null===(R=null===(D=null===(E=null==He?void 0:He.cordova)||void 0===E?void 0:E.plugins)||void 0===D?void 0:D.browsertab)||void 0===R?void 0:R.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(Ne=null===(te=null===(B=null==He?void 0:He.cordova)||void 0===B?void 0:B.plugins)||void 0===te?void 0:te.browsertab)||void 0===Ne?void 0:Ne.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===($e=null===(Ee=null==He?void 0:He.cordova)||void 0===Ee?void 0:Ee.InAppBrowser)||void 0===$e?void 0:$e.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const B=yield R._initialize(h);yield B.initialized(),B.resetRedirect(),bc.clear(),yield R._originValidation(h);const te=function(m,h,f=null){return{type:h,eventId:f,urlResponse:null,sessionId:W_(),postBody:null,tenantId:m.tenantId,error:wt(m,"no-auth-event")}}(h,E,D);yield function(m,h){return uu()._set(Ul(m),h)}(h,te);const Ne=yield function(m,h,f){return Mc.apply(this,arguments)}(h,te,f),Ee=yield function(m){const{cordova:h}=au();return new Promise(f=>{h.plugins.browsertab.isAvailable(E=>{let D=null;E?h.plugins.browsertab.openUrl(m):D=h.InAppBrowser.open(m,function(m=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),f(D)})})}(Ne);return function(m,h,f){return gh.apply(this,arguments)}(h,B,Ee)})()}_isIframeWebStorageSupported(h,f){throw new Error("Method not implemented.")}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function(m){return Pc.apply(this,arguments)}(h)),this.originValidationPromises[f]}attachCallbackListeners(h,f){const{universalLinks:E,handleOpenURL:D,BuildInfo:R}=au(),B=setTimeout((0,v.Z)(function*(){yield mh(h),f.onEvent(Y_())}),500),te=function(){var $e=(0,v.Z)(function*(He){clearTimeout(B);const It=yield mh(h);let Vn=null;It&&(null==He?void 0:He.url)&&(Vn=function(m,h){var f,E;const D=function(m){const h=Xn(m),f=h.link?decodeURIComponent(h.link):void 0,E=Xn(f).link,D=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Xn(D).link||D||E||f||m}(h);if(D.includes("/__/auth/callback")){const R=Xn(D),B=R.firebaseError?function(m){try{return JSON.parse(m)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,te=null===(E=null===(f=null==B?void 0:B.code)||void 0===f?void 0:f.split("auth/"))||void 0===E?void 0:E[1],Ne=te?wt(te):null;return Ne?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:Ne,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:D,postBody:null}}return null}(It,He.url)),f.onEvent(Vn||Y_())});return function(It){return $e.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,te);const Ne=D,Ee=`${R.packageName.toLowerCase()}://`;au().handleOpenURL=function(){var $e=(0,v.Z)(function*(He){if(He.toLowerCase().startsWith(Ee)&&te({url:He}),"function"==typeof Ne)try{Ne(He)}catch(It){console.error(It)}});return function(He){return $e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Er,this._completeRedirectFn=Cc}_initialize(h){var f=this;return(0,v.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,f,E,D){var R=this;return(0,v.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,f,E,D)})()}_openRedirect(h,f,E,D){var R=this;return(0,v.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,f,E,D)})()}_isIframeWebStorageSupported(h,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,f)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return pp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return J_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,v.Z)(function*(){if(h.underlyingResolver)return;const f=yield function(){return $l.apply(this,arguments)}();h.underlyingResolver=f?h.cordovaResolver:h.browserResolver})()}}function Ao(m){return m.unwrap()}function X_(m){return _p(m)}function _p(m){const{_tokenResponse:h}=m instanceof k.ZR?m.customData:m;if(!h)return null;if(!(m instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return le.credentialFromResult(m);const f=h.providerId;if(!f||"password"===f)return null;let E;switch(f){case"google.com":E=Ga;break;case"facebook.com":E=Wu;break;case"github.com":E=$d;break;case"twitter.com":E=kr;break;default:const{oauthIdToken:D,oauthAccessToken:R,oauthTokenSecret:B,pendingToken:te,nonce:Ne}=h;return R||B||D||te?te?f.startsWith("saml.")?Jo._create(f,te):mn._fromParams({providerId:f,signInMethod:f,pendingToken:te,idToken:D,accessToken:R}):new Yt(f).credential({idToken:D,accessToken:R,rawNonce:Ne}):null}return m instanceof k.ZR?E.credentialFromError(m):E.credentialFromResult(m)}function hi(m,h){return h.catch(f=>{throw f instanceof k.ZR&&function(m,h){var f;const E=null===(f=h.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new wh(m,function(m,h){var f;const E=(0,k.m9)(m),D=h;return Te(h.customData.operationType,E,"argument-error"),Te(null===(f=D.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,E,"argument-error"),lc._fromError(E,D)}(m,h));else if(E){const D=_p(h),R=h;D&&(R.credential=D,R.tenantId=E.tenantId||void 0,R.email=E.email||void 0,R.phoneNumber=E.phoneNumber||void 0)}}(m,f),f}).then(f=>{const D=f.user;return{operationType:f.operationType,credential:X_(f),additionalUserInfo:ur(f),user:Zs.getOrCreate(D)}})}function Ro(m,h){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,v.Z)(function*(m,h){const f=yield h;return{verificationId:f.verificationId,confirm:E=>hi(m,f.confirm(E))}})).apply(this,arguments)}class wh{constructor(h,f){this.resolver=f,this.auth=function(m){return m.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return hi(Ao(this.auth),this.resolver.resolveSignIn(h))}}class Zs{constructor(h){this._delegate=h,this.multiFactor=function(m){const h=(0,k.m9)(m);return Io.has(h)||Io.set(h,hc._fromUser(h)),Io.get(h)}(h)}static getOrCreate(h){return Zs.USER_MAP.has(h)||Zs.USER_MAP.set(h,new Zs(h)),Zs.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var f=this;return(0,v.Z)(function*(){return hi(f.auth,yn(f._delegate,h))})()}linkWithPhoneNumber(h,f){var E=this;return(0,v.Z)(function*(){return Ro(E.auth,function(m,h,f){return rh.apply(this,arguments)}(E._delegate,h,f))})()}linkWithPopup(h){var f=this;return(0,v.Z)(function*(){return hi(f.auth,function(m,h,f){return wc.apply(this,arguments)}(f._delegate,h,pa))})()}linkWithRedirect(h){var f=this;return(0,v.Z)(function*(){return yield Gl(Sn(f.auth)),function(m,h,f){return function(m,h,f){return Ml.apply(this,arguments)}(m,h,f)}(f._delegate,h,pa)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var f=this;return(0,v.Z)(function*(){return hi(f.auth,Eo(f._delegate,h))})()}reauthenticateWithPhoneNumber(h,f){return Ro(this.auth,function(m,h,f){return I.apply(this,arguments)}(this._delegate,h,f))}reauthenticateWithPopup(h){return hi(this.auth,function(m,h,f){return hs.apply(this,arguments)}(this._delegate,h,pa))}reauthenticateWithRedirect(h){var f=this;return(0,v.Z)(function*(){return yield Gl(Sn(f.auth)),function(m,h,f){return function(m,h,f){return Ki.apply(this,arguments)}(m,h,f)}(f._delegate,h,pa)})()}sendEmailVerification(h){return function(m,h){return Wr.apply(this,arguments)}(this._delegate,h)}unlink(h){var f=this;return(0,v.Z)(function*(){return yield function(m,h){return tt.apply(this,arguments)}(f._delegate,h),f})()}updateEmail(h){return function(m,h){return Qa((0,k.m9)(m),h,null)}(this._delegate,h)}updatePassword(h){return function(m,h){return Qa((0,k.m9)(m),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function(m,h){return Z.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function(m,h){return Fn.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,f){return function(m,h,f){return Za.apply(this,arguments)}(this._delegate,h,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Zs.USER_MAP=new WeakMap;const zl=Te;let lu=(()=>{class m{constructor(f,E){if(this.app=f,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=f.options;zl(D,"invalid-api-key",{appName:f.name});let R=[tn];if("undefined"!=typeof window){R=function(m,h){const f=Fc();if(!(null==f?void 0:f.sessionStorage))return[];const E=qn(Gn,m,h);switch(f.sessionStorage.getItem(E)){case Qr.NONE:return[tn];case Qr.LOCAL:return[Qt,Er];case Qr.SESSION:return[Er];default:return[]}}(D,f.name);for(const te of[Qt,lr,Er])R.includes(te)||R.push(te)}zl(D,"invalid-api-key",{appName:f.name});const B="undefined"!=typeof window?pa:void 0;this._delegate=E.initialize({options:{persistence:R,popupRedirectResolver:B}}),this._delegate._updateErrorMap(xs),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Zs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,E){!function(m,h,f){const E=Sn(m);Te(E._canInitEmulator,E,"emulator-config-failed"),Te(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const D=!!(null==f?void 0:f.disableWarnings),R=Kn(h),{host:B,port:te}=function(m){const h=Kn(m),f=/(\/\/)?([^?#/]+)/.exec(m.substr(h.length));if(!f)return{host:"",port:null};const E=f[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(E);if(D){const R=D[1];return{host:R,port:ji(E.substr(R.length+1))}}{const[R,B]=E.split(":");return{host:R,port:ji(B)}}}(h);E.config.emulator={url:`${R}//${B}${null===te?"":`:${te}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:B,port:te,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function(){function m(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,f,E)}applyActionCode(f){return function(m,h){return Xu.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return ec(this._delegate,f)}confirmPasswordReset(f,E){return function(m,h,f){return bi.apply(this,arguments)}(this._delegate,f,E)}createUserWithEmailAndPassword(f,E){var D=this;return(0,v.Z)(function*(){return hi(D._delegate,function(m,h,f){return nc.apply(this,arguments)}(D._delegate,f,E))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function(m,h){return Hf.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function(m,h){const f=Fs.parseLink(h);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,v.Z)(function*(){zl(Eh(),f._delegate,"operation-not-supported-in-this-environment");const E=yield function(m,h){return da.apply(this,arguments)}(f._delegate,pa);return E?hi(f._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function(m,h){Sn(m)._logFramework(h)}(this._delegate,f)}onAuthStateChanged(f,E,D){const{next:R,error:B,complete:te}=Tm(f,E,D);return this._delegate.onAuthStateChanged(R,B,te)}onIdTokenChanged(f,E,D){const{next:R,error:B,complete:te}=Tm(f,E,D);return this._delegate.onIdTokenChanged(R,B,te)}sendSignInLinkToEmail(f,E){return function(m,h,f){return us.apply(this,arguments)}(this._delegate,f,E)}sendPasswordResetEmail(f,E){return function(m,h,f){return ea.apply(this,arguments)}(this._delegate,f,E||void 0)}setPersistence(f){var E=this;return(0,v.Z)(function*(){let D;switch(function(m,h){En(Object.values(Qr).includes(h),m,"invalid-persistence-type"),(0,k.b$)()?En(h!==Qr.SESSION,m,"unsupported-persistence-type"):(0,k.UG)()?En(h===Qr.NONE,m,"unsupported-persistence-type"):Lc()?En(h===Qr.NONE||h===Qr.LOCAL&&(0,k.hl)(),m,"unsupported-persistence-type"):En(h===Qr.NONE||fp(),m,"unsupported-persistence-type")}(E._delegate,f),f){case Qr.SESSION:D=Er;break;case Qr.LOCAL:D=(yield Nt(Qt)._isAvailable())?Qt:lr;break;case Qr.NONE:D=tn;break;default:return Vt("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return hi(this._delegate,function(m){return Xo.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return hi(this._delegate,vt(this._delegate,f))}signInWithCustomToken(f){return hi(this._delegate,function(m,h){return Ju.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,E){return hi(this._delegate,function(m,h,f){return vt((0,k.m9)(m),rs.credential(h,f))}(this._delegate,f,E))}signInWithEmailLink(f,E){return hi(this._delegate,function(m,h,f){return Ka.apply(this,arguments)}(this._delegate,f,E))}signInWithPhoneNumber(f,E){return Ro(this._delegate,function(m,h,f){return vc.apply(this,arguments)}(this._delegate,f,E))}signInWithPopup(f){var E=this;return(0,v.Z)(function*(){return zl(Eh(),E._delegate,"operation-not-supported-in-this-environment"),hi(E._delegate,function(m,h,f){return To.apply(this,arguments)}(E._delegate,f,pa))})()}signInWithRedirect(f){var E=this;return(0,v.Z)(function*(){return zl(Eh(),E._delegate,"operation-not-supported-in-this-environment"),yield Gl(E._delegate),function(m,h,f){return function(m,h,f){return Nl.apply(this,arguments)}(m,h,f)}(E._delegate,f,pa)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function(m,h){return na.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=Qr,m})();function Tm(m,h,f){let E=m;"function"!=typeof m&&({next:E,error:h,complete:f}=m);const D=E;return{next:B=>D(B&&Zs.getOrCreate(B)),error:h,complete:f}}class Wl{constructor(){this.providerId="phone",this._delegate=new le(Ao(X.Z.auth()))}static credential(h,f){return le.credential(h,f)}verifyPhoneNumber(h,f){return this._delegate.verifyPhoneNumber(h,f)}unwrap(){return this._delegate}}Wl.PHONE_SIGN_IN_METHOD=le.PHONE_SIGN_IN_METHOD,Wl.PROVIDER_ID=le.PROVIDER_ID;const Sm=Te;class bh{constructor(h,f,E=X.Z.app()){var D;Sm(null===(D=E.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new ca(h,f,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(m){m.INTERNAL.registerComponent(new qe.wA("auth-compat",h=>{const f=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new lu(f,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:rs,FacebookAuthProvider:Wu,GithubAuthProvider:$d,GoogleAuthProvider:Ga,OAuthProvider:Yt,SAMLAuthProvider:_o,PhoneAuthProvider:Wl,PhoneMultiFactorGenerator:xc,RecaptchaVerifier:bh,TwitterAuthProvider:kr,Auth:lu,AuthCredential:Ls,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.2.3")}(X.Z)},6676:function(Ye,we){!function(F){"use strict";function v(K){return Array.prototype.slice.call(K)}function X(K){return new Promise(function(ye,ge){K.onsuccess=function(){ye(K.result)},K.onerror=function(){ge(K.error)}})}function k(K,ye,ge){var fe,Ae=new Promise(function(ze,Oe){X(fe=K[ye].apply(K,ge)).then(ze,Oe)});return Ae.request=fe,Ae}function ce(K,ye,ge){var fe=k(K,ye,ge);return fe.then(function(Ae){if(Ae)return new L(Ae,fe.request)})}function ne(K,ye,ge){ge.forEach(function(fe){Object.defineProperty(K.prototype,fe,{get:function(){return this[ye][fe]},set:function(Ae){this[ye][fe]=Ae}})})}function re(K,ye,ge,fe){fe.forEach(function(Ae){Ae in ge.prototype&&(K.prototype[Ae]=function(){return k(this[ye],Ae,arguments)})})}function me(K,ye,ge,fe){fe.forEach(function(Ae){Ae in ge.prototype&&(K.prototype[Ae]=function(){return this[ye][Ae].apply(this[ye],arguments)})})}function ue(K,ye,ge,fe){fe.forEach(function(Ae){Ae in ge.prototype&&(K.prototype[Ae]=function(){return ce(this[ye],Ae,arguments)})})}function ee(K){this._index=K}function L(K,ye){this._cursor=K,this._request=ye}function V(K){this._store=K}function Q(K){this._tx=K,this.complete=new Promise(function(ye,ge){K.oncomplete=function(){ye()},K.onerror=function(){ge(K.error)},K.onabort=function(){ge(K.error)}})}function Y(K,ye,ge){this._db=K,this.oldVersion=ye,this.transaction=new Q(ge)}function ae(K){this._db=K}ne(ee,"_index",["name","keyPath","multiEntry","unique"]),re(ee,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ue(ee,"_index",IDBIndex,["openCursor","openKeyCursor"]),ne(L,"_cursor",["direction","key","primaryKey","value"]),re(L,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(K){K in IDBCursor.prototype&&(L.prototype[K]=function(){var ye=this,ge=arguments;return Promise.resolve().then(function(){return ye._cursor[K].apply(ye._cursor,ge),X(ye._request).then(function(fe){if(fe)return new L(fe,ye._request)})})})}),V.prototype.createIndex=function(){return new ee(this._store.createIndex.apply(this._store,arguments))},V.prototype.index=function(){return new ee(this._store.index.apply(this._store,arguments))},ne(V,"_store",["name","keyPath","indexNames","autoIncrement"]),re(V,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ue(V,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),me(V,"_store",IDBObjectStore,["deleteIndex"]),Q.prototype.objectStore=function(){return new V(this._tx.objectStore.apply(this._tx,arguments))},ne(Q,"_tx",["objectStoreNames","mode"]),me(Q,"_tx",IDBTransaction,["abort"]),Y.prototype.createObjectStore=function(){return new V(this._db.createObjectStore.apply(this._db,arguments))},ne(Y,"_db",["name","version","objectStoreNames"]),me(Y,"_db",IDBDatabase,["deleteObjectStore","close"]),ae.prototype.transaction=function(){return new Q(this._db.transaction.apply(this._db,arguments))},ne(ae,"_db",["name","version","objectStoreNames"]),me(ae,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(K){[V,ee].forEach(function(ye){K in ye.prototype&&(ye.prototype[K.replace("open","iterate")]=function(){var ge=v(arguments),fe=ge[ge.length-1],Ae=this._store||this._index,ze=Ae[K].apply(Ae,ge.slice(0,-1));ze.onsuccess=function(){fe(ze.result)}})})}),[ee,V].forEach(function(K){K.prototype.getAll||(K.prototype.getAll=function(ye,ge){var fe=this,Ae=[];return new Promise(function(ze){fe.iterateCursor(ye,function(Oe){Oe?(Ae.push(Oe.value),void 0===ge||Ae.length!=ge?Oe.continue():ze(Ae)):ze(Ae)})})})}),F.openDb=function(K,ye,ge){var fe=k(indexedDB,"open",[K,ye]),Ae=fe.request;return Ae&&(Ae.onupgradeneeded=function(ze){ge&&ge(new Y(Ae.result,ze.oldVersion,Ae.transaction))}),fe.then(function(ze){return new ae(ze)})},F.deleteDb=function(K){return k(indexedDB,"deleteDatabase",[K])},Object.defineProperty(F,"__esModule",{value:!0})}(we)},7574:(Ye,we,F)=>{"use strict";F.d(we,{y:()=>V});var v=F(7393),k=F(9181),ce=F(6490),re=F(6554),me=F(4487);var L=F(2494);let V=(()=>{class Y{constructor(be){this._isScalar=!1,be&&(this._subscribe=be)}lift(be){const he=new Y;return he.source=this,he.operator=be,he}subscribe(be,he,K){const{operator:ye}=this,ge=function(Y,ae,be){if(Y){if(Y instanceof v.L)return Y;if(Y[k.b])return Y[k.b]()}return Y||ae||be?new v.L(Y,ae,be):new v.L(ce.c)}(be,he,K);if(ge.add(ye?ye.call(ge,this.source):this.source||L.v.useDeprecatedSynchronousErrorHandling&&!ge.syncErrorThrowable?this._subscribe(ge):this._trySubscribe(ge)),L.v.useDeprecatedSynchronousErrorHandling&&ge.syncErrorThrowable&&(ge.syncErrorThrowable=!1,ge.syncErrorThrown))throw ge.syncErrorValue;return ge}_trySubscribe(be){try{return this._subscribe(be)}catch(he){L.v.useDeprecatedSynchronousErrorHandling&&(be.syncErrorThrown=!0,be.syncErrorValue=he),function(Y){for(;Y;){const{closed:ae,destination:be,isStopped:he}=Y;if(ae||he)return!1;Y=be&&be instanceof v.L?be:null}return!0}(be)?be.error(he):console.warn(he)}}forEach(be,he){return new(he=Q(he))((K,ye)=>{let ge;ge=this.subscribe(fe=>{try{be(fe)}catch(Ae){ye(Ae),ge&&ge.unsubscribe()}},ye,K)})}_subscribe(be){const{source:he}=this;return he&&he.subscribe(be)}[re.L](){return this}pipe(...be){return 0===be.length?this:function(Y){return 0===Y.length?me.y:1===Y.length?Y[0]:function(be){return Y.reduce((he,K)=>K(he),be)}}(be)(this)}toPromise(be){return new(be=Q(be))((he,K)=>{let ye;this.subscribe(ge=>ye=ge,ge=>K(ge),()=>he(ye))})}}return Y.create=ae=>new Y(ae),Y})();function Q(Y){if(Y||(Y=L.v.Promise||Promise),!Y)throw new Error("no Promise impl found");return Y}},6490:(Ye,we,F)=>{"use strict";F.d(we,{c:()=>k});var v=F(2494),X=F(4449);const k={closed:!0,next(ce){},error(ce){if(v.v.useDeprecatedSynchronousErrorHandling)throw ce;(0,X.z)(ce)},complete(){}}},9765:(Ye,we,F)=>{"use strict";F.d(we,{Yc:()=>me,xQ:()=>ue});var v=F(7574),X=F(7393),k=F(5319),ce=F(7971),ne=F(8858),re=F(9181);class me extends X.L{constructor(V){super(V),this.destination=V}}let ue=(()=>{class L extends v.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[re.b](){return new me(this)}lift(Q){const Y=new ee(this,this);return Y.operator=Q,Y}next(Q){if(this.closed)throw new ce.N;if(!this.isStopped){const{observers:Y}=this,ae=Y.length,be=Y.slice();for(let he=0;he<ae;he++)be[he].next(Q)}}error(Q){if(this.closed)throw new ce.N;this.hasError=!0,this.thrownError=Q,this.isStopped=!0;const{observers:Y}=this,ae=Y.length,be=Y.slice();for(let he=0;he<ae;he++)be[he].error(Q);this.observers.length=0}complete(){if(this.closed)throw new ce.N;this.isStopped=!0;const{observers:Q}=this,Y=Q.length,ae=Q.slice();for(let be=0;be<Y;be++)ae[be].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Q){if(this.closed)throw new ce.N;return super._trySubscribe(Q)}_subscribe(Q){if(this.closed)throw new ce.N;return this.hasError?(Q.error(this.thrownError),k.w.EMPTY):this.isStopped?(Q.complete(),k.w.EMPTY):(this.observers.push(Q),new ne.W(this,Q))}asObservable(){const Q=new v.y;return Q.source=this,Q}}return L.create=(V,Q)=>new ee(V,Q),L})();class ee extends ue{constructor(V,Q){super(),this.destination=V,this.source=Q}next(V){const{destination:Q}=this;Q&&Q.next&&Q.next(V)}error(V){const{destination:Q}=this;Q&&Q.error&&this.destination.error(V)}complete(){const{destination:V}=this;V&&V.complete&&this.destination.complete()}_subscribe(V){const{source:Q}=this;return Q?this.source.subscribe(V):k.w.EMPTY}}},8858:(Ye,we,F)=>{"use strict";F.d(we,{W:()=>X});var v=F(5319);class X extends v.w{constructor(ce,ne){super(),this.subject=ce,this.subscriber=ne,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ce=this.subject,ne=ce.observers;if(this.subject=null,!ne||0===ne.length||ce.isStopped||ce.closed)return;const re=ne.indexOf(this.subscriber);-1!==re&&ne.splice(re,1)}}},7393:(Ye,we,F)=>{"use strict";F.d(we,{L:()=>me});var v=F(9105),X=F(6490),k=F(5319),ce=F(9181),ne=F(2494),re=F(4449);class me extends k.w{constructor(L,V,Q){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=X.c;break;case 1:if(!L){this.destination=X.c;break}if("object"==typeof L){L instanceof me?(this.syncErrorThrowable=L.syncErrorThrowable,this.destination=L,L.add(this)):(this.syncErrorThrowable=!0,this.destination=new ue(this,L));break}default:this.syncErrorThrowable=!0,this.destination=new ue(this,L,V,Q)}}[ce.b](){return this}static create(L,V,Q){const Y=new me(L,V,Q);return Y.syncErrorThrowable=!1,Y}next(L){this.isStopped||this._next(L)}error(L){this.isStopped||(this.isStopped=!0,this._error(L))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(L){this.destination.next(L)}_error(L){this.destination.error(L),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:L}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=L,this}}class ue extends me{constructor(L,V,Q,Y){super(),this._parentSubscriber=L;let ae,be=this;(0,v.m)(V)?ae=V:V&&(ae=V.next,Q=V.error,Y=V.complete,V!==X.c&&(be=Object.create(V),(0,v.m)(be.unsubscribe)&&this.add(be.unsubscribe.bind(be)),be.unsubscribe=this.unsubscribe.bind(this))),this._context=be,this._next=ae,this._error=Q,this._complete=Y}next(L){if(!this.isStopped&&this._next){const{_parentSubscriber:V}=this;ne.v.useDeprecatedSynchronousErrorHandling&&V.syncErrorThrowable?this.__tryOrSetError(V,this._next,L)&&this.unsubscribe():this.__tryOrUnsub(this._next,L)}}error(L){if(!this.isStopped){const{_parentSubscriber:V}=this,{useDeprecatedSynchronousErrorHandling:Q}=ne.v;if(this._error)Q&&V.syncErrorThrowable?(this.__tryOrSetError(V,this._error,L),this.unsubscribe()):(this.__tryOrUnsub(this._error,L),this.unsubscribe());else if(V.syncErrorThrowable)Q?(V.syncErrorValue=L,V.syncErrorThrown=!0):(0,re.z)(L),this.unsubscribe();else{if(this.unsubscribe(),Q)throw L;(0,re.z)(L)}}}complete(){if(!this.isStopped){const{_parentSubscriber:L}=this;if(this._complete){const V=()=>this._complete.call(this._context);ne.v.useDeprecatedSynchronousErrorHandling&&L.syncErrorThrowable?(this.__tryOrSetError(L,V),this.unsubscribe()):(this.__tryOrUnsub(V),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(L,V){try{L.call(this._context,V)}catch(Q){if(this.unsubscribe(),ne.v.useDeprecatedSynchronousErrorHandling)throw Q;(0,re.z)(Q)}}__tryOrSetError(L,V,Q){if(!ne.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{V.call(this._context,Q)}catch(Y){return ne.v.useDeprecatedSynchronousErrorHandling?(L.syncErrorValue=Y,L.syncErrorThrown=!0,!0):((0,re.z)(Y),!0)}return!1}_unsubscribe(){const{_parentSubscriber:L}=this;this._context=null,this._parentSubscriber=null,L.unsubscribe()}}},5319:(Ye,we,F)=>{"use strict";F.d(we,{w:()=>re});var v=F(9796),X=F(1555),k=F(9105);const ne=(()=>{function ue(ee){return Error.call(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((L,V)=>`${V+1}) ${L.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee,this}return ue.prototype=Object.create(Error.prototype),ue})();class re{constructor(ee){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ee&&(this._ctorUnsubscribe=!0,this._unsubscribe=ee)}unsubscribe(){let ee;if(this.closed)return;let{_parentOrParents:L,_ctorUnsubscribe:V,_unsubscribe:Q,_subscriptions:Y}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,L instanceof re)L.remove(this);else if(null!==L)for(let ae=0;ae<L.length;++ae)L[ae].remove(this);if((0,k.m)(Q)){V&&(this._unsubscribe=void 0);try{Q.call(this)}catch(ae){ee=ae instanceof ne?me(ae.errors):[ae]}}if((0,v.k)(Y)){let ae=-1,be=Y.length;for(;++ae<be;){const he=Y[ae];if((0,X.K)(he))try{he.unsubscribe()}catch(K){ee=ee||[],K instanceof ne?ee=ee.concat(me(K.errors)):ee.push(K)}}}if(ee)throw new ne(ee)}add(ee){let L=ee;if(!ee)return re.EMPTY;switch(typeof ee){case"function":L=new re(ee);case"object":if(L===this||L.closed||"function"!=typeof L.unsubscribe)return L;if(this.closed)return L.unsubscribe(),L;if(!(L instanceof re)){const Y=L;L=new re,L._subscriptions=[Y]}break;default:throw new Error("unrecognized teardown "+ee+" added to Subscription.")}let{_parentOrParents:V}=L;if(null===V)L._parentOrParents=this;else if(V instanceof re){if(V===this)return L;L._parentOrParents=[V,this]}else{if(-1!==V.indexOf(this))return L;V.push(this)}const Q=this._subscriptions;return null===Q?this._subscriptions=[L]:Q.push(L),L}remove(ee){const L=this._subscriptions;if(L){const V=L.indexOf(ee);-1!==V&&L.splice(V,1)}}}var ue;function me(ue){return ue.reduce((ee,L)=>ee.concat(L instanceof ne?L.errors:L),[])}re.EMPTY=((ue=new re).closed=!0,ue)},2494:(Ye,we,F)=>{"use strict";F.d(we,{v:()=>X});let v=!1;const X={Promise:void 0,set useDeprecatedSynchronousErrorHandling(k){if(k){const ce=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ce.stack)}else v&&console.log("RxJS: Back to a better error behavior. Thank you. <3");v=k},get useDeprecatedSynchronousErrorHandling(){return v}}},5345:(Ye,we,F)=>{"use strict";F.d(we,{IY:()=>ce,Ds:()=>re,ft:()=>ue});var v=F(7393),X=F(7574),k=F(7444);class ce extends v.L{constructor(L){super(),this.parent=L}_next(L){this.parent.notifyNext(L)}_error(L){this.parent.notifyError(L),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class re extends v.L{notifyNext(L){this.destination.next(L)}notifyError(L){this.destination.error(L)}notifyComplete(){this.destination.complete()}}function ue(ee,L){if(L.closed)return;if(ee instanceof X.y)return ee.subscribe(L);let V;try{V=(0,k.s)(ee)(L)}catch(Q){L.error(Q)}return V}},2441:(Ye,we,F)=>{"use strict";F.d(we,{c:()=>ne,N:()=>re});var v=F(9765),X=F(7574),k=F(5319),ce=F(1307);class ne extends X.y{constructor(V,Q){super(),this.source=V,this.subjectFactory=Q,this._refCount=0,this._isComplete=!1}_subscribe(V){return this.getSubject().subscribe(V)}getSubject(){const V=this._subject;return(!V||V.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let V=this._connection;return V||(this._isComplete=!1,V=this._connection=new k.w,V.add(this.source.subscribe(new me(this.getSubject(),this))),V.closed&&(this._connection=null,V=k.w.EMPTY)),V}refCount(){return(0,ce.x)()(this)}}const re=(()=>{const L=ne.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:L._subscribe},_isComplete:{value:L._isComplete,writable:!0},getSubject:{value:L.getSubject},connect:{value:L.connect},refCount:{value:L.refCount}}})();class me extends v.Yc{constructor(V,Q){super(V),this.connectable=Q}_error(V){this._unsubscribe(),super._error(V)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const V=this.connectable;if(V){this.connectable=null;const Q=V._connection;V._refCount=0,V._subject=null,V._connection=null,Q&&Q.unsubscribe()}}}},9193:(Ye,we,F)=>{"use strict";F.d(we,{E:()=>X,c:()=>k});var v=F(7574);const X=new v.y(ne=>ne.complete());function k(ne){return ne?function(ne){return new v.y(re=>ne.schedule(()=>re.complete()))}(ne):X}},4402:(Ye,we,F)=>{"use strict";F.d(we,{D:()=>be});var v=F(7574),X=F(7444),k=F(5319),ce=F(6554),me=F(4087),ue=F(377),V=F(4072),Q=F(9489);function be(he,K){return K?function(he,K){if(null!=he){if(function(he){return he&&"function"==typeof he[ce.L]}(he))return function(he,K){return new v.y(ye=>{const ge=new k.w;return ge.add(K.schedule(()=>{const fe=he[ce.L]();ge.add(fe.subscribe({next(Ae){ge.add(K.schedule(()=>ye.next(Ae)))},error(Ae){ge.add(K.schedule(()=>ye.error(Ae)))},complete(){ge.add(K.schedule(()=>ye.complete()))}}))})),ge})}(he,K);if((0,V.t)(he))return function(he,K){return new v.y(ye=>{const ge=new k.w;return ge.add(K.schedule(()=>he.then(fe=>{ge.add(K.schedule(()=>{ye.next(fe),ge.add(K.schedule(()=>ye.complete()))}))},fe=>{ge.add(K.schedule(()=>ye.error(fe)))}))),ge})}(he,K);if((0,Q.z)(he))return(0,me.r)(he,K);if(function(he){return he&&"function"==typeof he[ue.hZ]}(he)||"string"==typeof he)return function(he,K){if(!he)throw new Error("Iterable cannot be null");return new v.y(ye=>{const ge=new k.w;let fe;return ge.add(()=>{fe&&"function"==typeof fe.return&&fe.return()}),ge.add(K.schedule(()=>{fe=he[ue.hZ](),ge.add(K.schedule(function(){if(ye.closed)return;let Ae,ze;try{const Oe=fe.next();Ae=Oe.value,ze=Oe.done}catch(Oe){return void ye.error(Oe)}ze?ye.complete():(ye.next(Ae),this.schedule())}))})),ge})}(he,K)}throw new TypeError((null!==he&&typeof he||he)+" is not observable")}(he,K):he instanceof v.y?he:new v.y((0,X.s)(he))}},6693:(Ye,we,F)=>{"use strict";F.d(we,{n:()=>ce});var v=F(7574),X=F(5015),k=F(4087);function ce(ne,re){return re?(0,k.r)(ne,re):new v.y((0,X.V)(ne))}},6682:(Ye,we,F)=>{"use strict";F.d(we,{T:()=>ne});var v=F(7574),X=F(4869),k=F(3282),ce=F(6693);function ne(...re){let me=Number.POSITIVE_INFINITY,ue=null,ee=re[re.length-1];return(0,X.K)(ee)?(ue=re.pop(),re.length>1&&"number"==typeof re[re.length-1]&&(me=re.pop())):"number"==typeof ee&&(me=re.pop()),null===ue&&1===re.length&&re[0]instanceof v.y?re[0]:(0,k.J)(me)((0,ce.n)(re,ue))}},5917:(Ye,we,F)=>{"use strict";F.d(we,{of:()=>ce});var v=F(4869),X=F(6693),k=F(4087);function ce(...ne){let re=ne[ne.length-1];return(0,v.K)(re)?(ne.pop(),(0,k.r)(ne,re)):(0,X.n)(ne)}},8002:(Ye,we,F)=>{"use strict";F.d(we,{U:()=>X});var v=F(7393);function X(ne,re){return function(ue){if("function"!=typeof ne)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ue.lift(new k(ne,re))}}class k{constructor(re,me){this.project=re,this.thisArg=me}call(re,me){return me.subscribe(new ce(re,this.project,this.thisArg))}}class ce extends v.L{constructor(re,me,ue){super(re),this.project=me,this.count=0,this.thisArg=ue||this}_next(re){let me;try{me=this.project.call(this.thisArg,re,this.count++)}catch(ue){return void this.destination.error(ue)}this.destination.next(me)}}},3282:(Ye,we,F)=>{"use strict";F.d(we,{J:()=>k});var v=F(9773),X=F(4487);function k(ce=Number.POSITIVE_INFINITY){return(0,v.zg)(X.y,ce)}},9773:(Ye,we,F)=>{"use strict";F.d(we,{zg:()=>ce});var v=F(8002),X=F(4402),k=F(5345);function ce(ue,ee,L=Number.POSITIVE_INFINITY){return"function"==typeof ee?V=>V.pipe(ce((Q,Y)=>(0,X.D)(ue(Q,Y)).pipe((0,v.U)((ae,be)=>ee(Q,ae,Y,be))),L)):("number"==typeof ee&&(L=ee),V=>V.lift(new ne(ue,L)))}class ne{constructor(ee,L=Number.POSITIVE_INFINITY){this.project=ee,this.concurrent=L}call(ee,L){return L.subscribe(new re(ee,this.project,this.concurrent))}}class re extends k.Ds{constructor(ee,L,V=Number.POSITIVE_INFINITY){super(ee),this.project=L,this.concurrent=V,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ee){this.active<this.concurrent?this._tryNext(ee):this.buffer.push(ee)}_tryNext(ee){let L;const V=this.index++;try{L=this.project(ee,V)}catch(Q){return void this.destination.error(Q)}this.active++,this._innerSub(L)}_innerSub(ee){const L=new k.IY(this),V=this.destination;V.add(L);const Q=(0,k.ft)(ee,L);Q!==L&&V.add(Q)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ee){this.destination.next(ee)}notifyComplete(){const ee=this.buffer;this.active--,ee.length>0?this._next(ee.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(Ye,we,F)=>{"use strict";F.d(we,{ht:()=>V,QV:()=>ee});var v=F(7393),X=F(9193),k=F(5917),ce=F(7574);class ue{constructor(ae,be,he){this.kind=ae,this.value=be,this.error=he,this.hasValue="N"===ae}observe(ae){switch(this.kind){case"N":return ae.next&&ae.next(this.value);case"E":return ae.error&&ae.error(this.error);case"C":return ae.complete&&ae.complete()}}do(ae,be,he){switch(this.kind){case"N":return ae&&ae(this.value);case"E":return be&&be(this.error);case"C":return he&&he()}}accept(ae,be,he){return ae&&"function"==typeof ae.next?this.observe(ae):this.do(ae,be,he)}toObservable(){switch(this.kind){case"N":return(0,k.of)(this.value);case"E":return Y=this.error,new ce.y(be=>be.error(Y));case"C":return(0,X.c)()}var Y;throw new Error("unexpected notification kind value")}static createNext(ae){return void 0!==ae?new ue("N",ae):ue.undefinedValueNotification}static createError(ae){return new ue("E",void 0,ae)}static createComplete(){return ue.completeNotification}}function ee(Y,ae=0){return function(he){return he.lift(new L(Y,ae))}}ue.completeNotification=new ue("C"),ue.undefinedValueNotification=new ue("N",void 0);class L{constructor(ae,be=0){this.scheduler=ae,this.delay=be}call(ae,be){return be.subscribe(new V(ae,this.scheduler,this.delay))}}class V extends v.L{constructor(ae,be,he=0){super(ae),this.scheduler=be,this.delay=he}static dispatch(ae){const{notification:be,destination:he}=ae;be.observe(he),this.unsubscribe()}scheduleMessage(ae){this.destination.add(this.scheduler.schedule(V.dispatch,this.delay,new Q(ae,this.destination)))}_next(ae){this.scheduleMessage(ue.createNext(ae))}_error(ae){this.scheduleMessage(ue.createError(ae)),this.unsubscribe()}_complete(){this.scheduleMessage(ue.createComplete()),this.unsubscribe()}}class Q{constructor(ae,be){this.notification=ae,this.destination=be}}},1307:(Ye,we,F)=>{"use strict";F.d(we,{x:()=>X});var v=F(7393);function X(){return function(re){return re.lift(new k(re))}}class k{constructor(re){this.connectable=re}call(re,me){const{connectable:ue}=this;ue._refCount++;const ee=new ce(re,ue),L=me.subscribe(ee);return ee.closed||(ee.connection=ue.connect()),L}}class ce extends v.L{constructor(re,me){super(re),this.connectable=me}_unsubscribe(){const{connectable:re}=this;if(!re)return void(this.connection=null);this.connectable=null;const me=re._refCount;if(me<=0)return void(this.connection=null);if(re._refCount=me-1,me>1)return void(this.connection=null);const{connection:ue}=this,ee=re._connection;this.connection=null,ee&&(!ue||ee===ue)&&ee.unsubscribe()}}},3101:(Ye,we,F)=>{"use strict";F.d(we,{R:()=>K});var v=F(7574);let X=1;const k=Promise.resolve(),ce={};function ne(ge){return ge in ce&&(delete ce[ge],!0)}const re={setImmediate(ge){const fe=X++;return ce[fe]=!0,k.then(()=>ne(fe)&&ge()),fe},clearImmediate(ge){ne(ge)}};var ue=F(6465),L=F(6102);const Y=new class extends L.v{flush(fe){this.active=!0,this.scheduled=void 0;const{actions:Ae}=this;let ze,Oe=-1,Tt=Ae.length;fe=fe||Ae.shift();do{if(ze=fe.execute(fe.state,fe.delay))break}while(++Oe<Tt&&(fe=Ae.shift()));if(this.active=!1,ze){for(;++Oe<Tt&&(fe=Ae.shift());)fe.unsubscribe();throw ze}}}(class extends ue.o{constructor(fe,Ae){super(fe,Ae),this.scheduler=fe,this.work=Ae}requestAsyncId(fe,Ae,ze=0){return null!==ze&&ze>0?super.requestAsyncId(fe,Ae,ze):(fe.actions.push(this),fe.scheduled||(fe.scheduled=re.setImmediate(fe.flush.bind(fe,null))))}recycleAsyncId(fe,Ae,ze=0){if(null!==ze&&ze>0||null===ze&&this.delay>0)return super.recycleAsyncId(fe,Ae,ze);0===fe.actions.length&&(re.clearImmediate(Ae),fe.scheduled=void 0)}});var ae=F(9796);class he extends v.y{constructor(fe,Ae=0,ze=Y){var ge;super(),this.source=fe,this.delayTime=Ae,this.scheduler=ze,(!(!(0,ae.k)(ge=Ae)&&ge-parseFloat(ge)+1>=0)||Ae<0)&&(this.delayTime=0),(!ze||"function"!=typeof ze.schedule)&&(this.scheduler=Y)}static create(fe,Ae=0,ze=Y){return new he(fe,Ae,ze)}static dispatch(fe){const{source:Ae,subscriber:ze}=fe;return this.add(Ae.subscribe(ze))}_subscribe(fe){return this.scheduler.schedule(he.dispatch,this.delayTime,{source:this.source,subscriber:fe})}}function K(ge,fe=0){return function(ze){return ze.lift(new ye(ge,fe))}}class ye{constructor(fe,Ae){this.scheduler=fe,this.delay=Ae}call(fe,Ae){return new he(Ae,this.delay,this.scheduler).subscribe(fe)}}},3342:(Ye,we,F)=>{"use strict";F.d(we,{b:()=>ce});var v=F(7393);function X(){}var k=F(9105);function ce(me,ue,ee){return function(V){return V.lift(new ne(me,ue,ee))}}class ne{constructor(ue,ee,L){this.nextOrObserver=ue,this.error=ee,this.complete=L}call(ue,ee){return ee.subscribe(new re(ue,this.nextOrObserver,this.error,this.complete))}}class re extends v.L{constructor(ue,ee,L,V){super(ue),this._tapNext=X,this._tapError=X,this._tapComplete=X,this._tapError=L||X,this._tapComplete=V||X,(0,k.m)(ee)?(this._context=this,this._tapNext=ee):ee&&(this._context=ee,this._tapNext=ee.next||X,this._tapError=ee.error||X,this._tapComplete=ee.complete||X)}_next(ue){try{this._tapNext.call(this._context,ue)}catch(ee){return void this.destination.error(ee)}this.destination.next(ue)}_error(ue){try{this._tapError.call(this._context,ue)}catch(ee){return void this.destination.error(ee)}this.destination.error(ue)}_complete(){try{this._tapComplete.call(this._context)}catch(ue){return void this.destination.error(ue)}return this.destination.complete()}}},4087:(Ye,we,F)=>{"use strict";F.d(we,{r:()=>k});var v=F(7574),X=F(5319);function k(ce,ne){return new v.y(re=>{const me=new X.w;let ue=0;return me.add(ne.schedule(function(){ue!==ce.length?(re.next(ce[ue++]),re.closed||me.add(this.schedule())):re.complete()})),me})}},6465:(Ye,we,F)=>{"use strict";F.d(we,{o:()=>k});var v=F(5319);class X extends v.w{constructor(ne,re){super()}schedule(ne,re=0){return this}}class k extends X{constructor(ne,re){super(ne,re),this.scheduler=ne,this.work=re,this.pending=!1}schedule(ne,re=0){if(this.closed)return this;this.state=ne;const me=this.id,ue=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(ue,me,re)),this.pending=!0,this.delay=re,this.id=this.id||this.requestAsyncId(ue,this.id,re),this}requestAsyncId(ne,re,me=0){return setInterval(ne.flush.bind(ne,this),me)}recycleAsyncId(ne,re,me=0){if(null!==me&&this.delay===me&&!1===this.pending)return re;clearInterval(re)}execute(ne,re){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(ne,re);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ne,re){let ue,me=!1;try{this.work(ne)}catch(ee){me=!0,ue=!!ee&&ee||new Error(ee)}if(me)return this.unsubscribe(),ue}_unsubscribe(){const ne=this.id,re=this.scheduler,me=re.actions,ue=me.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ue&&me.splice(ue,1),null!=ne&&(this.id=this.recycleAsyncId(re,ne,null)),this.delay=null}}},6102:(Ye,we,F)=>{"use strict";F.d(we,{v:()=>X});let v=(()=>{class k{constructor(ne,re=k.now){this.SchedulerAction=ne,this.now=re}schedule(ne,re=0,me){return new this.SchedulerAction(this,ne).schedule(me,re)}}return k.now=()=>Date.now(),k})();class X extends v{constructor(ce,ne=v.now){super(ce,()=>X.delegate&&X.delegate!==this?X.delegate.now():ne()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ce,ne=0,re){return X.delegate&&X.delegate!==this?X.delegate.schedule(ce,ne,re):super.schedule(ce,ne,re)}flush(ce){const{actions:ne}=this;if(this.active)return void ne.push(ce);let re;this.active=!0;do{if(re=ce.execute(ce.state,ce.delay))break}while(ce=ne.shift());if(this.active=!1,re){for(;ce=ne.shift();)ce.unsubscribe();throw re}}}},3637:(Ye,we,F)=>{"use strict";F.d(we,{z:()=>k});var v=F(6465);const k=new(F(6102).v)(v.o)},7771:(Ye,we,F)=>{"use strict";F.d(we,{c:()=>re,N:()=>ne});var v=F(6465),k=F(6102);const ne=new class extends k.v{}(class extends v.o{constructor(ue,ee){super(ue,ee),this.scheduler=ue,this.work=ee}schedule(ue,ee=0){return ee>0?super.schedule(ue,ee):(this.delay=ee,this.state=ue,this.scheduler.flush(this),this)}execute(ue,ee){return ee>0||this.closed?super.execute(ue,ee):this._execute(ue,ee)}requestAsyncId(ue,ee,L=0){return null!==L&&L>0||null===L&&this.delay>0?super.requestAsyncId(ue,ee,L):ue.flush(this)}}),re=ne},377:(Ye,we,F)=>{"use strict";F.d(we,{hZ:()=>X});const X="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Ye,we,F)=>{"use strict";F.d(we,{L:()=>v});const v="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Ye,we,F)=>{"use strict";F.d(we,{b:()=>v});const v="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Ye,we,F)=>{"use strict";F.d(we,{N:()=>X});const X=(()=>{function k(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return k.prototype=Object.create(Error.prototype),k})()},4449:(Ye,we,F)=>{"use strict";function v(X){setTimeout(()=>{throw X},0)}F.d(we,{z:()=>v})},4487:(Ye,we,F)=>{"use strict";function v(X){return X}F.d(we,{y:()=>v})},9796:(Ye,we,F)=>{"use strict";F.d(we,{k:()=>v});const v=Array.isArray||(X=>X&&"number"==typeof X.length)},9489:(Ye,we,F)=>{"use strict";F.d(we,{z:()=>v});const v=X=>X&&"number"==typeof X.length&&"function"!=typeof X},9105:(Ye,we,F)=>{"use strict";function v(X){return"function"==typeof X}F.d(we,{m:()=>v})},1555:(Ye,we,F)=>{"use strict";function v(X){return null!==X&&"object"==typeof X}F.d(we,{K:()=>v})},4072:(Ye,we,F)=>{"use strict";function v(X){return!!X&&"function"!=typeof X.subscribe&&"function"==typeof X.then}F.d(we,{t:()=>v})},4869:(Ye,we,F)=>{"use strict";function v(X){return X&&"function"==typeof X.schedule}F.d(we,{K:()=>v})},7444:(Ye,we,F)=>{"use strict";F.d(we,{s:()=>V});var v=F(5015),X=F(4449),ce=F(377),re=F(6554),ue=F(9489),ee=F(4072),L=F(1555);const V=Q=>{if(Q&&"function"==typeof Q[re.L])return(Q=>Y=>{const ae=Q[re.L]();if("function"!=typeof ae.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return ae.subscribe(Y)})(Q);if((0,ue.z)(Q))return(0,v.V)(Q);if((0,ee.t)(Q))return(Q=>Y=>(Q.then(ae=>{Y.closed||(Y.next(ae),Y.complete())},ae=>Y.error(ae)).then(null,X.z),Y))(Q);if(Q&&"function"==typeof Q[ce.hZ])return(Q=>Y=>{const ae=Q[ce.hZ]();for(;;){let be;try{be=ae.next()}catch(he){return Y.error(he),Y}if(be.done){Y.complete();break}if(Y.next(be.value),Y.closed)break}return"function"==typeof ae.return&&Y.add(()=>{ae.return&&ae.return()}),Y})(Q);{const ae=`You provided ${(0,L.K)(Q)?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(ae)}}},5015:(Ye,we,F)=>{"use strict";F.d(we,{V:()=>v});const v=X=>k=>{for(let ce=0,ne=X.length;ce<ne&&!k.closed;ce++)k.next(X[ce]);k.complete()}},847:(Ye,we,F)=>{"use strict";var v=F(3018);let X=null;function k(){return X}const me=new v.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,v.Yz7)({factory:ee,token:n,providedIn:"platform"}),n})();function ee(){return(0,v.LFG)(V)}const L=new v.OlP("Location Initialized");let V=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const s=k().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",t,!1),()=>s.removeEventListener("popstate",t)}onHashChange(t){const s=k().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",t,!1),()=>s.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,s,a){Q()?this._history.pushState(t,s,a):this.location.hash=a}replaceState(t,s,a){Q()?this._history.replaceState(t,s,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(me))},n.\u0275prov=(0,v.Yz7)({factory:Y,token:n,providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Y(){return new V((0,v.LFG)(me))}function ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function he(n){return n&&"?"!==n[0]?"?"+n:n}let K=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,v.Yz7)({factory:ye,token:n,providedIn:"root"}),n})();function ye(n){const e=(0,v.LFG)(me).location;return new fe((0,v.LFG)(ue),e&&e.origin||"")}const ge=new v.OlP("appBaseHref");let fe=(()=>{class n extends K{constructor(t,s){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==s&&(s=this._platformLocation.getBaseHrefFromDOM()),null==s)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=s}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ae(this._baseHref,t)}path(t=!1){const s=this._platformLocation.pathname+he(this._platformLocation.search),a=this._platformLocation.hash;return a&&t?`${s}${a}`:s}pushState(t,s,a,l){const p=this.prepareExternalUrl(a+he(l));this._platformLocation.pushState(t,s,p)}replaceState(t,s,a,l){const p=this.prepareExternalUrl(a+he(l));this._platformLocation.replaceState(t,s,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformLocation).historyGo)||void 0===a||a.call(s,t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ue),v.LFG(ge,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n extends K{constructor(t,s){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(t){const s=ae(this._baseHref,t);return s.length>0?"#"+s:s}pushState(t,s,a,l){let p=this.prepareExternalUrl(a+he(l));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.pushState(t,s,p)}replaceState(t,s,a,l){let p=this.prepareExternalUrl(a+he(l));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.replaceState(t,s,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformLocation).historyGo)||void 0===a||a.call(s,t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ue),v.LFG(ge,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),ze=(()=>{class n{constructor(t,s){this._subject=new v.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const a=this._platformStrategy.getBaseHref();this._platformLocation=s,this._baseHref=be(gt(a)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,s=""){return this.path()==this.normalize(t+he(s))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,gt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,s="",a=null){this._platformStrategy.pushState(a,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+he(s)),a)}replaceState(t,s="",a=null){this._platformStrategy.replaceState(a,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+he(s)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformStrategy).historyGo)||void 0===a||a.call(s,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}))}_notifyUrlChangeListeners(t="",s){this._urlChangeListeners.forEach(a=>a(t,s))}subscribe(t,s,a){return this._subject.subscribe({next:t,error:s,complete:a})}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(K),v.LFG(ue))},n.normalizeQueryParams=he,n.joinWithSlash=ae,n.stripTrailingSlash=be,n.\u0275prov=(0,v.Yz7)({factory:Oe,token:n,providedIn:"root"}),n})();function Oe(){return new ze((0,v.LFG)(K),(0,v.LFG)(ue))}function gt(n){return n.replace(/\/index.html$/,"")}var _t=(()=>((_t=_t||{})[_t.Zero=0]="Zero",_t[_t.One=1]="One",_t[_t.Two=2]="Two",_t[_t.Few=3]="Few",_t[_t.Many=4]="Many",_t[_t.Other=5]="Other",_t))();const mr=v.kL8;class qn{}let Ln=(()=>{class n extends qn{constructor(t){super(),this.locale=t}getPluralCategory(t,s){switch(mr(s||this.locale)(t)){case _t.Zero:return"zero";case _t.One:return"one";case _t.Two:return"two";case _t.Few:return"few";case _t.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(v.soG))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();function ct(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const s=t.indexOf("="),[a,l]=-1==s?[t,""]:[t.slice(0,s),t.slice(s+1)];if(a.trim()===e)return decodeURIComponent(l)}return null}class go{constructor(e,t,s,a){this.$implicit=e,this.ngForOf=t,this.index=s,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vi=(()=>{class n{constructor(t,s,a){this._viewContainer=t,this._template=s,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(s){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const s=[];t.forEachOperation((a,l,p)=>{if(null==a.previousIndex){const _=this._viewContainer.createEmbeddedView(this._template,new go(null,this._ngForOf,-1,-1),null===p?void 0:p),b=new _r(a,_);s.push(b)}else if(null==p)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const _=this._viewContainer.get(l);this._viewContainer.move(_,p);const b=new _r(a,_);s.push(b)}});for(let a=0;a<s.length;a++)this._perViewChange(s[a].view,s[a].record);for(let a=0,l=this._viewContainer.length;a<l;a++){const p=this._viewContainer.get(a);p.context.index=a,p.context.count=l,p.context.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(t,s){t.context.$implicit=s.item}static ngTemplateContextGuard(t,s){return!0}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(v.s_b),v.Y36(v.Rgc),v.Y36(v.ZZ4))},n.\u0275dir=v.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class _r{constructor(e,t){this.record=e,this.view=t}}class Ls{createSubscription(e,t){return e.subscribe({next:t,error:s=>{throw s}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Fa{createSubscription(e,t){return e.then(t,s=>{throw s})}dispose(e){}onDestroy(e){}}const Ko=new Fa,ai=new Ls;let Gu=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,s=>this._updateLatestValue(t,s))}_selectStrategy(t){if((0,v.QGY)(t))return Ko;if((0,v.F4k)(t))return ai;throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,v.AaK)(n)}'`)}(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,s){t===this._obj&&(this._latestValue=s,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(v.sBO,16))},n.\u0275pipe=v.Yjl({name:"async",type:n,pure:!1}),n})(),ns=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[{provide:qn,useClass:Ln}]}),n})();function ja(n){return"server"===n}let Ba=(()=>{class n{}return n.\u0275prov=(0,v.Yz7)({token:n,providedIn:"root",factory:()=>new Bf((0,v.LFG)(me),window)}),n})();class Bf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const s=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=s.currentNode;for(;a;){const l=a.shadowRoot;if(l){const p=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(p)return p}a=s.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),s=t.left+this.window.pageXOffset,a=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(s-l[0],a-l[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Qo(this.window.history)||Qo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Qo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class $a{}class Ha extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Ha,X||(X=n)}onAndCancel(e,t,s){return e.addEventListener(t,s,!1),()=>{e.removeEventListener(t,s,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(rs=rs||document.querySelector("base"),rs?rs.getAttribute("href"):null);return null==t?null:function(n){$i=$i||document.createElement("a"),$i.setAttribute("href",n);const e=$i.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){rs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ct(document.cookie,e)}}let $i,rs=null;const Wu=new v.OlP("TRANSITION_ID"),$d=[{provide:v.ip1,useFactory:function(n,e,t){return()=>{t.get(v.CZH).donePromise.then(()=>{const s=k(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<a.length;l++)s.remove(a[l])})}},deps:[Wu,me,v.zs3],multi:!0}];class bt{static init(){(0,v.VLi)(new bt)}addToWindow(e){v.dqk.getAngularTestability=(s,a=!0)=>{const l=e.findTestabilityInTree(s,a);if(null==l)throw new Error("Could not find testability for element.");return l},v.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),v.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(s=>{const a=v.dqk.getAllAngularTestabilities();let l=a.length,p=!1;const _=function(b){p=p||b,l--,0==l&&s(p)};a.forEach(function(b){b.whenStable(_)})})}findTestabilityInTree(e,t,s){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:s?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Jo=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const ss=new v.OlP("EventManagerPlugins");let Vs=(()=>{class n{constructor(t,s){this._zone=s,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,s,a){return this._findPluginFor(s).addEventListener(t,s,a)}addGlobalEventListener(t,s,a){return this._findPluginFor(s).addGlobalEventListener(t,s,a)}getZone(){return this._zone}_findPluginFor(t){const s=this._eventNameToPlugin.get(t);if(s)return s;const a=this._plugins;for(let l=0;l<a.length;l++){const p=a[l];if(p.supports(t))return this._eventNameToPlugin.set(t,p),p}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ss),v.LFG(v.R0b))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class vo{constructor(e){this._doc=e}addGlobalEventListener(e,t,s){const a=k().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,s)}}let Zu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const s=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),s.add(a))}),this.onStylesAdded(s)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),os=(()=>{class n extends Zu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,s,a){t.forEach(l=>{const p=this._doc.createElement("style");p.textContent=l,a.push(s.appendChild(p))})}addHost(t){const s=[];this._addStylesToHost(this._stylesSet,t,s),this._hostNodes.set(t,s)}removeHost(t){const s=this._hostNodes.get(t);s&&s.forEach(bl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((s,a)=>{this._addStylesToHost(t,a,s)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(bl))}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(me))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();function bl(n){k().remove(n)}const Ie={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},vt=/%COMP%/g;function Us(n,e,t){for(let s=0;s<e.length;s++){let a=e[s];Array.isArray(a)?Us(n,a,t):(a=a.replace(vt,n),t.push(a))}return t}function Wd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let as=(()=>{class n{constructor(t,s,a){this.eventManager=t,this.sharedStylesHost=s,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new Gi(t)}createRenderer(t,s){if(!t||!s)return this.defaultRenderer;switch(s.encapsulation){case v.ifc.Emulated:{let a=this.rendererByCompId.get(s.id);return a||(a=new js(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,a)),a.applyToHost(t),a}case 1:case v.ifc.ShadowDom:return new bi(this.eventManager,this.sharedStylesHost,t,s);default:if(!this.rendererByCompId.has(s.id)){const a=Us(s.id,s.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Vs),v.LFG(os),v.LFG(v.AFp))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class Gi{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Ie[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,s){e&&e.insertBefore(t,s)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let s="string"==typeof e?document.querySelector(e):e;if(!s)throw new Error(`The selector "${e}" did not match any elements`);return t||(s.textContent=""),s}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,s,a){if(a){t=a+":"+t;const l=Ie[a];l?e.setAttributeNS(l,t,s):e.setAttribute(t,s)}else e.setAttribute(t,s)}removeAttribute(e,t,s){if(s){const a=Ie[s];a?e.removeAttributeNS(a,t):e.removeAttribute(`${s}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,s,a){a&(v.JOm.DashCase|v.JOm.Important)?e.style.setProperty(t,s,a&v.JOm.Important?"important":""):e.style[t]=s}removeStyle(e,t,s){s&v.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,s){e[t]=s}setValue(e,t){e.nodeValue=t}listen(e,t,s){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Wd(s)):this.eventManager.addEventListener(e,t,Wd(s))}}class js extends Gi{constructor(e,t,s,a){super(e),this.component=s;const l=Us(a+"-"+s.id,s.styles,[]);t.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(vt,a+"-"+s.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(vt,n)}(a+"-"+s.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const s=super.createElement(e,t);return super.setAttribute(s,this.contentAttr,""),s}}class bi extends Gi{constructor(e,t,s,a){super(e),this.sharedStylesHost=t,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Us(a.id,a.styles,[]);for(let p=0;p<l.length;p++){const _=document.createElement("style");_.textContent=l[p],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,s){return super.insertBefore(this.nodeOrShadowRoot(e),t,s)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Il=(()=>{class n extends vo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,s,a){return t.addEventListener(s,a,!1),()=>this.removeEventListener(t,s,a)}removeEventListener(t,s,a){return t.removeEventListener(s,a)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(me))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const us=["alt","control","meta","shift"],rc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ka={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Lr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Wr=(()=>{class n extends vo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,s,a){const l=n.parseEventName(s),p=n.eventCallback(l.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,l.domEventName,p))}static parseEventName(t){const s=t.toLowerCase().split("."),a=s.shift();if(0===s.length||"keydown"!==a&&"keyup"!==a)return null;const l=n._normalizeKey(s.pop());let p="";if(us.forEach(b=>{const A=s.indexOf(b);A>-1&&(s.splice(A,1),p+=b+".")}),p+=l,0!=s.length||0===l.length)return null;const _={};return _.domEventName=a,_.fullKey=p,_}static getEventFullKey(t){let s="",a=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Ka.hasOwnProperty(e)&&(e=Ka[e]))}return rc[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),us.forEach(l=>{l!=a&&Lr[l](t)&&(s+=l+".")}),s+=a,s}static eventCallback(t,s,a){return l=>{n.getEventFullKey(l)===t&&a.runGuarded(()=>s(l))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(me))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const ac=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:"browser"},{provide:v.g9A,useValue:function(){Ha.makeCurrent(),bt.init()},multi:!0},{provide:me,useFactory:function(){return(0,v.RDi)(document),document},deps:[]}]),Bs=[[],{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function(){return new v.qLn},deps:[]},{provide:ss,useClass:Il,multi:!0,deps:[me,v.R0b,v.Lbi]},{provide:ss,useClass:Wr,multi:!0,deps:[me]},[],{provide:as,useClass:as,deps:[Vs,os,v.AFp]},{provide:v.FYo,useExisting:as},{provide:Zu,useExisting:os},{provide:os,useClass:os,deps:[me]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b]},{provide:Vs,useClass:Vs,deps:[ss,v.R0b]},{provide:$a,useClass:Jo,deps:[]},[]];let Xa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:v.AFp,useValue:t.appId},{provide:Wu,useExisting:v.AFp},$d]}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(n,12))},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:Bs,imports:[ns,v.hGG]}),n})();"undefined"!=typeof window&&window;var Ze=F(5917),_n=F(7574),cr=F(9773);function li(n,e){return(0,cr.zg)(n,e,1)}var vr=F(7393);function lr(n,e){return function(s){return s.lift(new fc(n,e))}}class fc{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Er(e,this.predicate,this.thisArg))}}class Er extends vr.L{constructor(e,t,s){super(e),this.predicate=t,this.thisArg=s,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(s){return void this.destination.error(s)}t&&this.destination.next(e)}}var rt=F(8002);class Xd{}class Co{}class zi{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const s=t.indexOf(":");if(s>0){const a=t.slice(0,s),l=a.toLowerCase(),p=t.slice(s+1).trim();this.maybeSetNormalizedName(a,l),this.headers.has(l)?this.headers.get(l).push(p):this.headers.set(l,[p])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let s=e[t];const a=t.toLowerCase();"string"==typeof s&&(s=[s]),s.length>0&&(this.headers.set(a,s),this.maybeSetNormalizedName(t,a))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof zi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new zi;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof zi?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let s=e.value;if("string"==typeof s&&(s=[s]),0===s.length)return;this.maybeSetNormalizedName(e.name,t);const a=("a"===e.op?this.headers.get(t):void 0)||[];a.push(...s),this.headers.set(t,a);break;case"d":const l=e.value;if(l){let p=this.headers.get(t);if(!p)return;p=p.filter(_=>-1===l.indexOf(_)),0===p.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,p)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class An{encodeKey(e){return $s(e)}encodeValue(e){return $s(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Dl=/%(\d[a-f0-9])/gi,ia={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function $s(n){return encodeURIComponent(n).replace(Dl,(e,t)=>{var s;return null!==(s=ia[t])&&void 0!==s?s:e})}function pc(n){return`${n}`}class cs{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new An,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(a=>{const l=a.indexOf("="),[p,_]=-1==l?[e.decodeKey(a),""]:[e.decodeKey(a.slice(0,l)),e.decodeValue(a.slice(l+1))],b=t.get(p)||[];b.push(_),t.set(p,b)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const s=e.fromObject[t];this.map.set(t,Array.isArray(s)?s:[s])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(s=>{const a=e[s];Array.isArray(a)?a.forEach(l=>{t.push({param:s,value:l,op:"a"})}):t.push({param:s,value:a,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(s=>t+"="+this.encoder.encodeValue(s)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new cs({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(pc(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let s=this.map.get(e.param)||[];const a=s.indexOf(pc(e.value));-1!==a&&s.splice(a,1),s.length>0?this.map.set(e.param,s):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class sa{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function mc(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Hs(n){return"undefined"!=typeof Blob&&n instanceof Blob}function Wi(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Ci{constructor(e,t,s,a){let l;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==s?s:null,l=a):l=s,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new zi),this.context||(this.context=new sa),this.params){const p=this.params.toString();if(0===p.length)this.urlWithParams=t;else{const _=t.indexOf("?");this.urlWithParams=t+(-1===_?"?":_<t.length-1?"&":"")+p}}else this.params=new cs,this.urlWithParams=t}serializeBody(){return null===this.body?null:mc(this.body)||Hs(this.body)||Wi(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof cs?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Wi(this.body)?null:Hs(this.body)?this.body.type||null:mc(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof cs?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const s=e.method||this.method,a=e.url||this.url,l=e.responseType||this.responseType,p=void 0!==e.body?e.body:this.body,_=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,b=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let A=e.headers||this.headers,M=e.params||this.params;const O=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(A=Object.keys(e.setHeaders).reduce((q,W)=>q.set(W,e.setHeaders[W]),A)),e.setParams&&(M=Object.keys(e.setParams).reduce((q,W)=>q.set(W,e.setParams[W]),M)),new Ci(s,a,p,{params:M,headers:A,context:O,reportProgress:b,responseType:l,withCredentials:_})}}var nn=(()=>((nn=nn||{})[nn.Sent=0]="Sent",nn[nn.UploadProgress=1]="UploadProgress",nn[nn.ResponseHeader=2]="ResponseHeader",nn[nn.DownloadProgress=3]="DownloadProgress",nn[nn.Response=4]="Response",nn[nn.User=5]="User",nn))();class oa{constructor(e,t=200,s="OK"){this.headers=e.headers||new zi,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||s,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class zs extends oa{constructor(e={}){super(e),this.type=nn.ResponseHeader}clone(e={}){return new zs({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ru extends oa{constructor(e={}){super(e),this.type=nn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ru({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Tl extends oa{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function yc(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let eh=(()=>{class n{constructor(t){this.handler=t}request(t,s,a={}){let l;if(t instanceof Ci)l=t;else{let b,A;b=a.headers instanceof zi?a.headers:new zi(a.headers),a.params&&(A=a.params instanceof cs?a.params:new cs({fromObject:a.params})),l=new Ci(t,s,void 0!==a.body?a.body:null,{headers:b,context:a.context,params:A,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials})}const p=(0,Ze.of)(l).pipe(li(b=>this.handler.handle(b)));if(t instanceof Ci||"events"===a.observe)return p;const _=p.pipe(lr(b=>b instanceof ru));switch(a.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return _.pipe((0,rt.U)(b=>{if(null!==b.body&&!(b.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return b.body}));case"blob":return _.pipe((0,rt.U)(b=>{if(null!==b.body&&!(b.body instanceof Blob))throw new Error("Response is not a Blob.");return b.body}));case"text":return _.pipe((0,rt.U)(b=>{if(null!==b.body&&"string"!=typeof b.body)throw new Error("Response is not a string.");return b.body}));case"json":default:return _.pipe((0,rt.U)(b=>b.body))}case"response":return _;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(t,s={}){return this.request("DELETE",t,s)}get(t,s={}){return this.request("GET",t,s)}head(t,s={}){return this.request("HEAD",t,s)}jsonp(t,s){return this.request("JSONP",t,{params:(new cs).append(s,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,s={}){return this.request("OPTIONS",t,s)}patch(t,s,a={}){return this.request("PATCH",t,yc(a,s))}post(t,s,a={}){return this.request("POST",t,yc(a,s))}put(t,s,a={}){return this.request("PUT",t,yc(a,s))}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Xd))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class Kf{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Qt=new v.OlP("HTTP_INTERCEPTORS");let Zf=(()=>{class n{intercept(t,s){return s.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const ep=/^\)\]\}',?\n/;let Sl=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new _n.y(s=>{const a=this.xhrFactory.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((W,de)=>a.setRequestHeader(W,de.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const W=t.detectContentTypeHeader();null!==W&&a.setRequestHeader("Content-Type",W)}if(t.responseType){const W=t.responseType.toLowerCase();a.responseType="json"!==W?W:"text"}const l=t.serializeBody();let p=null;const _=()=>{if(null!==p)return p;const W=1223===a.status?204:a.status,de=a.statusText||"OK",Pe=new zi(a.getAllResponseHeaders()),je=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(a)||t.url;return p=new zs({headers:Pe,status:W,statusText:de,url:je}),p},b=()=>{let{headers:W,status:de,statusText:Pe,url:je}=_(),dt=null;204!==de&&(dt=void 0===a.response?a.responseText:a.response),0===de&&(de=dt?200:0);let xt=de>=200&&de<300;if("json"===t.responseType&&"string"==typeof dt){const Tn=dt;dt=dt.replace(ep,"");try{dt=""!==dt?JSON.parse(dt):null}catch(Ot){dt=Tn,xt&&(xt=!1,dt={error:Ot,text:dt})}}xt?(s.next(new ru({body:dt,headers:W,status:de,statusText:Pe,url:je||void 0})),s.complete()):s.error(new Tl({error:dt,headers:W,status:de,statusText:Pe,url:je||void 0}))},A=W=>{const{url:de}=_(),Pe=new Tl({error:W,status:a.status||0,statusText:a.statusText||"Unknown Error",url:de||void 0});s.error(Pe)};let M=!1;const O=W=>{M||(s.next(_()),M=!0);let de={type:nn.DownloadProgress,loaded:W.loaded};W.lengthComputable&&(de.total=W.total),"text"===t.responseType&&!!a.responseText&&(de.partialText=a.responseText),s.next(de)},q=W=>{let de={type:nn.UploadProgress,loaded:W.loaded};W.lengthComputable&&(de.total=W.total),s.next(de)};return a.addEventListener("load",b),a.addEventListener("error",A),a.addEventListener("timeout",A),a.addEventListener("abort",A),t.reportProgress&&(a.addEventListener("progress",O),null!==l&&a.upload&&a.upload.addEventListener("progress",q)),a.send(l),s.next({type:nn.Sent}),()=>{a.removeEventListener("error",A),a.removeEventListener("abort",A),a.removeEventListener("load",b),a.removeEventListener("timeout",A),t.reportProgress&&(a.removeEventListener("progress",O),null!==l&&a.upload&&a.upload.removeEventListener("progress",q)),a.readyState!==a.DONE&&a.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(v.LFG($a))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const aa=new v.OlP("XSRF_COOKIE_NAME"),tp=new v.OlP("XSRF_HEADER_NAME");class vn{}let _c=(()=>{class n{constructor(t,s,a){this.doc=t,this.platform=s,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ct(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(me),v.LFG(v.Lbi),v.LFG(aa))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),ua=(()=>{class n{constructor(t,s){this.tokenService=t,this.headerName=s}intercept(t,s){const a=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||a.startsWith("http://")||a.startsWith("https://"))return s.handle(t);const l=this.tokenService.getToken();return null!==l&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,l)})),s.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(vn),v.LFG(tp))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),su=(()=>{class n{constructor(t,s){this.backend=t,this.injector=s,this.chain=null}handle(t){if(null===this.chain){const s=this.injector.get(Qt,[]);this.chain=s.reduceRight((a,l)=>new Kf(a,l),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Co),v.LFG(v.zs3))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),Ti=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:ua,useClass:Zf}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:aa,useValue:t.cookieName}:[],t.headerName?{provide:tp,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[ua,{provide:Qt,useExisting:ua,multi:!0},{provide:vn,useClass:_c},{provide:aa,useValue:"XSRF-TOKEN"},{provide:tp,useValue:"X-XSRF-TOKEN"}]}),n})(),Si=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[eh,{provide:Xd,useClass:su},Sl,{provide:Co,useExisting:Sl}],imports:[[Ti.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();function ls(n){return!!n&&(n instanceof _n.y||"function"==typeof n.lift&&"function"==typeof n.subscribe)}var nh=F(9796),vc=F(1555),Rn=F(4402);function Ec(n,e){return new _n.y(t=>{const s=n.length;if(0===s)return void t.complete();const a=new Array(s);let l=0,p=0;for(let _=0;_<s;_++){const b=(0,Rn.D)(n[_]);let A=!1;t.add(b.subscribe({next:M=>{A||(A=!0,p++),a[_]=M},error:M=>t.error(M),complete:()=>{l++,(l===s||!A)&&(p===s&&t.next(e?e.reduce((M,O,q)=>(M[O]=a[q],M),{}):a),t.complete())}}))}})}var I=F(3282);function x(...n){return(0,I.J)(1)((0,Ze.of)(...n))}var U=F(9193);function Z(n){return new _n.y(e=>{let t;try{t=n()}catch(a){return void e.error(a)}return(t?(0,Rn.D)(t):(0,U.c)()).subscribe(e)})}const Ce=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Fe(n){return e=>0===n?(0,U.c)():e.lift(new Be(n))}class Be{constructor(e){if(this.total=e,this.total<0)throw new Ce}call(e,t){return t.subscribe(new Lt(e,this.total))}}class Lt extends vr.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,s=++this.count;s<=t&&(this.destination.next(e),s===t&&(this.destination.complete(),this.unsubscribe()))}}var Ct=F(9765),Qn=F(7771),Jn=F(5319),xn=F(309),ds=F(7971),To=F(8858);class qi extends Ct.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,s){super(),this.scheduler=s,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new hs(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,s=t?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,l=s.length;let p;if(this.closed)throw new ds.N;if(this.isStopped||this.hasError?p=Jn.w.EMPTY:(this.observers.push(e),p=new To.W(this,e)),a&&e.add(e=new xn.ht(e,a)),t)for(let _=0;_<l&&!e.closed;_++)e.next(s[_]);else for(let _=0;_<l&&!e.closed;_++)e.next(s[_].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),p}_getNow(){return(this.scheduler||Qn.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,s=this._windowTime,a=this._events,l=a.length;let p=0;for(;p<l&&!(e-a[p].time<s);)p++;return l>t&&(p=Math.max(p,l-t)),p>0&&a.splice(0,p),a}}class hs{constructor(e,t){this.time=e,this.value=t}}function fs(n,e,t){let s;return s=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},a=>a.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:s}){let a,p,l=0,_=!1,b=!1;return function(M){let O;l++,!a||_?(_=!1,a=new qi(n,e,s),O=a.subscribe(this),p=M.subscribe({next(q){a.next(q)},error(q){_=!0,a.error(q)},complete(){b=!0,p=void 0,a.complete()}}),b&&(p=void 0)):O=a.subscribe(this),this.add(()=>{l--,O.unsubscribe(),O=void 0,p&&!b&&t&&0===l&&(p.unsubscribe(),p=void 0,a=void 0)})}}(s))}var Ws=F(5345);function wr(n,e){return"function"==typeof e?t=>t.pipe(wr((s,a)=>(0,Rn.D)(n(s,a)).pipe((0,rt.U)((l,p)=>e(s,l,a,p))))):t=>t.lift(new bc(n))}class bc{constructor(e){this.project=e}call(e,t){return t.subscribe(new Al(e,this.project))}}class Al extends Ws.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const s=this.index++;try{t=this.project(e,s)}catch(a){return void this.destination.error(a)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const s=new Ws.IY(this),a=this.destination;a.add(s),this.innerSubscription=(0,Ws.ft)(e,s),this.innerSubscription!==s&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}class ps{}let ih=(()=>{class n extends ps{getTranslation(t){return(0,Ze.of)({})}}return n.\u0275fac=function(){let e;return function(s){return(e||(e=v.n5z(n)))(s||n)}}(),n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class ln{}let Rl=(()=>{class n{handle(t){return t.key}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();function rp(n,e){if(n===e)return!0;if(null===n||null===e)return!1;if(n!=n&&e!=e)return!0;let a,l,p,t=typeof n;if(t==typeof e&&"object"==t){if(!Array.isArray(n)){if(Array.isArray(e))return!1;for(l in p=Object.create(null),n){if(!rp(n[l],e[l]))return!1;p[l]=!0}for(l in e)if(!(l in p)&&void 0!==e[l])return!1;return!0}if(!Array.isArray(e))return!1;if((a=n.length)==e.length){for(l=0;l<a;l++)if(!rp(n[l],e[l]))return!1;return!0}}return!1}function Kr(n){return null!=n}function la(n){return n&&"object"==typeof n&&!Array.isArray(n)}function fm(n,e){let t=Object.assign({},n);return la(n)&&la(e)&&Object.keys(e).forEach(s=>{la(e[s])?s in n?t[s]=fm(n[s],e[s]):Object.assign(t,{[s]:e[s]}):Object.assign(t,{[s]:e[s]})}),t}class xl{}let Nl=(()=>{class n extends xl{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(t,s){let a;return a="string"==typeof t?this.interpolateString(t,s):"function"==typeof t?this.interpolateFunction(t,s):t,a}getValue(t,s){let a="string"==typeof s?s.split("."):[s];s="";do{s+=a.shift(),!Kr(t)||!Kr(t[s])||"object"!=typeof t[s]&&a.length?a.length?s+=".":t=void 0:(t=t[s],s="")}while(a.length);return t}interpolateFunction(t,s){return t(s)}interpolateString(t,s){return s?t.replace(this.templateMatcher,(a,l)=>{let p=this.getValue(s,l);return Kr(p)?p:a}):t}}return n.\u0275fac=function(){let e;return function(s){return(e||(e=v.n5z(n)))(s||n)}}(),n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class ip{}let ou=(()=>{class n extends ip{compile(t,s){return t}compileTranslations(t,s){return t}}return n.\u0275fac=function(){let e;return function(s){return(e||(e=v.n5z(n)))(s||n)}}(),n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class Ki{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new v.vpe,this.onLangChange=new v.vpe,this.onDefaultLangChange=new v.vpe}}const Ic=new v.OlP("USE_STORE"),qs=new v.OlP("USE_DEFAULT_LANG"),Ml=new v.OlP("DEFAULT_LANGUAGE"),sh=new v.OlP("USE_EXTEND");let da=(()=>{class n{constructor(t,s,a,l,p,_=!0,b=!1,A=!1,M){this.store=t,this.currentLoader=s,this.compiler=a,this.parser=l,this.missingTranslationHandler=p,this.useDefaultLang=_,this.isolate=b,this.extend=A,this.pending=!1,this._onTranslationChange=new v.vpe,this._onLangChange=new v.vpe,this._onDefaultLangChange=new v.vpe,this._langs=[],this._translations={},this._translationRequests={},M&&this.setDefaultLang(M)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(t){this.isolate?this._currentLang=t:this.store.currentLang=t}get langs(){return this.isolate?this._langs:this.store.langs}set langs(t){this.isolate?this._langs=t:this.store.langs=t}get translations(){return this.isolate?this._translations:this.store.translations}set translations(t){this.isolate?this._translations=t:this.store.translations=t}setDefaultLang(t){if(t===this.defaultLang)return;let s=this.retrieveTranslations(t);void 0!==s?(null==this.defaultLang&&(this.defaultLang=t),s.pipe(Fe(1)).subscribe(a=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(t===this.currentLang)return(0,Ze.of)(this.translations[t]);let s=this.retrieveTranslations(t);return void 0!==s?(this.currentLang||(this.currentLang=t),s.pipe(Fe(1)).subscribe(a=>{this.changeLang(t)}),s):(this.changeLang(t),(0,Ze.of)(this.translations[t]))}retrieveTranslations(t){let s;return(void 0===this.translations[t]||this.extend)&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),s=this._translationRequests[t]),s}getTranslation(t){this.pending=!0;const s=this.currentLoader.getTranslation(t).pipe(fs(1),Fe(1));return this.loadingTranslations=s.pipe((0,rt.U)(a=>this.compiler.compileTranslations(a,t)),fs(1),Fe(1)),this.loadingTranslations.subscribe({next:a=>{this.translations[t]=this.extend&&this.translations[t]?Object.assign(Object.assign({},a),this.translations[t]):a,this.updateLangs(),this.pending=!1},error:a=>{this.pending=!1}}),s}setTranslation(t,s,a=!1){s=this.compiler.compileTranslations(s,t),this.translations[t]=(a||this.extend)&&this.translations[t]?fm(this.translations[t],s):s,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){t.forEach(s=>{-1===this.langs.indexOf(s)&&this.langs.push(s)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(t,s,a){let l;if(s instanceof Array){let p={},_=!1;for(let b of s)p[b]=this.getParsedResult(t,b,a),ls(p[b])&&(_=!0);return _?function(...n){if(1===n.length){const e=n[0];if((0,nh.k)(e))return Ec(e,null);if((0,vc.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Ec(t.map(s=>e[s]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Ec(n=1===n.length&&(0,nh.k)(n[0])?n[0]:n,null).pipe((0,rt.U)(t=>e(...t)))}return Ec(n,null)}(s.map(A=>ls(p[A])?p[A]:(0,Ze.of)(p[A]))).pipe((0,rt.U)(A=>{let M={};return A.forEach((O,q)=>{M[s[q]]=O}),M})):p}if(t&&(l=this.parser.interpolate(this.parser.getValue(t,s),a)),void 0===l&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(l=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],s),a)),void 0===l){let p={key:s,translateService:this};void 0!==a&&(p.interpolateParams=a),l=this.missingTranslationHandler.handle(p)}return void 0!==l?l:s}get(t,s){if(!Kr(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(li(a=>ls(a=this.getParsedResult(a,t,s))?a:(0,Ze.of)(a)));{let a=this.getParsedResult(this.translations[this.currentLang],t,s);return ls(a)?a:(0,Ze.of)(a)}}getStreamOnTranslationChange(t,s){if(!Kr(t)||!t.length)throw new Error('Parameter "key" required');return x(Z(()=>this.get(t,s)),this.onTranslationChange.pipe(wr(a=>{const l=this.getParsedResult(a.translations,t,s);return"function"==typeof l.subscribe?l:(0,Ze.of)(l)})))}stream(t,s){if(!Kr(t)||!t.length)throw new Error('Parameter "key" required');return x(Z(()=>this.get(t,s)),this.onLangChange.pipe(wr(a=>{const l=this.getParsedResult(a.translations,t,s);return ls(l)?l:(0,Ze.of)(l)})))}instant(t,s){if(!Kr(t)||!t.length)throw new Error('Parameter "key" required');let a=this.getParsedResult(this.translations[this.currentLang],t,s);if(ls(a)){if(t instanceof Array){let l={};return t.forEach((p,_)=>{l[t[_]]=t[_]}),l}return t}return a}set(t,s,a=this.currentLang){this.translations[a][t]=this.compiler.compile(s,a),this.updateLangs(),this.onTranslationChange.emit({lang:a,translations:this.translations[a]})}changeLang(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),null==this.defaultLang&&this.changeDefaultLang(t)}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.getTranslation(t)}resetLang(t){this._translationRequests[t]=void 0,this.translations[t]=void 0}getBrowserLang(){if("undefined"==typeof window||void 0===window.navigator)return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,void 0!==t?(-1!==t.indexOf("-")&&(t=t.split("-")[0]),-1!==t.indexOf("_")&&(t=t.split("_")[0]),t):void 0}getBrowserCultureLang(){if("undefined"==typeof window||void 0===window.navigator)return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,t}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Ki),v.LFG(ps),v.LFG(ip),v.LFG(xl),v.LFG(ln),v.LFG(qs),v.LFG(Ic),v.LFG(sh),v.LFG(Ml))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),oh=(()=>{class n{constructor(t,s){this.translate=t,this._ref=s,this.value="",this.lastKey=null,this.lastParams=[]}updateValue(t,s,a){let l=p=>{this.value=void 0!==p?p:t,this.lastKey=t,this._ref.markForCheck()};if(a){let p=this.translate.getParsedResult(a,t,s);ls(p.subscribe)?p.subscribe(l):l(p)}this.translate.get(t,s).subscribe(l)}transform(t,...s){if(!t||!t.length)return t;if(rp(t,this.lastKey)&&rp(s,this.lastParams))return this.value;let a;if(Kr(s[0])&&s.length)if("string"==typeof s[0]&&s[0].length){let l=s[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{a=JSON.parse(l)}catch(p){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${s[0]}`)}}else"object"==typeof s[0]&&!Array.isArray(s[0])&&(a=s[0]);return this.lastKey=t,this.lastParams=s,this.updateValue(t,a),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(l=>{this.lastKey&&l.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(t,a,l.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(l=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,a,l.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,a))})),this.value}_dispose(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(da,16),v.Y36(v.sBO,16))},n.\u0275pipe=v.Yjl({name:"translate",type:n,pure:!1}),n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),ah=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[t.loader||{provide:ps,useClass:ih},t.compiler||{provide:ip,useClass:ou},t.parser||{provide:xl,useClass:Nl},t.missingTranslationHandler||{provide:ln,useClass:Rl},Ki,{provide:Ic,useValue:t.isolate},{provide:qs,useValue:t.useDefaultLang},{provide:sh,useValue:t.extend},{provide:Ml,useValue:t.defaultLanguage},da]}}static forChild(t={}){return{ngModule:n,providers:[t.loader||{provide:ps,useClass:ih},t.compiler||{provide:ip,useClass:ou},t.parser||{provide:xl,useClass:Nl},t.missingTranslationHandler||{provide:ln,useClass:Rl},{provide:Ic,useValue:t.isolate},{provide:qs,useValue:t.useDefaultLang},{provide:sh,useValue:t.extend},{provide:Ml,useValue:t.defaultLanguage},da]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({}),n})();var Ai=F(8939),Dc=F(3637),Nn=F(2257),sp=F(4869);function uh(...n){const e=n[n.length-1];return(0,sp.K)(e)?(n.pop(),t=>x(n,t,e)):t=>x(n,t)}function ch(){return n=>n.lift(new pm)}class pm{call(e,t){return t.subscribe(new gm(e))}}class gm extends vr.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function Pl(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(a){return a.lift(new L_(n,e,t))}}class L_{constructor(e,t,s=!1){this.accumulator=e,this.seed=t,this.hasSeed=s}call(e,t){return t.subscribe(new F_(e,this.accumulator,this.seed,this.hasSeed))}}class F_ extends vr.L{constructor(e,t,s,a){super(e),this.accumulator=t,this._seed=s,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let s;try{s=this.accumulator(this.seed,e,t)}catch(a){this.destination.error(a)}this.seed=s,this.destination.next(s)}}class op{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Sc(e,this.compare,this.keySelector))}}class Sc extends vr.L{constructor(e,t,s){super(e),this.keySelector=s,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:a}=this;t=a?a(e):e}catch(a){return this.destination.error(a)}let s=!1;if(this.hasKey)try{const{compare:a}=this;s=a(this.key,t)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=t,this.destination.next(e))}}F(941);var Ge,U_=F(3394),pe=F(8239),Ks=F(8026),Ac=F(3910),So=F(5422),Dt=F(3854),mm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Zr={},ap=ap||{},st=mm||self;function lh(){}function up(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ri(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var dh="closure_uid_"+(1e9*Math.random()>>>0),ym=0;function j_(n,e,t){return n.call.apply(n.bind,arguments)}function B_(n,e,t){if(!n)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function br(n,e,t){return(br=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?j_:B_).apply(null,arguments)}function hh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),n.apply(this,s)}}function Hn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(s,a,l){for(var p=Array(arguments.length-2),_=2;_<arguments.length;_++)p[_-2]=arguments[_];return e.prototype[a].apply(s,p)}}function ha(){this.s=this.s,this.o=this.o}var $_={};ha.prototype.s=!1,ha.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,dh)&&n[dh]||(n[dh]=++ym)}(this);delete $_[n]}},ha.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lp=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},H_=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const s=n.length,a="string"==typeof n?n.split(""):n;for(let l=0;l<s;l++)l in a&&e.call(t,a[l],l,n)};function xc(n){return Array.prototype.concat.apply([],arguments)}function Ol(n){const e=n.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=n[s];return t}return[]}function di(n){return/^[\s\xa0]*$/.test(n)}var Yr,Nc=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Fr(n,e){return-1!=n.indexOf(e)}function fh(n,e){return n<e?-1:n>e?1:0}e:{var au=st.navigator;if(au){var G_=au.userAgent;if(G_){Yr=G_;break e}}Yr=""}function _m(n,e,t){for(const s in n)e.call(t,n[s],s,n)}function Mc(n){const e={};for(const t in n)e[t]=n[t];return e}var ph="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pc(n,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)n[t]=s[t];for(let l=0;l<ph.length;l++)t=ph[l],Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}}function vm(n){return vm[" "](n),n}vm[" "]=lh;var Fl,n,gh=Fr(Yr,"Opera"),Oc=Fr(Yr,"Trident")||Fr(Yr,"MSIE"),Em=Fr(Yr,"Edge"),kl=Em||Oc,wm=Fr(Yr,"Gecko")&&!(Fr(Yr.toLowerCase(),"webkit")&&!Fr(Yr,"Edge"))&&!(Fr(Yr,"Trident")||Fr(Yr,"MSIE"))&&!Fr(Yr,"Edge"),bm=Fr(Yr.toLowerCase(),"webkit")&&!Fr(Yr,"Edge");function Ll(){var n=st.document;return n?n.documentMode:void 0}e:{var Vl="",mh=(n=Yr,wm?/rv:([^\);]+)(\)|;)/.exec(n):Em?/Edge\/([\d\.]+)/.exec(n):Oc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):bm?/WebKit\/(\S+)/.exec(n):gh?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(mh&&(Vl=mh?mh[1]:""),Oc){var rn=Ll();if(null!=rn&&rn>parseFloat(Vl)){Fl=String(rn);break e}}Fl=Vl}var z_={};function W_(){return e=z_,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=Nc(String(Fl)).split("."),t=Nc("9").split("."),s=Math.max(e.length,t.length);for(let p=0;0==n&&p<s;p++){var a=e[p]||"",l=t[p]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;n=fh(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||fh(0==a[2].length,0==l[2].length)||fh(a[2],l[2]),a=a[3],l=l[3]}while(0==n)}return 0<=n}();var e}var q_=st.document&&Oc&&(Ll()||parseInt(Fl,10))||void 0,K_=function(){if(!st.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{st.addEventListener("test",lh,e),st.removeEventListener("test",lh,e)}catch(t){}return n}();function Xn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function jl(n,e){if(Xn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,s=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(wm){e:{try{vm(e.nodeName);var a=!0;break e}catch(l){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Z_[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&jl.Z.h.call(this)}}Xn.prototype.h=function(){this.defaultPrevented=!0},Hn(jl,Xn);var Z_={2:"touch",3:"pen",4:"mouse"};jl.prototype.h=function(){jl.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var yh="closure_listenable_"+(1e6*Math.random()|0),Y_=0;function Bl(n,e,t,s,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=a,this.key=++Y_,this.ca=this.fa=!1}function dr(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function kc(n){this.src=n,this.g={},this.h=0}function _h(n,e){var t=e.type;if(t in n.g){var l,s=n.g[t],a=lp(s,e);(l=0<=a)&&Array.prototype.splice.call(s,a,1),l&&(dr(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function cu(n,e,t,s){for(var a=0;a<n.length;++a){var l=n[a];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==s)return a}return-1}kc.prototype.add=function(n,e,t,s,a){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var p=cu(n,e,s,a);return-1<p?(e=n[p],t||(e.fa=!1)):((e=new Bl(e,this.src,l,!!s,a)).fa=t,n.push(e)),e};var hr="closure_lm_"+(1e6*Math.random()|0),fa={};function vh(n,e,t,s,a){if(s&&s.once)return hp(n,e,t,s,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)vh(n,e[l],t,s,a);return null}return t=Qr(t),n&&n[yh]?n.N(e,t,Ri(s)?!!s.capture:!!s,a):Im(n,e,t,!1,s,a)}function Im(n,e,t,s,a,l){if(!e)throw Error("Invalid event type");var p=Ri(a)?!!a.capture:!!a,_=gp(n);if(_||(n[hr]=_=new kc(n)),(t=_.add(e,t,s,p,l)).proxy)return t;if(s=function(){var e=pp;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=s,s.src=n,s.listener=t,n.addEventListener)K_||(a=p),void 0===a&&(a=!1),n.addEventListener(e.toString(),s,a);else if(n.attachEvent)n.attachEvent(Eh(e.toString()),s);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(s)}return t}function hp(n,e,t,s,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)hp(n,e[l],t,s,a);return null}return t=Qr(t),n&&n[yh]?n.O(e,t,Ri(s)?!!s.capture:!!s,a):Im(n,e,t,!0,s,a)}function fp(n,e,t,s,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)fp(n,e[l],t,s,a);else s=Ri(s)?!!s.capture:!!s,t=Qr(t),n&&n[yh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=cu(l=n.g[e],t,s,a))&&(dr(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=gp(n))&&(e=n.g[e.toString()],n=-1,e&&(n=cu(e,t,s,a)),(t=-1<n?e[n]:null)&&Lc(t))}function Lc(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[yh])_h(e.i,n);else{var t=n.type,s=n.proxy;e.removeEventListener?e.removeEventListener(t,s,n.capture):e.detachEvent?e.detachEvent(Eh(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=gp(e))?(_h(t,n),0==t.h&&(t.src=null,e[hr]=null)):dr(n)}}}function Eh(n){return n in fa?fa[n]:fa[n]="on"+n}function pp(n,e){if(n.ca)n=!0;else{e=new jl(e,this);var t=n.listener,s=n.ia||n.src;n.fa&&Lc(n),n=t.call(s,e)}return n}function gp(n){return(n=n[hr])instanceof kc?n:null}var $l="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qr(n){return"function"==typeof n?n:(n[$l]||(n[$l]=function(e){return n.handleEvent(e)}),n[$l])}function En(){ha.call(this),this.i=new kc(this),this.P=this,this.I=null}function Gn(n,e){var t,s=n.I;if(s)for(t=[];s;s=s.I)t.push(s);if(n=n.P,s=e.type||e,"string"==typeof e)e=new Xn(e,n);else if(e instanceof Xn)e.target=e.target||n;else{var a=e;Pc(e=new Xn(s,n),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var p=e.g=t[l];a=Hl(p,s,!0,e)&&a}if(a=Hl(p=e.g=n,s,!0,e)&&a,a=Hl(p,s,!1,e)&&a,t)for(l=0;l<t.length;l++)a=Hl(p=e.g=t[l],s,!1,e)&&a}function Hl(n,e,t,s){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var p=e[l];if(p&&!p.ca&&p.capture==t){var _=p.listener,b=p.ia||p.src;p.fa&&_h(n.i,p),a=!1!==_.call(b,s)&&a}}return a&&!s.defaultPrevented}Hn(En,ha),En.prototype[yh]=!0,En.prototype.removeEventListener=function(n,e,t,s){fp(this,n,e,t,s)},En.prototype.M=function(){if(En.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],s=0;s<t.length;s++)dr(t[s]);delete n.g[e],n.h--}}this.I=null},En.prototype.N=function(n,e,t,s){return this.i.add(String(n),e,!1,t,s)},En.prototype.O=function(n,e,t,s){return this.i.add(String(n),e,!0,t,s)};var Gl=st.JSON.stringify;function Cm(){var n=_p;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var mp,Fc=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new J_,n=>n.reset());class J_{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function pa(n){st.setTimeout(()=>{throw n},0)}function Ao(n,e){mp||function(){var n=st.Promise.resolve(void 0);mp=function(){n.then(hi)}}(),yp||(mp(),yp=!0),_p.add(n,e)}var yp=!1,_p=new class{constructor(){this.h=this.g=null}add(e,t){const s=Fc.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function hi(){for(var n;n=Cm();){try{n.h.call(n.g)}catch(t){pa(t)}var e=Fc;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}yp=!1}function Ro(n,e){En.call(this),this.h=n||1,this.g=e||st,this.j=br(this.kb,this),this.l=Date.now()}function Vr(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function wh(n,e,t){if("function"==typeof n)t&&(n=br(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=br(n.handleEvent,n)}return 2147483647<Number(e)?-1:st.setTimeout(n,e||0)}function Zs(n){n.g=wh(()=>{n.g=null,n.i&&(n.i=!1,Zs(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Hn(Ro,En),(Ge=Ro.prototype).da=!1,Ge.S=null,Ge.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Gn(this,"tick"),this.da&&(Vr(this),this.start()))}},Ge.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ge.M=function(){Ro.Z.M.call(this),Vr(this),delete this.g};class zl extends ha{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Zs(this)}M(){super.M(),this.g&&(st.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lu(n){ha.call(this),this.h=n,this.g={}}Hn(lu,ha);var Tm=[];function Wl(n,e,t,s){Array.isArray(t)||(t&&(Tm[0]=t.toString()),t=Tm);for(var a=0;a<t.length;a++){var l=vh(e,t[a],s||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function Sm(n){_m(n.g,function(e,t){this.g.hasOwnProperty(t)&&Lc(e)},n),n.g={}}function bh(){this.g=!0}function m(n,e,t,s){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var s=t[n];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var p=1;p<a.length;p++)a[p]=""}}}return Gl(t)}catch(_){return e}}(n,t)+(s?" "+s:"")})}lu.prototype.M=function(){lu.Z.M.call(this),Sm(this)},lu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bh.prototype.Aa=function(){this.g=!1},bh.prototype.info=function(){};var E={},D=null;function R(){return D=D||new En}function B(n){Xn.call(this,E.Ma,n)}function te(n){const e=R();Gn(e,new B(e,n))}function Ne(n,e){Xn.call(this,E.STAT_EVENT,n),this.stat=e}function Ee(n){const e=R();Gn(e,new Ne(e,n))}function $e(n,e){Xn.call(this,E.Na,n),this.size=e}function He(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return st.setTimeout(function(){n()},e)}E.Ma="serverreachability",Hn(B,Xn),E.STAT_EVENT="statevent",Hn(Ne,Xn),E.Na="timingevent",Hn($e,Xn);var It={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Vn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Zi(){}function vp(){}Zi.prototype.h=null;var Ih,gs={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function jc(){Xn.call(this,"d")}function Bc(){Xn.call(this,"c")}function du(){}function hu(n,e,t,s){this.l=n,this.j=e,this.m=t,this.X=s||1,this.V=new lu(this),this.P=tv,this.W=new Ro(n=kl?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ep}function Ep(){this.i=null,this.g="",this.h=!1}Hn(jc,Xn),Hn(Bc,Xn),Hn(du,Zi),du.prototype.g=function(){return new XMLHttpRequest},du.prototype.i=function(){return{}},Ih=new du;var tv=45e3,ql={},Ch={};function nv(n,e,t){n.K=1,n.v=Th(ga(e)),n.s=t,n.U=!0,rv(n,null)}function rv(n,e){n.F=Date.now(),wp(n),n.A=ga(n.v);var t=n.A,s=n.X;Array.isArray(s)||(s=[String(s)]),Ys(t.h,"t",s),n.C=0,t=n.l.H,n.h=new Ep,n.g=bv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new zl(br(n.Ia,n,n.g),n.O)),Wl(n.V,n.g,"readystatechange",n.gb),e=n.H?Mc(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),te(1),function(n,e,t,s,a,l){n.info(function(){if(n.g)if(l)for(var p="",_=l.split("&"),b=0;b<_.length;b++){var A=_[b].split("=");if(1<A.length){var M=A[0];A=A[1];var O=M.split("_");p=2<=O.length&&"type"==O[1]?p+(M+"=")+A+"&":p+(M+"=redacted&")}}else p=null;else p=l;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Am(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function iv(n,e,t){let a,s=!0;for(;!n.I&&n.C<t.length;){if(a=sv(n,t),a==Ch){4==e&&(n.o=4,Ee(14),s=!1),m(n.j,n.m,null,"[Incomplete Response]");break}if(a==ql){n.o=4,Ee(15),m(n.j,n.m,t,"[Invalid Chunk]"),s=!1;break}m(n.j,n.m,a,null),Rm(n,a)}Am(n)&&a!=Ch&&a!=ql&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ee(16),s=!1),n.i=n.i&&s,s?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Rp(e),e.L=!0,Ee(11))):(m(n.j,n.m,t,"[Invalid Chunked Response]"),ms(n),Dh(n))}function sv(n,e){var t=n.C,s=e.indexOf("\n",t);return-1==s?Ch:(t=Number(e.substring(t,s)),isNaN(t)?ql:(s+=1)+t>e.length?Ch:(e=e.substr(s,t),n.C=s+t,e))}function wp(n){n.Y=Date.now()+n.P,x0(n,n.P)}function x0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=He(br(n.eb,n),e)}function bp(n){n.B&&(st.clearTimeout(n.B),n.B=null)}function Dh(n){0==n.l.G||n.I||Fm(n.l,n)}function ms(n){bp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Vr(n.W),Sm(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Rm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||hv(t.i,n)))if(t.I=n.N,!n.J&&hv(t.i,n)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch(A){s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0])e:if(t.u)t.ta=a[1],0<t.ta-t.U&&37500>a[2]&&t.N&&0==t.A&&!t.v&&(t.v=He(br(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;xp(t),vv(t)}ma(t),Ee(18)}if(1>=dv(t.i)&&t.ka){try{t.ka()}catch(A){}t.ka=void 0}}else yu(t,11)}else if((n.J||t.g==n)&&xp(t),!di(e))for(a=t.Ca.g.parse(e),e=0;e<a.length;e++){let A=a[e];if(t.U=A[0],A=A[1],2==t.G)if("c"==A[0]){t.J=A[1],t.la=A[2];const M=A[3];null!=M&&(t.ma=M,t.h.info("VER="+t.ma));const O=A[4];null!=O&&(t.za=O,t.h.info("SVER="+t.za));const q=A[5];null!=q&&"number"==typeof q&&0<q&&(t.K=s=1.5*q,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;const W=n.g;if(W){const de=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(de){var l=s.i;!l.g&&(Fr(de,"spdy")||Fr(de,"quic")||Fr(de,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(fv(l,l.h),l.h=null))}if(s.D){const Pe=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;Pe&&(s.sa=Pe,wn(s.F,s.D,Pe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var p=n;if((s=t).oa=_u(s,s.H?s.la:null,s.W),p.J){j0(s.i,p);var _=p,b=s.K;b&&_.setTimeout(b),_.B&&(bp(_),wp(_)),s.g=p}else LD(s);0<t.l.length&&Ev(t)}else"stop"!=A[0]&&"close"!=A[0]||yu(t,7);else 3==t.G&&("stop"==A[0]||"close"==A[0]?"stop"==A[0]?yu(t,7):z0(t):"noop"!=A[0]&&t.j&&t.j.wa(A),t.A=0)}te(4)}catch(A){}}function ov(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(up(n)||"string"==typeof n)H_(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(up(n)||"string"==typeof n){t=[];for(var s=n.length,a=0;a<s;a++)t.push(a)}else for(a in t=[],s=0,n)t[s++]=a;a=(s=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(up(n)){for(var e=[],t=n.length,s=0;s<t;s++)e.push(n[s]);return e}for(s in e=[],t=0,n)e[t++]=n[s];return e}(n)).length;for(var l=0;l<a;l++)e.call(void 0,s[l],t&&t[l],n)}}function fu(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(n)if(n instanceof fu)for(t=n.T(),s=0;s<t.length;s++)this.set(t[s],n.get(t[s]));else for(s in n)this.set(s,n[s])}function av(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var s=n.g[e];$c(n.h,s)&&(n.g[t++]=s),e++}n.g.length=t}if(n.i!=n.g.length){var a={};for(t=e=0;e<n.g.length;)$c(a,s=n.g[e])||(n.g[t++]=s,a[s]=1),e++;n.g.length=t}}function $c(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ge=hu.prototype).setTimeout=function(n){this.P=n},Ge.gb=function(n){n=n.target;const e=this.L;e&&3==Hc(n)?e.l():this.Ia(n)},Ge.Ia=function(n){try{if(n==this.g)e:{const M=Hc(this.g);var e=this.g.Da();const O=this.g.ba();if(!(3>M)&&(3!=M||kl||this.g&&(this.h.h||this.g.ga()||yv(this.g)))){this.I||4!=M||7==e||te(8==e||0>=O?3:2),bp(this);var t=this.g.ba();this.N=t;t:if(Am(this)){var s=yv(this.g);n="";var a=s.length,l=4==Hc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ms(this),Dh(this);var p="";break t}this.h.i=new st.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(s[e],{stream:l&&e==a-1});s.splice(0,a),this.h.g+=n,this.C=0,p=this.h.g}else p=this.g.ga();if(this.i=200==t,function(n,e,t,s,a,l,p){n.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+p})}(this.j,this.u,this.A,this.m,this.X,M,t),this.i){if(this.$&&!this.J){t:{if(this.g){var _,b=this.g;if((_=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!di(_)){var A=_;break t}}A=null}if(!(t=A)){this.i=!1,this.o=3,Ee(12),ms(this),Dh(this);break e}m(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Rm(this,t)}this.U?(iv(this,M,p),kl&&this.i&&3==M&&(Wl(this.V,this.W,"tick",this.fb),this.W.start())):(m(this.j,this.m,p,null),Rm(this,p)),4==M&&ms(this),this.i&&!this.I&&(4==M?Fm(this.l,this):(this.i=!1,wp(this)))}else 400==t&&0<p.indexOf("Unknown SID")?(this.o=3,Ee(12)):(this.o=0,Ee(13)),ms(this),Dh(this)}}}catch(M){}},Ge.fb=function(){if(this.g){var n=Hc(this.g),e=this.g.ga();this.C<e.length&&(bp(this),iv(this,n,e),this.i&&4!=n&&wp(this))}},Ge.cancel=function(){this.I=!0,ms(this)},Ge.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(te(3),Ee(17)),ms(this),this.o=2,Dh(this)):x0(this,this.Y-n)},(Ge=fu.prototype).R=function(){av(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ge.T=function(){return av(this),this.g.concat()},Ge.get=function(n,e){return $c(this.h,n)?this.h[n]:e},Ge.set=function(n,e){$c(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ge.forEach=function(n,e){for(var t=this.T(),s=0;s<t.length;s++){var a=t[s],l=this.get(a);n.call(e,l,a,this)}};var uv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function pu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof pu){this.g=void 0!==e?e:n.g,Kl(this,n.j),this.s=n.s,Zl(this,n.i),Ip(this,n.m),this.l=n.l,e=n.h;var t=new Tp;t.i=e.i,e.g&&(t.g=new fu(e.g),t.h=e.h),xm(this,t),this.o=n.o}else n&&(t=String(n).match(uv))?(this.g=!!e,Kl(this,t[1]||"",!0),this.s=Sh(t[2]||""),Zl(this,t[3]||"",!0),Ip(this,t[4]),this.l=Sh(t[5]||"",!0),xm(this,t[6]||"",!0),this.o=Sh(t[7]||"")):(this.g=!!e,this.h=new Tp(null,this.g))}function ga(n){return new pu(n)}function Kl(n,e,t){n.j=t?Sh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Zl(n,e,t){n.i=t?Sh(e,!0):e}function Ip(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function xm(n,e,t){e instanceof Tp?(n.h=e,function(n,e){e&&!n.j&&(gu(n),n.i=null,n.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(k0(this,s),Ys(this,a,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Dp(e,UR)),n.h=new Tp(e,n.g))}function wn(n,e,t){n.h.set(e,t)}function Th(n){return wn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Sh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Dp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,SD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function SD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}pu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Dp(e,cv,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Dp(e,cv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Dp(t,"/"==t.charAt(0)?P0:lv,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Dp(t,O0)),n.join("")};var cv=/[#\/\?@]/g,lv=/[#\?:]/g,P0=/[#\?]/g,UR=/[#\?@]/g,O0=/#/g;function Tp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function gu(n){n.g||(n.g=new fu,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var s=n[t].indexOf("="),a=null;if(0<=s){var l=n[t].substring(0,s);a=n[t].substring(s+1)}else l=n[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function k0(n,e){gu(n),e=Ah(n,e),$c(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,$c((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&av(n)))}function L0(n,e){return gu(n),e=Ah(n,e),$c(n.g.h,e)}function Ys(n,e,t){k0(n,e),0<t.length&&(n.i=null,n.g.set(Ah(n,e),Ol(t)),n.h+=t.length)}function Ah(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function V0(n){this.l=n||RD,n=st.PerformanceNavigationTiming?0<(n=st.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(st.g&&st.g.Ea&&st.g.Ea()&&st.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ge=Tp.prototype).add=function(n,e){gu(this),this.i=null,n=Ah(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ge.forEach=function(n,e){gu(this),this.g.forEach(function(t,s){H_(t,function(a){n.call(e,a,s,this)},this)},this)},Ge.T=function(){gu(this);for(var n=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var a=n[s],l=0;l<a.length;l++)t.push(e[s]);return t},Ge.R=function(n){gu(this);var e=[];if("string"==typeof n)L0(this,n)&&(e=xc(e,this.g.get(Ah(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=xc(e,n[t])}return e},Ge.set=function(n,e){return gu(this),this.i=null,L0(this,n=Ah(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ge.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ge.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],a=encodeURIComponent(String(s));s=this.R(s);for(var l=0;l<s.length;l++){var p=a;""!==s[l]&&(p+="="+encodeURIComponent(String(s[l]))),n.push(p)}}return this.i=n.join("&")};var RD=10;function U0(n){return!!n.h||!!n.g&&n.g.size>=n.j}function dv(n){return n.h?1:n.g?n.g.size:0}function hv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function fv(n,e){n.g?n.g.add(e):n.h=e}function j0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ft(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Ol(n.i)}function Nm(){}function B0(){this.g=new Nm}function Mm(n,e,t){const s=t||"";try{ov(n,function(a,l){let p=a;Ri(a)&&(p=Gl(a)),e.push(s+l+"="+encodeURIComponent(p))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function Sp(n,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch(l){}}function Ap(n){this.l=n.$b||null,this.j=n.ib||!1}function Rh(n,e){En.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=No,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}V0.prototype.cancel=function(){if(this.i=ft(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Nm.prototype.stringify=function(n){return st.JSON.stringify(n,void 0)},Nm.prototype.parse=function(n){return st.JSON.parse(n,void 0)},Hn(Ap,Zi),Ap.prototype.g=function(){return new Rh(this.l,this.j)},Ap.prototype.i=function(n){return function(){return n}}({}),Hn(Rh,En);var No=0;function Pm(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function xh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Yl(n)}function Yl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ge=Rh.prototype).open=function(n,e){if(this.readyState!=No)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Yl(this)},Ge.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||st).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ge.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xh(this)),this.readyState=No},Ge.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Yl(this)),this.g&&(this.readyState=3,Yl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==st.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pm(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ge.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?xh(this):Yl(this),3==this.readyState&&Pm(this)}},Ge.Ua=function(n){this.g&&(this.response=this.responseText=n,xh(this))},Ge.Ta=function(n){this.g&&(this.response=n,xh(this))},Ge.ha=function(){this.g&&xh(this)},Ge.setRequestHeader=function(n,e){this.v.append(n,e)},Ge.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ge.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Rh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var jR=st.JSON.parse;function er(n){En.call(this),this.headers=new fu,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xD,this.K=this.L=!1}Hn(er,En);var xD="",mu=/^https?$/i,Om=["POST","PUT"];function pv(n){return"content-type"==n.toLowerCase()}function ND(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,$0(n),mv(n)}function $0(n){n.D||(n.D=!0,Gn(n,"complete"),Gn(n,"error"))}function gv(n){if(n.h&&void 0!==ap&&(!n.C[1]||4!=Hc(n)||2!=n.ba()))if(n.v&&4==Hc(n))wh(n.Fa,0,n);else if(Gn(n,"readystatechange"),4==Hc(n)){n.h=!1;try{const _=n.ba();e:switch(_){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===_){var a=String(n.H).match(uv)[1]||null;if(!a&&st.self&&st.self.location){var l=st.self.location.protocol;a=l.substr(0,l.length-1)}s=!mu.test(a?a.toLowerCase():"")}t=s}if(t)Gn(n,"complete"),Gn(n,"success");else{n.m=6;try{var p=2<Hc(n)?n.g.statusText:""}catch(b){p=""}n.j=p+" ["+n.ba()+"]",$0(n)}}finally{mv(n)}}}function mv(n,e){if(n.g){H0(n);const t=n.g,s=n.C[0]?lh:null;n.g=null,n.C=null,e||Gn(n,"ready");try{t.onreadystatechange=s}catch(a){}}}function H0(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(st.clearTimeout(n.A),n.A=null)}function Hc(n){return n.g?n.g.readyState:0}function yv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case xD:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function _v(n,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=function(n){let e="";return _m(n,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):wn(n,e,t))}function Ql(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function MD(n){this.za=0,this.l=[],this.h=new bh,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ql("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ql("baseRetryDelayMs",5e3,n),this.$a=Ql("retryDelaySeedMs",1e4,n),this.Ya=Ql("forwardChannelMaxRetries",2,n),this.ra=Ql("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new V0(n&&n.concurrentRequestLimit),this.Ca=new B0,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function z0(n){if(PD(n),3==n.G){var e=n.V++,t=ga(n.F);wn(t,"SID",n.J),wn(t,"RID",e),wn(t,"TYPE","terminate"),Lm(n,t),(e=new hu(n,n.h,e,void 0)).K=2,e.v=Th(ga(t)),t=!1,st.navigator&&st.navigator.sendBeacon&&(t=st.navigator.sendBeacon(e.v.toString(),"")),!t&&st.Image&&((new Image).src=e.v,t=!0),t||(e.g=bv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),wp(e)}K0(n)}function vv(n){n.g&&(Rp(n),n.g.cancel(),n.g=null)}function PD(n){vv(n),n.u&&(st.clearTimeout(n.u),n.u=null),xp(n),n.i.cancel(),n.m&&("number"==typeof n.m&&st.clearTimeout(n.m),n.m=null)}function W0(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Ev(n)}function Ev(n){U0(n.i)||n.m||(n.m=!0,Ao(n.Ha,n),n.C=0)}function OD(n,e){var t;t=e?e.m:n.V++;const s=ga(n.F);wn(s,"SID",n.J),wn(s,"RID",t),wn(s,"AID",n.U),Lm(n,s),n.o&&n.s&&_v(s,n.o,n.s),t=new hu(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=kD(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),fv(n.i,t),nv(t,s,e)}function Lm(n,e){n.j&&ov({},function(t,s){wn(e,s,t)})}function kD(n,e,t){t=Math.min(n.l.length,t);var s=n.j?br(n.j.Oa,n.j,n):null;e:{var a=n.l;let l=-1;for(;;){const p=["count="+t];-1==l?0<t?(l=a[0].h,p.push("ofs="+l)):l=0:p.push("ofs="+l);let _=!0;for(let b=0;b<t;b++){let A=a[b].h;const M=a[b].g;if(A-=l,0>A)l=Math.max(0,a[b].h-100),_=!1;else try{Mm(M,p,"req"+A+"_")}catch(O){s&&s(M)}}if(_){s=p.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,s}function LD(n){n.g||n.u||(n.Y=1,Ao(n.Ga,n),n.A=0)}function ma(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=He(br(n.Ga,n),wv(n,n.A)),n.A++,0))}function Rp(n){null!=n.B&&(st.clearTimeout(n.B),n.B=null)}function q0(n){n.g=new hu(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ga(n.oa);wn(e,"RID","rpc"),wn(e,"SID",n.J),wn(e,"CI",n.N?"0":"1"),wn(e,"AID",n.U),Lm(n,e),wn(e,"TYPE","xmlhttp"),n.o&&n.s&&_v(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Th(ga(e)),t.s=null,t.U=!0,rv(t,n)}function xp(n){null!=n.v&&(st.clearTimeout(n.v),n.v=null)}function Fm(n,e){var t=null;if(n.g==e){xp(n),Rp(n),n.g=null;var s=2}else{if(!hv(n.i,e))return;t=e.D,j0(n.i,e),s=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;Gn(s=R(),new $e(s,t,e,a)),Ev(n)}else LD(n);else if(3==(a=e.o)||0==a&&0<n.I||!(1==s&&function(n,e){return!(dv(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=He(br(n.Ha,n,e),wv(n,n.C)),n.C++,0)))}(n,e)||2==s&&ma(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),a){case 1:yu(n,5);break;case 4:yu(n,10);break;case 3:yu(n,6);break;default:yu(n,2)}}function wv(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function yu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var s=br(n.jb,n);t||(t=new pu("//www.google.com/images/cleardot.gif"),st.location&&"http"==st.location.protocol||Kl(t,"https"),Th(t)),function(n,e){const t=new bh;if(st.Image){const s=new Image;s.onload=hh(Sp,t,s,"TestLoadImage: loaded",!0,e),s.onerror=hh(Sp,t,s,"TestLoadImage: error",!1,e),s.onabort=hh(Sp,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=hh(Sp,t,s,"TestLoadImage: timeout",!1,e),st.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=n}else e(!1)}(t.toString(),s)}else Ee(2);n.G=0,n.j&&n.j.va(e),K0(n),PD(n)}function K0(n){n.G=0,n.I=-1,n.j&&((0!=ft(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Ol(n.l),n.l.length=0),n.j.ua())}function _u(n,e,t){let s=function(n){return n instanceof pu?ga(n):new pu(n,void 0)}(t);if(""!=s.i)e&&Zl(s,e+"."+s.i),Ip(s,s.m);else{const a=st.location;s=function(n,e,t,s){var a=new pu(null,void 0);return n&&Kl(a,n),e&&Zl(a,e),t&&Ip(a,t),s&&(a.l=s),a}(a.protocol,e?e+"."+a.hostname:a.hostname,+a.port,t)}return n.aa&&_m(n.aa,function(a,l){wn(s,l,a)}),t=n.sa,(e=n.D)&&t&&wn(s,e,t),wn(s,"VER",n.ma),Lm(n,s),s}function bv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new er(t&&n.Ba&&!n.qa?new Ap({ib:!0}):n.qa)).L=n.H,e}function Z0(){}function Iv(){if(Oc&&!(10<=Number(q_)))throw Error("Environmental error: no available transport.")}function xi(n,e){En.call(this),this.g=new MD(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!di(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!di(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Nh(this)}function Y0(n){jc.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Cv(){Bc.call(this),this.status=1}function Nh(n){this.g=n}(Ge=er.prototype).ea=function(n,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ih.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Ih),this.g.onreadystatechange=br(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void ND(this,l)}n=t||"";const a=new fu(this.headers);s&&ov(s,function(l,p){a.set(p,l)}),s=function(n){e:{var e=pv;const t=n.length,s="string"==typeof n?n.split(""):n;for(let a=0;a<t;a++)if(a in s&&e.call(void 0,s[a],a,n)){e=a;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(a.T()),t=st.FormData&&n instanceof st.FormData,!(0<=lp(Om,e))||s||t||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(l,p){this.g.setRequestHeader(p,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{H0(this),0<this.B&&((this.K=function(n){return Oc&&W_()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=br(this.pa,this)):this.A=wh(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){ND(this,l)}},Ge.pa=function(){void 0!==ap&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gn(this,"timeout"),this.abort(8))},Ge.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Gn(this,"complete"),Gn(this,"abort"),mv(this))},Ge.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),mv(this,!0)),er.Z.M.call(this)},Ge.Fa=function(){this.s||(this.F||this.v||this.l?gv(this):this.cb())},Ge.cb=function(){gv(this)},Ge.ba=function(){try{return 2<Hc(this)?this.g.status:-1}catch(n){return-1}},Ge.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ge.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),jR(e)}},Ge.Da=function(){return this.m},Ge.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ge=MD.prototype).ma=8,Ge.G=1,Ge.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ge.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const a=new hu(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=Mc(l),Pc(l,this.P)):l=this.P),null===this.o&&(a.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var s=this.l[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=kD(this,a,e),wn(t=ga(this.F),"RID",n),wn(t,"CVER",22),this.D&&wn(t,"X-HTTP-Session-Id",this.D),Lm(this,t),this.o&&l&&_v(t,this.o,l),fv(this.i,a),this.Ra&&wn(t,"TYPE","init"),this.ja?(wn(t,"$req",e),wn(t,"SID","null"),a.$=!0,nv(a,t,null)):nv(a,t,e),this.G=2}}else 3==this.G&&(n?OD(this,n):0==this.l.length||U0(this.i)||OD(this))},Ge.Ga=function(){if(this.u=null,q0(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=He(br(this.bb,this),n)}},Ge.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ee(10),vv(this),q0(this))},Ge.ab=function(){null!=this.v&&(this.v=null,vv(this),ma(this),Ee(19))},Ge.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ee(2)):(this.h.info("Failed to ping google.com"),Ee(1))},(Ge=Z0.prototype).xa=function(){},Ge.wa=function(){},Ge.va=function(){},Ge.ua=function(){},Ge.Oa=function(){},Iv.prototype.g=function(n,e){return new xi(n,e)},Hn(xi,En),xi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Ao(br(n.hb,n,e))),Ee(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=_u(n,null,n.W),Ev(n)},xi.prototype.close=function(){z0(this.g)},xi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,W0(this.g,e)}else this.v?((e={}).__data__=Gl(n),W0(this.g,e)):W0(this.g,n)},xi.prototype.M=function(){this.g.j=null,delete this.j,z0(this.g),delete this.g,xi.Z.M.call(this)},Hn(Y0,jc),Hn(Cv,Bc),Hn(Nh,Z0),Nh.prototype.xa=function(){Gn(this.g,"a")},Nh.prototype.wa=function(n){Gn(this.g,new Y0(n))},Nh.prototype.va=function(n){Gn(this.g,new Cv(n))},Nh.prototype.ua=function(){Gn(this.g,"b")},Iv.prototype.createWebChannel=Iv.prototype.g,xi.prototype.send=xi.prototype.u,xi.prototype.open=xi.prototype.m,xi.prototype.close=xi.prototype.close,It.NO_ERROR=0,It.TIMEOUT=8,It.HTTP_ERROR=6,Vn.COMPLETE="complete",vp.EventType=gs,gs.OPEN="a",gs.CLOSE="b",gs.ERROR="c",gs.MESSAGE="d",En.prototype.listen=En.prototype.N,er.prototype.listenOnce=er.prototype.O,er.prototype.getLastError=er.prototype.La,er.prototype.getLastErrorCode=er.prototype.Da,er.prototype.getStatus=er.prototype.ba,er.prototype.getResponseJson=er.prototype.Qa,er.prototype.getResponseText=er.prototype.ga,er.prototype.send=er.prototype.ea;var FD=Zr.createWebChannelTransport=function(){return new Iv},Np=Zr.getStatEventTarget=function(){return R()},Gc=Zr.ErrorCode=It,Dv=Zr.EventType=Vn,Mh=Zr.Event=E,Ph=Zr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Oh=Zr.FetchXmlHttpFactory=Ap,Vm=Zr.WebChannel=vp,Q0=Zr.XhrIo=er;const Tv="@firebase/firestore";class Ir{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");let zc="9.6.0";const vu=new So.Yd("@firebase/firestore");function kh(){return vu.logLevel}function Me(n,...e){if(vu.logLevel<=So.in.DEBUG){const t=e.map(Um);vu.debug(`Firestore (${zc}): ${n}`,...t)}}function Cr(n,...e){if(vu.logLevel<=So.in.ERROR){const t=e.map(Um);vu.error(`Firestore (${zc}): ${n}`,...t)}}function Lh(n,...e){if(vu.logLevel<=So.in.WARN){const t=e.map(Um);vu.warn(`Firestore (${zc}): ${n}`,...t)}}function Um(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Xe(n="Unexpected state"){const e=`FIRESTORE (${zc}) INTERNAL ASSERTION FAILED: `+n;throw Cr(e),new Error(e)}function it(n,e){n||Xe()}function Le(n,e){return n}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ur{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class jD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $R{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ir.UNAUTHENTICATED))}shutdown(){}}class J0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class HR{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const l=A=>this.i!==a?(a=this.i,t(A)):Promise.resolve();let p=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new Ur,e.enqueueRetryable(()=>l(this.currentUser))};const _=()=>{const A=p;e.enqueueRetryable((0,pe.Z)(function*(){yield A.promise,yield l(s.currentUser)}))},b=A=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.auth.addAuthTokenListener(this.o),_()};this.t.onInit(A=>b(A)),setTimeout(()=>{if(!this.auth){const A=this.t.getImmediate({optional:!0});A?b(A):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new Ur)}},0),_()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(it("string"==typeof s.accessToken),new jD(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return it(null===e||"string"==typeof e),new Ir(e)}}class BD{constructor(e,t,s){this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const a=e.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),s&&this.headers.set("X-Goog-Iam-Authorization-Token",s)}}class Sv{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new BD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Av{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $D{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=a=>{e.enqueueRetryable(()=>{return null!=(l=a).error&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`),t(l.token);var l})};const s=a=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?s(a):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(it("string"==typeof t.token),new Av(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ys{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.p(s),this.T=s=>t.writeSequenceNumber(s))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function X0(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}ys.I=-1;class eb{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=X0(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%e.length))}return s}}function Mt(n,e){return n<e?-1:n>e?1:0}function Fh(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}function tb(n){return n+"\0"}class Dr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Dr.fromMillis(Date.now())}static fromDate(e){return Dr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Dr(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Dr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function nb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jm(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Mp{constructor(e,t,s){void 0===t?t=0:t>e.length&&Xe(),void 0===s?s=e.length-t:s>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Mp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mp?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=e.get(a),p=t.get(a);if(l<p)return-1;if(l>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Mp{construct(e,t,s){return new Jt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Re(se.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const zR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jr extends Mp{construct(e,t,s){return new jr(e,t,s)}static isValidIdentifier(e){return zR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new jr(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(0===s.length)throw new Re(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;a<e.length;){const _=e[a];if("\\"===_){if(a+1===e.length)throw new Re(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[a+1];if("\\"!==b&&"."!==b&&"`"!==b)throw new Re(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=b,a+=2}else"`"===_?(p=!p,a++):"."!==_||p?(s+=_,a++):(l(),a++)}if(l(),p)throw new Re(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jr(t)}static emptyPath(){return new jr([])}}class Vh{constructor(e){this.fields=e,e.sort(jr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fh(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Br(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new Br(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Br.EMPTY_BYTE_STRING=new Br("");const Rv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wc(n){if(it(!!n),"string"==typeof n){let e=0;const t=Rv.exec(n);if(it(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:fr(n.seconds),nanos:fr(n.nanos)}}function fr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Eu(n){return"string"==typeof n?Br.fromBase64String(n):Br.fromUint8Array(n)}function Pp(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function rb(n){const e=n.mapValue.fields.__previous_value__;return Pp(e)?rb(e):e}function Jl(n){const e=Wc(n.mapValue.fields.__local_write_time__.timestampValue);return new Dr(e.seconds,e.nanos)}function wu(n){return null==n}function Op(n){return 0===n&&1/n==-1/0}function ib(n){return"number"==typeof n&&Number.isInteger(n)&&!Op(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(Jt.fromString(e))}static fromName(e){return new Qe(Jt.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new Jt(e.slice()))}}function bu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Pp(n)?4:10:Xe()}function Iu(n,e){const t=bu(n);if(t!==bu(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jl(n).isEqual(Jl(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Wc(s.timestampValue),p=Wc(a.timestampValue);return l.seconds===p.seconds&&l.nanos===p.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,Eu(n.bytesValue).isEqual(Eu(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return fr(s.geoPointValue.latitude)===fr(a.geoPointValue.latitude)&&fr(s.geoPointValue.longitude)===fr(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return fr(s.integerValue)===fr(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=fr(s.doubleValue),p=fr(a.doubleValue);return l===p?Op(l)===Op(p):isNaN(l)&&isNaN(p)}return!1}(n,e);case 9:return Fh(n.arrayValue.values||[],e.arrayValue.values||[],Iu);case 10:return function(s,a){const l=s.mapValue.fields||{},p=a.mapValue.fields||{};if(nb(l)!==nb(p))return!1;for(const _ in l)if(l.hasOwnProperty(_)&&(void 0===p[_]||!Iu(l[_],p[_])))return!1;return!0}(n,e);default:return Xe()}var a}function kp(n,e){return void 0!==(n.values||[]).find(t=>Iu(t,e))}function Xl(n,e){const t=bu(n),s=bu(e);if(t!==s)return Mt(t,s);switch(t){case 0:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(a,l){const p=fr(a.integerValue||a.doubleValue),_=fr(l.integerValue||l.doubleValue);return p<_?-1:p>_?1:p===_?0:isNaN(p)?isNaN(_)?0:-1:1}(n,e);case 3:return xv(n.timestampValue,e.timestampValue);case 4:return xv(Jl(n),Jl(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(a,l){const p=Eu(a),_=Eu(l);return p.compareTo(_)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const p=a.split("/"),_=l.split("/");for(let b=0;b<p.length&&b<_.length;b++){const A=Mt(p[b],_[b]);if(0!==A)return A}return Mt(p.length,_.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const p=Mt(fr(a.latitude),fr(l.latitude));return 0!==p?p:Mt(fr(a.longitude),fr(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,l){const p=a.values||[],_=l.values||[];for(let b=0;b<p.length&&b<_.length;++b){const A=Xl(p[b],_[b]);if(A)return A}return Mt(p.length,_.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,l){const p=a.fields||{},_=Object.keys(p),b=l.fields||{},A=Object.keys(b);_.sort(),A.sort();for(let M=0;M<_.length&&M<A.length;++M){const O=Mt(_[M],A[M]);if(0!==O)return O;const q=Xl(p[_[M]],b[A[M]]);if(0!==q)return q}return Mt(_.length,A.length)}(n.mapValue,e.mapValue);default:throw Xe()}}function xv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mt(n,e);const t=Wc(n),s=Wc(e),a=Mt(t.seconds,s.seconds);return 0!==a?a:Mt(t.nanos,s.nanos)}function Bm(n){return $m(n)}function $m(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(s){const a=Wc(s);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Eu(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(s){let a="[",l=!0;for(const p of s.values||[])l?l=!1:a+=",",a+=$m(p);return a+"]"}(n.arrayValue):"mapValue"in n?function(s){const a=Object.keys(s.fields||{}).sort();let l="{",p=!0;for(const _ of a)p?p=!1:l+=",",l+=`${_}:${$m(s.fields[_])}`;return l+"}"}(n.mapValue):Xe();var e}function Lp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Mo(n){return!!n&&"integerValue"in n}function Uh(n){return!!n&&"arrayValue"in n}function sb(n){return!!n&&"nullValue"in n}function ob(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Nv(n){return!!n&&"mapValue"in n}function ya(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return fi(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=ya(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ya(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Jr{constructor(e){this.value=e}static empty(){return new Jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Nv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ya(t)}setAll(e){let t=jr.emptyPath(),s={},a=[];e.forEach((p,_)=>{if(!t.isImmediateParentOf(_)){const b=this.getFieldsMap(t);this.applyChanges(b,s,a),s={},a=[],t=_.popLast()}p?s[_.lastSegment()]=ya(p):a.push(_.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());Nv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Iu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Nv(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){fi(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new Jr(ya(this.value))}}function jh(n){const e=[];return fi(n.fields,(t,s)=>{const a=new jr([t]);if(Nv(s)){const l=jh(s.mapValue).fields;if(0===l.length)e.push(a);else for(const p of l)e.push(a.child(p))}else e.push(a)}),new Vh(e)}class sn{constructor(e,t,s,a,l){this.key=e,this.documentType=t,this.version=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new sn(e,0,Et.min(),Jr.empty(),0)}static newFoundDocument(e,t,s){return new sn(e,1,t,s,0)}static newNoDocument(e,t){return new sn(e,2,t,Jr.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,Jr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new sn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class GD{constructor(e,t=null,s=[],a=[],l=null,p=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=p,this.endAt=_,this.R=null}}function Hm(n,e=null,t=[],s=[],a=null,l=null,p=null){return new GD(n,e,t,s,a,l,p)}function Bh(n){const e=Le(n);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>function(n){return n.field.canonicalString()+n.op.toString()+Bm(n.value)}(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),wu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=zm(e.startAt)),e.endAt&&(t+="|ub:",t+=zm(e.endAt)),e.R=t}return e.R}function Fp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!WR(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(s=e.filters[a]).op||!t.field.isEqual(s.field)||!Iu(t.value,s.value))return!1;var t,s;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Pv(n.startAt,e.startAt)&&Pv(n.endAt,e.endAt)}function Gm(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Xr extends class{}{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,s):new qD(e,t,s):"array-contains"===t?new KD(e,s):"in"===t?new ZD(e,s):"not-in"===t?new Hh(e,s):"array-contains-any"===t?new YD(e,s):new Xr(e,t,s)}static P(e,t,s){return"in"===t?new ab(e,s):new $h(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Xl(t,this.value)):null!==t&&bu(this.value)===bu(t)&&this.v(Xl(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xe()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class qD extends Xr{constructor(e,t,s){super(e,t,s),this.key=Qe.fromName(s.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.v(t)}}class ab extends Xr{constructor(e,t){super(e,"in",t),this.keys=Mv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class $h extends Xr{constructor(e,t){super(e,"not-in",t),this.keys=Mv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Mv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Qe.fromName(s.referenceValue))}class KD extends Xr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uh(t)&&kp(t.arrayValue,this.value)}}class ZD extends Xr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&kp(this.value.arrayValue,t)}}class Hh extends Xr{constructor(e,t){super(e,"not-in",t)}matches(e){if(kp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!kp(this.value.arrayValue,t)}}class YD extends Xr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>kp(this.value.arrayValue,s))}}class Vp{constructor(e,t){this.position=e,this.before=t}}function zm(n){return`${n.before?"b":"a"}:${n.position.map(e=>Bm(e)).join(",")}`}class Gh{constructor(e,t="asc"){this.field=e,this.dir=t}}function WR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function ub(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],p=n.position[a];if(s=l.field.isKeyField()?Qe.comparator(Qe.fromName(p.referenceValue),t.key):Xl(p,t.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return n.before?s<=0:s<0}function Pv(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Iu(n.position[t],e.position[t]))return!1;return!0}class qt{constructor(e,t=null,s=[],a=[],l=null,p="F",_=null,b=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=p,this.startAt=_,this.endAt=b,this.S=null,this.D=null}}function Wm(n,e,t,s,a,l,p,_){return new qt(n,e,t,s,a,l,p,_)}function Up(n){return new qt(n)}function Qs(n){return!wu(n.limit)&&"F"===n.limitType}function zh(n){return!wu(n.limit)&&"L"===n.limitType}function jp(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function cb(n){for(const e of n.filters)if(e.V())return e.field;return null}function Ov(n){return null!==n.collectionGroup}function Wh(n){const e=Le(n);if(null===e.S){e.S=[];const t=cb(e),s=jp(e);if(null!==t&&null===s)t.isKeyField()||e.S.push(new Gh(t)),e.S.push(new Gh(jr.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.S.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Gh(jr.keyField(),l))}}}return e.S}function _s(n){const e=Le(n);if(!e.D)if("F"===e.limitType)e.D=Hm(e.path,e.collectionGroup,Wh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of Wh(e))t.push(new Gh(l.field,"desc"===l.dir?"asc":"desc"));const s=e.endAt?new Vp(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Vp(e.startAt.position,!e.startAt.before):null;e.D=Hm(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e.D}function kv(n,e,t){return new qt(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qh(n,e){return Fp(_s(n),_s(e))&&n.limitType===e.limitType}function Lv(n){return`${Bh(_s(n))}|lt:${n.limitType}`}function Fv(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(s=t).field.canonicalString()} ${s.op} ${Bm(s.value)}`;var s}).join(", ")}]`),wu(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(s=t).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(e+=", startAt: "+zm(n.startAt)),n.endAt&&(e+=", endAt: "+zm(n.endAt)),`Target(${e})`}(_s(n))}; limitType=${n.limitType})`}function Bp(n,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Qe.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,s){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(n,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(n,e)&&(s=e,!((t=n).startAt&&!ub(t.startAt,Wh(t),s)||t.endAt&&ub(t.endAt,Wh(t),s)));var t,s}function Kh(n){return(e,t)=>{let s=!1;for(const a of Wh(n)){const l=Vv(a,e,t);if(0!==l)return l;s=s||a.field.isKeyField()}return 0}}function Vv(n,e,t){const s=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(a,l,p){const _=l.data.field(a),b=p.data.field(a);return null!==_&&null!==b?Xl(_,b):Xe()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Xe()}}function Uv(n,e){if(n.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Op(e)?"-0":e}}function jv(n){return{integerValue:""+n}}function Bv(n,e){return ib(e)?jv(e):Uv(n,e)}class $p{constructor(){this._=void 0}}function QD(n,e,t){return n instanceof Zh?function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof qc?XD(n,e):n instanceof Kc?db(n,e):function(s,a){const l=lb(s,a),p=eT(l)+eT(s.N);return Mo(l)&&Mo(s.N)?jv(p):Uv(s.k,p)}(n,e)}function JD(n,e,t){return n instanceof qc?XD(n,e):n instanceof Kc?db(n,e):t}function lb(n,e){return n instanceof Yh?Mo(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Zh extends $p{}class qc extends $p{constructor(e){super(),this.elements=e}}function XD(n,e){const t=tT(e);for(const s of n.elements)t.some(a=>Iu(a,s))||t.push(s);return{arrayValue:{values:t}}}class Kc extends $p{constructor(e){super(),this.elements=e}}function db(n,e){let t=tT(e);for(const s of n.elements)t=t.filter(a=>!Iu(a,s));return{arrayValue:{values:t}}}class Yh extends $p{constructor(e,t){super(),this.k=e,this.N=t}}function eT(n){return fr(n.integerValue||n.doubleValue)}function tT(n){return Uh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ed{constructor(e,t){this.field=e,this.transform=t}}class hb{constructor(e,t){this.version=e,this.transformResults=t}}class tr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $v(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Yi{}function qR(n,e,t){n instanceof Qh?function(s,a,l){const p=s.value.clone(),_=zv(s.fieldTransforms,a,l.transformResults);p.setAll(_),a.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(n,e,t):n instanceof Zc?function(s,a,l){if(!$v(s.precondition,a))return void a.convertToUnknownDocument(l.version);const p=zv(s.fieldTransforms,a,l.transformResults),_=a.data;_.setAll(rT(s)),_.setAll(p),a.convertToFoundDocument(l.version,_).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function fb(n,e,t){var a;n instanceof Qh?function(s,a,l){if(!$v(s.precondition,a))return;const p=s.value.clone(),_=Wv(s.fieldTransforms,l,a);p.setAll(_),a.convertToFoundDocument(Gv(a),p).setHasLocalMutations()}(n,e,t):n instanceof Zc?function(s,a,l){if(!$v(s.precondition,a))return;const p=Wv(s.fieldTransforms,l,a),_=a.data;_.setAll(rT(s)),_.setAll(p),a.convertToFoundDocument(Gv(a),_).setHasLocalMutations()}(n,e,t):$v(n.precondition,a=e)&&a.convertToNoDocument(Et.min())}function KR(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=lb(s.transform,a||null);null!=l&&(null==t&&(t=Jr.empty()),t.set(s.field,l))}return t||null}function Hv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===s||t&&s&&Fh(t,s,(a,l)=>function(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(t=n.transform)instanceof qc&&s instanceof qc||t instanceof Kc&&s instanceof Kc?Fh(t.elements,s.elements,Iu):t instanceof Yh&&s instanceof Yh?Iu(t.N,s.N):t instanceof Zh&&s instanceof Zh);var t,s}(a,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,s}function Gv(n){return n.isFoundDocument()?n.version:Et.min()}class Qh extends Yi{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}}class Zc extends Yi{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}}function rT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function zv(n,e,t){const s=new Map;it(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],p=l.transform,_=e.data.field(l.field);s.set(l.field,JD(p,_,t[a]))}return s}function Wv(n,e,t){const s=new Map;for(const a of n){const l=a.transform,p=t.data.field(a.field);s.set(a.field,QD(l,p,e))}return s}class Hp extends Yi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Gp extends Yi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class iT{constructor(e){this.count=e}}var pr,Ht;function pb(n){switch(n){default:return Xe();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function gb(n){if(void 0===n)return Cr("GRPC error has no .code"),se.UNKNOWN;switch(n){case pr.OK:return se.OK;case pr.CANCELLED:return se.CANCELLED;case pr.UNKNOWN:return se.UNKNOWN;case pr.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case pr.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case pr.INTERNAL:return se.INTERNAL;case pr.UNAVAILABLE:return se.UNAVAILABLE;case pr.UNAUTHENTICATED:return se.UNAUTHENTICATED;case pr.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case pr.NOT_FOUND:return se.NOT_FOUND;case pr.ALREADY_EXISTS:return se.ALREADY_EXISTS;case pr.PERMISSION_DENIED:return se.PERMISSION_DENIED;case pr.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case pr.ABORTED:return se.ABORTED;case pr.OUT_OF_RANGE:return se.OUT_OF_RANGE;case pr.UNIMPLEMENTED:return se.UNIMPLEMENTED;case pr.DATA_LOSS:return se.DATA_LOSS;default:return Xe()}}(Ht=pr||(pr={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";class Tr{constructor(e,t){this.comparator=e,this.root=t||zn.EMPTY}insert(e,t){return new Tr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zn.BLACK,null,null))}remove(e){return new Tr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new td(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new td(this.root,e,this.comparator,!1)}getReverseIterator(){return new td(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new td(this.root,e,this.comparator,!0)}}class td{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zn{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=null!=s?s:zn.RED,this.left=null!=a?a:zn.EMPTY,this.right=null!=l?l:zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new zn(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=a?a:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return zn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return zn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}zn.EMPTY=null,zn.RED=!0,zn.BLACK=!1,zn.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(n,e,t,s,a){return this}insert(n,e,t){return new zn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Un{constructor(e){this.comparator=e,this.data=new Tr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Js(this.data.getIterator())}getIteratorFrom(e){return new Js(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Un)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Un(this.comparator);return t.data=e,t}}class Js{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const zp=new Tr(Qe.comparator);function Xs(){return zp}const sT=new Tr(Qe.comparator);function Wp(){return sT}const _a=new Tr(Qe.comparator);function Jh(){return _a}const pi=new Un(Qe.comparator);function Bt(...n){let e=pi;for(const t of n)e=e.add(t);return e}const qm=new Un(Mt);function Ni(){return qm}class nd{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const s=new Map;return s.set(e,va.createSynthesizedTargetChangeForCurrentChange(e,t)),new nd(Et.min(),s,Ni(),Xs(),Bt())}}class va{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new va(Br.EMPTY_BYTE_STRING,t,Bt(),Bt(),Bt())}}class Cu{constructor(e,t,s,a){this.$=e,this.removedTargetIds=t,this.key=s,this.F=a}}class rd{constructor(e,t){this.targetId=e,this.O=t}}class id{constructor(e,t,s=Br.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class sd{constructor(){this.M=0,this.L=ad(),this.B=Br.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=Bt(),t=Bt(),s=Bt();return this.L.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Xe()}}),new va(this.B,this.U,e,t,s)}H(){this.q=!1,this.L=ad()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class Xh{constructor(e){this.et=e,this.nt=new Map,this.st=Xs(),this.it=od(),this.rt=new Un(Mt)}ot(e){for(const t of e.$)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ut(e){this.forEachTarget(e,t=>{const s=this.ht(t);switch(e.state){case 0:this.lt(t)&&s.W(e.resumeToken);break;case 1:s.Z(),s.K||s.H(),s.W(e.resumeToken);break;case 2:s.Z(),s.K||this.removeTarget(t);break;case 3:this.lt(t)&&(s.tt(),s.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),s.W(e.resumeToken));break;default:Xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((s,a)=>{this.lt(a)&&t(a)})}dt(e){const t=e.targetId,s=e.O.count,a=this.wt(t);if(a){const l=a.target;if(Gm(l))if(0===s){const p=new Qe(l.path);this.ct(t,p,sn.newNoDocument(p,Et.min()))}else it(1===s);else this._t(t)!==s&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((l,p)=>{const _=this.wt(p);if(_){if(l.current&&Gm(_.target)){const b=new Qe(_.target.path);null!==this.st.get(b)||this.yt(p,b)||this.ct(p,b,sn.newNoDocument(b,e))}l.j&&(t.set(p,l.G()),l.H())}});let s=Bt();this.it.forEach((l,p)=>{let _=!0;p.forEachWhile(b=>{const A=this.wt(b);return!A||2===A.purpose||(_=!1,!1)}),_&&(s=s.add(l))});const a=new nd(e,t,this.rt,this.st,s);return this.st=Xs(),this.it=od(),this.rt=new Un(Mt),a}at(e,t){if(!this.lt(e))return;const s=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,s),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,s){if(!this.lt(e))return;const a=this.ht(e);this.yt(e,t)?a.J(t,1):a.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),s&&(this.st=this.st.insert(t,s))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new sd,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new Un(Mt),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||Me("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new sd),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function od(){return new Tr(Qe.comparator)}function ad(){return new Tr(Qe.comparator)}const ef={asc:"ASCENDING",desc:"DESCENDING"},mb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class yb{constructor(e,t){this.databaseId=e,this.C=t}}function tf(n,e){return n.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qv(n,e){return n.C?e.toBase64():e.toUint8Array()}function _b(n,e){return tf(n,e.toTimestamp())}function Sr(n){return it(!!n),Et.fromTimestamp(function(e){const t=Wc(e);return new Dr(t.seconds,t.nanos)}(n))}function Km(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Kv(n){const e=Jt.fromString(n);return it(gT(e)),e}function nf(n,e){return Km(n.databaseId,e.path)}function Ea(n,e){const t=Kv(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(Zv(t))}function Zm(n,e){return Km(n.databaseId,e)}function vb(n){const e=Kv(n);return 4===e.length?Jt.emptyPath():Zv(e)}function qp(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Zv(n){return it(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Eb(n,e,t){return{name:nf(n,e),fields:t.value.mapValue.fields}}function oT(n,e,t){const s=Ea(n,e.name),a=Sr(e.updateTime),l=new Jr({mapValue:{fields:e.fields}}),p=sn.newFoundDocument(s,a,l);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function Ym(n,e){let t;if(e instanceof Qh)t={update:Eb(n,e.key,e.value)};else if(e instanceof Hp)t={delete:nf(n,e.key)};else if(e instanceof Zc)t={update:Eb(n,e.key,e.data),updateMask:pT(e.fieldMask)};else{if(!(e instanceof Gp))return Xe();t={verify:nf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,l){const p=l.transform;if(p instanceof Zh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof qc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Kc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Yh)return{fieldPath:l.field.canonicalString(),increment:p.N};throw Xe()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:_b(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Xe()),t;var a}function Yv(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?tr.updateTime(Sr(a.updateTime)):void 0!==a.exists?tr.exists(a.exists):tr.none():tr.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(l,p){let _=null;"setToServerValue"in p?(it("REQUEST_TIME"===p.setToServerValue),_=new Zh):"appendMissingElements"in p?_=new qc(p.appendMissingElements.values||[]):"removeAllFromArray"in p?_=new Kc(p.removeAllFromArray.values||[]):"increment"in p?_=new Yh(l,p.increment):Xe();const b=jr.fromServerFormat(p.fieldPath);return new ed(b,_)}(n,a)):[];var a;if(e.update){const a=Ea(n,e.update.name),l=new Jr({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new Vh((e.updateMask.fieldPaths||[]).map(A=>jr.fromServerFormat(A)));return new Zc(a,l,p,t,s)}return new Qh(a,l,t,s)}if(e.delete){const a=Ea(n,e.delete);return new Hp(a,t)}if(e.verify){const a=Ea(n,e.verify);return new Gp(a,t)}return Xe()}function bb(n,e){return{documents:[Zm(n,e.path)]}}function cT(n,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Zm(n,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Zm(n,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(_){if(0===_.length)return;const b=_.map(A=>function(M){if("=="===M.op){if(ob(M.value))return{unaryFilter:{field:rf(M.field),op:"IS_NAN"}};if(sb(M.value))return{unaryFilter:{field:rf(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(ob(M.value))return{unaryFilter:{field:rf(M.field),op:"IS_NOT_NAN"}};if(sb(M.value))return{unaryFilter:{field:rf(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rf(M.field),op:ZR(M.op),value:M.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);a&&(t.structuredQuery.where=a);const l=function(_){if(0!==_.length)return _.map(b=>{return{field:rf((A=b).field),direction:fT(A.dir)};var A})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const p=(b=e.limit,n.C||wu(b)?b:{value:b});var b;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=dT(e.startAt)),e.endAt&&(t.structuredQuery.endAt=dT(e.endAt)),t}function Ib(n){let e=vb(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){it(1===s);const M=t.from[0];M.allDescendants?a=M.collectionId:e=e.child(M.collectionId)}let l=[];t.where&&(l=lT(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(M=>{return new Gh(sf((O=M).field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let _=null;t.limit&&(_=function(M){let O;return O="object"==typeof M?M.value:M,wu(O)?null:O}(t.limit));let b=null;t.startAt&&(b=hT(t.startAt));let A=null;return t.endAt&&(A=hT(t.endAt)),Wm(e,a,p,l,_,"F",b,A)}function lT(n){return n?void 0!==n.unaryFilter?[Jv(n)]:void 0!==n.fieldFilter?[Qv(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>lT(e)).reduce((e,t)=>e.concat(t)):Xe():[]}function dT(n){return{before:n.before,values:n.position}}function hT(n){return new Vp(n.values||[],!!n.before)}function fT(n){return ef[n]}function ZR(n){return mb[n]}function rf(n){return{fieldPath:n.canonicalString()}}function sf(n){return jr.fromServerFormat(n.fieldPath)}function Qv(n){return Xr.create(sf(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}function Jv(n){switch(n.unaryFilter.op){case"IS_NAN":const e=sf(n.unaryFilter.field);return Xr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=sf(n.unaryFilter.field);return Xr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=sf(n.unaryFilter.field);return Xr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=sf(n.unaryFilter.field);return Xr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}function pT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gT(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function wa(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Db(e)),e=YR(n.get(t),e);return Db(e)}function YR(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function Db(n){return n+"\x01\x01"}function ba(n){const e=n.length;if(it(e>=2),2===e)return it("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,s=[];let a="";for(let l=0;l<e;){const p=n.indexOf("\x01",l);switch((p<0||p>t)&&Xe(),n.charAt(p+1)){case"\x01":const _=n.substring(l,p);let b;0===a.length?b=_:(a+=_,b=a,a=""),s.push(b);break;case"\x10":a+=n.substring(l,p),a+="\0";break;case"\x11":a+=n.substring(l,p+1);break;default:Xe()}l=p+2}return new Jt(s)}class QR{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class vs{constructor(e,t,s){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=s}}vs.store="owner",vs.key="owner";class Es{constructor(e,t,s){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=s}}Es.store="mutationQueues",Es.keyPath="userId";class bn{constructor(e,t,s,a,l){this.userId=e,this.batchId=t,this.localWriteTimeMs=s,this.baseMutations=a,this.mutations=l}}bn.store="mutations",bn.keyPath="batchId",bn.userMutationsIndex="userMutationsIndex",bn.userMutationsKeyPath=["userId","batchId"];class ei{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,wa(t)]}static key(e,t,s){return[e,wa(t),s]}}ei.store="documentMutations",ei.PLACEHOLDER=new ei;class mT{constructor(e,t){this.path=e,this.readTime=t}}class Tb{constructor(e,t){this.path=e,this.version=t}}class In{constructor(e,t,s,a,l,p){this.unknownDocument=e,this.noDocument=t,this.document=s,this.hasCommittedMutations=a,this.readTime=l,this.parentPath=p}}In.store="remoteDocuments",In.readTimeIndex="readTimeIndex",In.readTimeIndexPath="readTime",In.collectionReadTimeIndex="collectionReadTimeIndex",In.collectionReadTimeIndexPath=["parentPath","readTime"];class Ia{constructor(e){this.byteSize=e}}Ia.store="remoteDocumentGlobal",Ia.key="remoteDocumentGlobalKey";class Mi{constructor(e,t,s,a,l,p,_){this.targetId=e,this.canonicalId=t,this.readTime=s,this.resumeToken=a,this.lastListenSequenceNumber=l,this.lastLimboFreeSnapshotVersion=p,this.query=_}}Mi.store="targets",Mi.keyPath="targetId",Mi.queryTargetsIndexName="queryTargetsIndex",Mi.queryTargetsKeyPath=["canonicalId","targetId"];class ti{constructor(e,t,s){this.targetId=e,this.path=t,this.sequenceNumber=s}}ti.store="targetDocuments",ti.keyPath=["targetId","path"],ti.documentTargetsIndex="documentTargetsIndex",ti.documentTargetsKeyPath=["path","targetId"];class ws{constructor(e,t,s,a){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=s,this.targetCount=a}}ws.key="targetGlobalKey",ws.store="targetGlobal";class ud{constructor(e,t){this.collectionId=e,this.parent=t}}ud.store="collectionParents",ud.keyPath=["collectionId","parent"];class Du{constructor(e,t,s,a){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=s,this.inForeground=a}}Du.store="clientMetadata",Du.keyPath="clientId";class of{constructor(e,t,s){this.bundleId=e,this.createTime=t,this.version=s}}of.store="bundles",of.keyPath="bundleId";class cd{constructor(e,t,s){this.name=e,this.readTime=t,this.bundledQuery=s}}cd.store="namedQueries",cd.keyPath="name";const yT=[Es.store,bn.store,ei.store,In.store,Mi.store,vs.store,ws.store,ti.store,Du.store,Ia.store,ud.store,of.store,cd.store],Xv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class De{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new De((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof De?t:De.resolve(t)}catch(t){return De.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):De.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):De.reject(t)}static resolve(e){return new De((t,s)=>{t(e)})}static reject(e){return new De((t,s)=>{s(e)})}static waitFor(e){return new De((t,s)=>{let a=0,l=0,p=!1;e.forEach(_=>{++a,_.next(()=>{++l,p&&l===a&&t()},b=>s(b))}),p=!0,l===a&&t()})}static or(e){let t=De.resolve(!1);for(const s of e)t=t.next(a=>a?De.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}}class tE{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new Ur,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new Qm(e,t.error)):this.It.resolve()},this.transaction.onerror=s=>{const a=nE(s.target.error);this.It.reject(new Qm(e,a))}}static open(e,t,s,a){try{return new tE(t,e.transaction(a,s))}catch(l){throw new Qm(t,l)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Me("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new vT(t)}}class bs{constructor(e,t,s){this.name=e,this.version=t,this.Rt=s,12.2===bs.Pt((0,Dt.z$)())&&Cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Me("SimpleDb","Removing database:",e),Tu(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,Dt.hl)())return!1;if(bs.vt())return!0;const e=(0,Dt.z$)(),t=bs.Pt(e),s=0<t&&t<10,a=bs.Vt(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static Pt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}Ct(e){var t=this;return(0,pe.Z)(function*(){return t.db||(Me("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=p=>{s(p.target.result)},l.onblocked=()=>{a(new Qm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=p=>{const _=p.target.error;a("VersionError"===_.name?new Re(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===_.name?new Re(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+_):new Qm(e,_))},l.onupgradeneeded=p=>{Me("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.Rt.Nt(p.target.result,l.transaction,p.oldVersion,t.version).next(()=>{Me("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=s=>t.kt(s)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var l=this;return(0,pe.Z)(function*(){const p="readonly"===t;let _=0;for(;;){++_;try{l.db=yield l.Ct(e);const b=tE.open(l.db,e,p?"readonly":"readwrite",s),A=a(b).catch(M=>(b.abort(M),De.reject(M))).toPromise();return A.catch(()=>{}),yield b.At,A}catch(b){const A="FirebaseError"!==b.name&&_<3;if(Me("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),l.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class _T{constructor(e){this.$t=e,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(e){this.$t=e}done(){this.Ft=!0}Lt(e){this.Ot=e}delete(){return Tu(this.$t.delete())}}class Qm extends Re{constructor(e,t){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Po(n){return"IndexedDbTransactionError"===n.name}class vT{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Me("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Tu(s)}add(e){return Me("SimpleDb","ADD",this.store.name,e,e),Tu(this.store.add(e))}get(e){return Tu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Me("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Me("SimpleDb","DELETE",this.store.name,e),Tu(this.store.delete(e))}count(){return Me("SimpleDb","COUNT",this.store.name),Tu(this.store.count())}Bt(e,t){const s=this.cursor(this.options(e,t)),a=[];return this.Ut(s,(l,p)=>{a.push(p)}).next(()=>a)}qt(e,t){Me("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Kt=!1;const a=this.cursor(s);return this.Ut(a,(l,p,_)=>_.delete())}jt(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.Ut(a,t)}Qt(e){const t=this.cursor({});return new De((s,a)=>{t.onerror=l=>{const p=nE(l.target.error);a(p)},t.onsuccess=l=>{const p=l.target.result;p?e(p.primaryKey,p.value).next(_=>{_?p.continue():s()}):s()}})}Ut(e,t){const s=[];return new De((a,l)=>{e.onerror=p=>{l(p.target.error)},e.onsuccess=p=>{const _=p.target.result;if(!_)return void a();const b=new _T(_),A=t(_.primaryKey,_.value,b);if(A instanceof De){const M=A.catch(O=>(b.done(),De.reject(O)));s.push(M)}b.isDone?a():null===b.Mt?_.continue():_.continue(b.Mt)}}).next(()=>De.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Kt?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Tu(n){return new De((e,t)=>{n.onsuccess=s=>{e(s.target.result)},n.onerror=s=>{const a=nE(s.target.error);t(a)}})}let Jm=!1;function nE(n){const e=bs.Pt((0,Dt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Jm||(Jm=!0,setTimeout(()=>{throw s},0)),s}}return n}class Xm extends eE{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function gi(n,e){const t=Le(n);return bs.Dt(t.Wt,e)}class ey{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&qR(l,e,s[a])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&fb(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&fb(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const s=e.get(t.key),a=s;this.applyToLocalView(a),s.isValidDocument()||a.convertToNoDocument(Et.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bt())}isEqual(e){return this.batchId===e.batchId&&Fh(this.mutations,e.mutations,(t,s)=>Hv(t,s))&&Fh(this.baseMutations,e.baseMutations,(t,s)=>Hv(t,s))}}class Sb{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){it(e.mutations.length===s.length);let a=Jh();const l=e.mutations;for(let p=0;p<l.length;p++)a=a.insert(l[p].key,s[p].version);return new Sb(e,t,s,a)}}class Yc{constructor(e,t,s,a,l=Et.min(),p=Et.min(),_=Br.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=_}withSequenceNumber(e){return new Yc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Yc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Yc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class rE{constructor(e){this.Gt=e}}function ty(n,e){if(e.document)return oT(n.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=Qe.fromSegments(e.noDocument.path),s=Qc(e.noDocument.readTime),a=sn.newNoDocument(t,s);return e.hasCommittedMutations?a.setHasCommittedMutations():a}if(e.unknownDocument){const t=Qe.fromSegments(e.unknownDocument.path),s=Qc(e.unknownDocument.version);return sn.newUnknownDocument(t,s)}return Xe()}function Ab(n,e,t){const s=iE(t),a=e.key.path.popLast().toArray();if(e.isFoundDocument()){const l={name:nf(_=n.Gt,(b=e).key),fields:b.data.value.mapValue.fields,updateTime:tf(_,b.version.toTimestamp())};return new In(null,null,l,e.hasCommittedMutations,s,a)}var _,b;if(e.isNoDocument()){const l=e.key.path.toArray(),p=ld(e.version),_=e.hasCommittedMutations;return new In(null,new mT(l,p),null,_,s,a)}if(e.isUnknownDocument()){const l=e.key.path.toArray(),p=ld(e.version);return new In(new Tb(l,p),null,null,!0,s,a)}return Xe()}function iE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ny(n){const e=new Dr(n[0],n[1]);return Et.fromTimestamp(e)}function ld(n){const e=n.toTimestamp();return new QR(e.seconds,e.nanoseconds)}function Qc(n){const e=new Dr(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function Jc(n,e){const t=(e.baseMutations||[]).map(l=>Yv(n.Gt,l));for(let l=0;l<e.mutations.length-1;++l){const p=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(p.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const s=e.mutations.map(l=>Yv(n.Gt,l)),a=Dr.fromMillis(e.localWriteTimeMs);return new ey(e.batchId,a,t,s)}function af(n){const e=Qc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Qc(n.lastLimboFreeSnapshotVersion):Et.min();let s;var a;return void 0!==n.query.documents?(it(1===(a=n.query).documents.length),s=_s(Up(vb(a.documents[0])))):s=_s(Ib(n.query)),new Yc(s,n.targetId,0,n.lastListenSequenceNumber,e,t,Br.fromBase64String(n.resumeToken))}function Rb(n,e){const t=ld(e.snapshotVersion),s=ld(e.lastLimboFreeSnapshotVersion);let a;a=Gm(e.target)?bb(n.Gt,e.target):cT(n.Gt,e.target);const l=e.resumeToken.toBase64();return new Mi(e.targetId,Bh(e.target),t,l,e.sequenceNumber,s,a)}function ry(n){const e=Ib({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?kv(e,e.limit,"L"):e}class xb{getBundleMetadata(e,t){return iy(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:Qc(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return iy(e).put({bundleId:(s=t).id,createTime:ld(Sr(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Nb(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:ry(a.bundledQuery),readTime:Qc(a.readTime)};var a})}saveNamedQuery(e,t){return Nb(e).put({name:(s=t).name,readTime:ld(Sr(s.readTime)),bundledQuery:s.bundledQuery});var s}}function iy(n){return gi(n,of.store)}function Nb(n){return gi(n,cd.store)}class ET{constructor(){this.zt=new sE}addToCollectionParentIndex(e,t){return this.zt.add(t),De.resolve()}getCollectionParents(e,t){return De.resolve(this.zt.getEntries(t))}}class sE{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Un(Jt.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Un(Jt.comparator)).toArray()}}class wT{constructor(){this.Ht=new sE}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const l={collectionId:s,parent:wa(a)};return oE(e).put(l)}return De.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[tb(t),""],!1,!0);return oE(e).Bt(a).next(l=>{for(const p of l){if(p.collectionId!==t)break;s.push(ba(p.parent))}return s})}}function oE(n){return gi(n,ud.store)}const sy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Pi{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Pi(e,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function aE(n,e,t){const s=n.store(bn.store),a=n.store(ei.store),l=[],p=IDBKeyRange.only(t.batchId);let _=0;const b=s.jt({range:p},(M,O,q)=>(_++,q.delete()));l.push(b.next(()=>{it(1===_)}));const A=[];for(const M of t.mutations){const O=ei.key(e,M.key.path,t.batchId);l.push(a.delete(O)),A.push(M.key)}return De.waitFor(l).next(()=>A)}function Kp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Xe();e=n.noDocument}return JSON.stringify(e).length}Pi.DEFAULT_COLLECTION_PERCENTILE=10,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pi.DEFAULT=new Pi(41943040,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pi.DISABLED=new Pi(-1,0,0);class oy{constructor(e,t,s,a){this.userId=e,this.k=t,this.Jt=s,this.referenceDelegate=a,this.Yt={}}static Xt(e,t,s,a){it(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new oy(l,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Su(e).jt({index:bn.userMutationsIndex,range:s},(a,l,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const l=dd(e),p=Su(e);return p.add({}).next(_=>{it("number"==typeof _);const b=new ey(_,t,s,a),A=function(q,W,de){const Pe=de.baseMutations.map(dt=>Ym(q.Gt,dt)),je=de.mutations.map(dt=>Ym(q.Gt,dt));return new bn(W,de.batchId,de.localWriteTime.toMillis(),Pe,je)}(this.k,this.userId,b),M=[];let O=new Un((q,W)=>Mt(q.canonicalString(),W.canonicalString()));for(const q of a){const W=ei.key(this.userId,q.key.path,_);O=O.add(q.key.path.popLast()),M.push(p.put(A)),M.push(l.put(W,ei.PLACEHOLDER))}return O.forEach(q=>{M.push(this.Jt.addToCollectionParentIndex(e,q))}),e.addOnCommittedListener(()=>{this.Yt[_]=b.keys()}),De.waitFor(M).next(()=>b)})}lookupMutationBatch(e,t){return Su(e).get(t).next(s=>s?(it(s.userId===this.userId),Jc(this.k,s)):null)}Zt(e,t){return this.Yt[t]?De.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Yt[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return Su(e).jt({index:bn.userMutationsIndex,range:a},(p,_,b)=>{_.userId===this.userId&&(it(_.batchId>=s),l=Jc(this.k,_)),b.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Su(e).jt({index:bn.userMutationsIndex,range:t,reverse:!0},(a,l,p)=>{s=l.batchId,p.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Su(e).Bt(bn.userMutationsIndex,t).next(s=>s.map(a=>Jc(this.k,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=ei.prefixForPath(this.userId,t.path),a=IDBKeyRange.lowerBound(s),l=[];return dd(e).jt({range:a},(p,_,b)=>{const[A,M,O]=p,q=ba(M);if(A===this.userId&&t.path.isEqual(q))return Su(e).get(O).next(W=>{if(!W)throw Xe();it(W.userId===this.userId),l.push(Jc(this.k,W))});b.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Un(Mt);const a=[];return t.forEach(l=>{const p=ei.prefixForPath(this.userId,l.path),_=IDBKeyRange.lowerBound(p),b=dd(e).jt({range:_},(A,M,O)=>{const[q,W,de]=A,Pe=ba(W);q===this.userId&&l.path.isEqual(Pe)?s=s.add(de):O.done()});a.push(b)}),De.waitFor(a).next(()=>this.te(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,l=ei.prefixForPath(this.userId,s),p=IDBKeyRange.lowerBound(l);let _=new Un(Mt);return dd(e).jt({range:p},(b,A,M)=>{const[O,q,W]=b,de=ba(q);O===this.userId&&s.isPrefixOf(de)?de.length===a&&(_=_.add(W)):M.done()}).next(()=>this.te(e,_))}te(e,t){const s=[],a=[];return t.forEach(l=>{a.push(Su(e).get(l).next(p=>{if(null===p)throw Xe();it(p.userId===this.userId),s.push(Jc(this.k,p))}))}),De.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return aE(e.Wt,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),De.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return De.resolve();const s=IDBKeyRange.lowerBound(ei.prefixForUser(this.userId)),a=[];return dd(e).jt({range:s},(l,p,_)=>{if(l[0]===this.userId){const b=ba(l[1]);a.push(b)}else _.done()}).next(()=>{it(0===a.length)})})}containsKey(e,t){return uE(e,this.userId,t)}ne(e){return cE(e).get(this.userId).next(t=>t||new Es(this.userId,-1,""))}}function uE(n,e,t){const s=ei.prefixForPath(e,t.path),a=s[1],l=IDBKeyRange.lowerBound(s);let p=!1;return dd(n).jt({range:l,Kt:!0},(_,b,A)=>{const[M,O,q]=_;M===e&&O===a&&(p=!0),A.done()}).next(()=>p)}function Su(n){return gi(n,bn.store)}function dd(n){return gi(n,ei.store)}function cE(n){return gi(n,Es.store)}class uf{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new uf(0)}static re(){return new uf(-1)}}class bT{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const s=new uf(t.highestTargetId);return t.highestTargetId=s.next(),this.ae(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>Et.fromTimestamp(new Dr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.oe(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.ae(e,a)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.oe(e).next(s=>(s.targetCount+=1,this.ue(t,s),this.ae(e,s))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>cf(e).delete(t.targetId)).next(()=>this.oe(e)).next(s=>(it(s.targetCount>0),s.targetCount-=1,this.ae(e,s)))}removeTargets(e,t,s){let a=0;const l=[];return cf(e).jt((p,_)=>{const b=af(_);b.sequenceNumber<=t&&null===s.get(b.targetId)&&(a++,l.push(this.removeTargetData(e,b)))}).next(()=>De.waitFor(l)).next(()=>a)}forEachTarget(e,t){return cf(e).jt((s,a)=>{const l=af(a);t(l)})}oe(e){return lE(e).get(ws.key).next(t=>(it(null!==t),t))}ae(e,t){return lE(e).put(ws.key,t)}ce(e,t){return cf(e).put(Rb(this.k,t))}ue(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Bh(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return cf(e).jt({range:a,index:Mi.queryTargetsIndexName},(p,_,b)=>{const A=af(_);Fp(t,A.target)&&(l=A,b.done())}).next(()=>l)}addMatchingKeys(e,t,s){const a=[],l=Xc(e);return t.forEach(p=>{const _=wa(p.path);a.push(l.put(new ti(s,_))),a.push(this.referenceDelegate.addReference(e,s,p))}),De.waitFor(a)}removeMatchingKeys(e,t,s){const a=Xc(e);return De.forEach(t,l=>{const p=wa(l.path);return De.waitFor([a.delete([s,p]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,t){const s=Xc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Xc(e);let l=Bt();return a.jt({range:s,Kt:!0},(p,_,b)=>{const A=ba(p[1]),M=new Qe(A);l=l.add(M)}).next(()=>l)}containsKey(e,t){const s=wa(t.path),a=IDBKeyRange.bound([s],[tb(s)],!1,!0);let l=0;return Xc(e).jt({index:ti.documentTargetsIndex,Kt:!0,range:a},([p,_],b,A)=>{0!==p&&(l++,A.done())}).next(()=>l>0)}Et(e,t){return cf(e).get(t).next(s=>s?af(s):null)}}function cf(n){return gi(n,Mi.store)}function lE(n){return gi(n,ws.store)}function Xc(n){return gi(n,ti.store)}function Cn(n){return ay.apply(this,arguments)}function ay(){return(ay=(0,pe.Z)(function*(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==Xv)throw n;Me("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function Mb([n,e],[t,s]){const a=Mt(n,t);return 0===a?Mt(e,s):a}class IT{constructor(e){this.he=e,this.buffer=new Un(Mb),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Mb(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Pb{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const s=this.we?3e5:6e4;Me("LruGarbageCollector",`Garbage collection scheduled in ${s}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,(0,pe.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(a){Po(a)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield Cn(a)}yield t.me(e)}))}}class CT{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return De.resolve(ys.I);const s=new IT(t);return this.ge.forEachTarget(e,a=>s.de(a.sequenceNumber)).next(()=>this.ge.pe(e,a=>s.de(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.ge.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),De.resolve(sy)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sy):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let s,a,l,p,_,b,A;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),a=this.params.maximumSequenceNumbersToCollect):a=O,p=Date.now(),this.nthSequenceNumber(e,a))).next(O=>(s=O,_=Date.now(),this.removeTargets(e,s,t))).next(O=>(l=O,b=Date.now(),this.removeOrphanedDocuments(e,s))).next(O=>(A=Date.now(),kh()<=So.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-M}ms\n\tDetermined least recently used ${a} in `+(_-p)+`ms\n\tRemoved ${l} targets in `+(b-_)+`ms\n\tRemoved ${O} documents in `+(A-b)+`ms\nTotal Duration: ${A-M}ms`),De.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:O})))}}class Ob{constructor(e,t){this.db=e,this.garbageCollector=new CT(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Ee(e){let t=0;return this.pe(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(s,a)=>t(a))}addReference(e,t,s){return Zp(e,s)}removeReference(e,t,s){return Zp(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Zp(e,t)}Ae(e,t){return function(s,a){let l=!1;return cE(s).Qt(p=>uE(s,p,a).next(_=>(_&&(l=!0),De.resolve(!_)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Ie(e,(p,_)=>{if(_<=t){const b=this.Ae(e,p).next(A=>{if(!A)return l++,s.getEntry(e,p).next(()=>(s.removeEntry(p),Xc(e).delete([0,wa(p.path)])))});a.push(b)}}).next(()=>De.waitFor(a)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Zp(e,t)}Ie(e,t){const s=Xc(e);let a,l=ys.I;return s.jt({index:ti.documentTargetsIndex},([p,_],{path:b,sequenceNumber:A})=>{0===p?(l!==ys.I&&t(new Qe(ba(a)),l),l=A,a=b):l=ys.I}).next(()=>{l!==ys.I&&t(new Qe(ba(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zp(n,e){return Xc(n).put((s=n.currentSequenceNumber,new ti(0,wa(e.path),s)));var s}class Oo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,l]of s)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0!==a){for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t])}else this.inner[s]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),!0;return!1}forEach(e){fi(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return jm(this.inner)}}class kb{constructor(){this.changes=new Oo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Et.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:sn.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?De.resolve(s.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class DT{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,s){return Au(e).put(dE(t),s)}removeEntry(e,t){const s=Au(e),a=dE(t);return s.delete(a)}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Re(e,s)))}getEntry(e,t){return Au(e).get(dE(t)).next(s=>this.Pe(t,s))}be(e,t){return Au(e).get(dE(t)).next(s=>({document:this.Pe(t,s),size:Kp(s)}))}getEntries(e,t){let s=Xs();return this.ve(e,t,(a,l)=>{const p=this.Pe(a,l);s=s.insert(a,p)}).next(()=>s)}Ve(e,t){let s=Xs(),a=new Tr(Qe.comparator);return this.ve(e,t,(l,p)=>{const _=this.Pe(l,p);s=s.insert(l,_),a=a.insert(l,Kp(p))}).next(()=>({documents:s,Se:a}))}ve(e,t,s){if(t.isEmpty())return De.resolve();const a=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),l=t.getIterator();let p=l.getNext();return Au(e).jt({range:a},(_,b,A)=>{const M=Qe.fromSegments(_);for(;p&&Qe.comparator(p,M)<0;)s(p,null),p=l.getNext();p&&p.isEqual(M)&&(s(p,b),p=l.hasNext()?l.getNext():null),p?A.Lt(p.path.toArray()):A.done()}).next(()=>{for(;p;)s(p,null),p=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,s){let a=Xs();const l=t.path.length+1,p={};if(s.isEqual(Et.min())){const _=t.path.toArray();p.range=IDBKeyRange.lowerBound(_)}else{const _=t.path.toArray(),b=iE(s);p.range=IDBKeyRange.lowerBound([_,b],!0),p.index=In.collectionReadTimeIndex}return Au(e).jt(p,(_,b,A)=>{if(_.length!==l)return;const M=ty(this.k,b);t.path.isPrefixOf(M.key.path)?Bp(t,M)&&(a=a.insert(M.key,M)):A.done()}).next(()=>a)}newChangeBuffer(e){return new Lb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Fb(e).get(Ia.key).next(t=>(it(!!t),t))}Re(e,t){return Fb(e).put(Ia.key,t)}Pe(e,t){if(t){const s=ty(this.k,t);if(!s.isNoDocument()||!s.version.isEqual(Et.min()))return s}return sn.newInvalidDocument(e)}}class Lb extends kb{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new Oo(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new Un((l,p)=>Mt(l.canonicalString(),p.canonicalString()));return this.changes.forEach((l,p)=>{const _=this.Ce.get(l);if(p.document.isValidDocument()){const b=Ab(this.De.k,p.document,this.getReadTime(l));a=a.add(l.path.popLast()),s+=Kp(b)-_,t.push(this.De.addEntry(e,l,b))}else if(s-=_,this.trackRemovals){const b=Ab(this.De.k,sn.newNoDocument(l,Et.min()),this.getReadTime(l));t.push(this.De.addEntry(e,l,b))}else t.push(this.De.removeEntry(e,l))}),a.forEach(l=>{t.push(this.De.Jt.addToCollectionParentIndex(e,l))}),t.push(this.De.updateMetadata(e,s)),De.waitFor(t)}getFromCache(e,t){return this.De.be(e,t).next(s=>(this.Ce.set(t,s.size),s.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:s,Se:a})=>(a.forEach((l,p)=>{this.Ce.set(l,p)}),s))}}function Fb(n){return gi(n,Ia.store)}function Au(n){return gi(n,In.store)}function dE(n){return n.path.toArray()}class Vb{constructor(e){this.k=e}Nt(e,t,s,a){it(s<a&&s>=0&&a<=11);const l=new tE("createOrUpgrade",t);var _;s<1&&a>=1&&(e.createObjectStore(vs.store),(_=e).createObjectStore(Es.store,{keyPath:Es.keyPath}),_.createObjectStore(bn.store,{keyPath:bn.keyPath,autoIncrement:!0}).createIndex(bn.userMutationsIndex,bn.userMutationsKeyPath,{unique:!0}),_.createObjectStore(ei.store),hE(e),function(_){_.createObjectStore(In.store)}(e));let p=De.resolve();return s<3&&a>=3&&(0!==s&&(function(_){_.deleteObjectStore(ti.store),_.deleteObjectStore(Mi.store),_.deleteObjectStore(ws.store)}(e),hE(e)),p=p.next(()=>function(_){const b=_.store(ws.store),A=new ws(0,0,Et.min().toTimestamp(),0);return b.put(ws.key,A)}(l))),s<4&&a>=4&&(0!==s&&(p=p.next(()=>function(_,b){return b.store(bn.store).Bt().next(A=>{_.deleteObjectStore(bn.store),_.createObjectStore(bn.store,{keyPath:bn.keyPath,autoIncrement:!0}).createIndex(bn.userMutationsIndex,bn.userMutationsKeyPath,{unique:!0});const M=b.store(bn.store),O=A.map(q=>M.put(q));return De.waitFor(O)})}(e,l))),p=p.next(()=>{!function(_){_.createObjectStore(Du.store,{keyPath:Du.keyPath})}(e)})),s<5&&a>=5&&(p=p.next(()=>this.Ne(l))),s<6&&a>=6&&(p=p.next(()=>(function(_){_.createObjectStore(Ia.store)}(e),this.ke(l)))),s<7&&a>=7&&(p=p.next(()=>this.xe(l))),s<8&&a>=8&&(p=p.next(()=>this.$e(e,l))),s<9&&a>=9&&(p=p.next(()=>{(function(_){_.objectStoreNames.contains("remoteDocumentChanges")&&_.deleteObjectStore("remoteDocumentChanges")})(e),function(_){const b=_.objectStore(In.store);b.createIndex(In.readTimeIndex,In.readTimeIndexPath,{unique:!1}),b.createIndex(In.collectionReadTimeIndex,In.collectionReadTimeIndexPath,{unique:!1})}(t)})),s<10&&a>=10&&(p=p.next(()=>this.Fe(l))),s<11&&a>=11&&(p=p.next(()=>{(function(_){_.createObjectStore(of.store,{keyPath:of.keyPath})})(e),function(_){_.createObjectStore(cd.store,{keyPath:cd.keyPath})}(e)})),p}ke(e){let t=0;return e.store(In.store).jt((s,a)=>{t+=Kp(a)}).next(()=>{const s=new Ia(t);return e.store(Ia.store).put(Ia.key,s)})}Ne(e){const t=e.store(Es.store),s=e.store(bn.store);return t.Bt().next(a=>De.forEach(a,l=>{const p=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.Bt(bn.userMutationsIndex,p).next(_=>De.forEach(_,b=>{it(b.userId===l.userId);const A=Jc(this.k,b);return aE(e,l.userId,A).next(()=>{})}))}))}xe(e){const t=e.store(ti.store),s=e.store(In.store);return e.store(ws.store).get(ws.key).next(a=>{const l=[];return s.jt((p,_)=>{const b=new Jt(p),A=[0,wa(b)];l.push(t.get(A).next(M=>M?De.resolve():t.put(new ti(0,wa(b),a.highestListenSequenceNumber))))}).next(()=>De.waitFor(l))})}$e(e,t){e.createObjectStore(ud.store,{keyPath:ud.keyPath});const s=t.store(ud.store),a=new sE,l=p=>{if(a.add(p)){const _=p.lastSegment(),b=p.popLast();return s.put({collectionId:_,parent:wa(b)})}};return t.store(In.store).jt({Kt:!0},(p,_)=>{const b=new Jt(p);return l(b.popLast())}).next(()=>t.store(ei.store).jt({Kt:!0},([p,_,b],A)=>{const M=ba(_);return l(M.popLast())}))}Fe(e){const t=e.store(Mi.store);return t.jt((s,a)=>{const l=af(a),p=Rb(this.k,l);return t.put(p)})}}function hE(n){n.createObjectStore(ti.store,{keyPath:ti.keyPath}).createIndex(ti.documentTargetsIndex,ti.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Mi.store,{keyPath:Mi.keyPath}).createIndex(Mi.queryTargetsIndexName,Mi.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(ws.store)}const eo="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fE{constructor(e,t,s,a,l,p,_,b,A,M){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Oe=l,this.window=p,this.document=_,this.Me=A,this.Le=M,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=O=>Promise.resolve(),!fE.bt())throw new Re(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ob(this,a),this.Ge=t+"main",this.k=new rE(b),this.ze=new bs(this.Ge,11,new Vb(this.k)),this.He=new bT(this.referenceDelegate,this.k),this.Jt=new wT,this.Je=new DT(this.k,this.Jt),this.Ye=new xb,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===M&&Cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(se.FAILED_PRECONDITION,eo);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new ys(e,this.Me)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var s=(0,pe.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,pe.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Is(e).put(new Du(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.an(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(Po(e))return Me("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return Yp(e).get(vs.key).next(t=>De.resolve(this.un(t)))}hn(e){return Is(e).delete(this.clientId)}ln(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=gi(s,Du.store);return a.Bt().next(l=>{const p=e.dn(l,18e5),_=l.filter(b=>-1===p.indexOf(b));return De.forEach(_,b=>a.delete(b.clientId)).next(()=>_)})}).catch(()=>[]);if(e.Xe)for(const s of t)e.Xe.removeItem(e.wn(s.clientId))}})()}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?De.resolve(!0):Yp(e).get(vs.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new Re(se.FAILED_PRECONDITION,eo);return!1}}return!(!this.networkEnabled||!this.inForeground)||Is(e).Bt().next(s=>void 0===this.dn(s,5e3).find(a=>{if(this.clientId!==a.clientId){const p=!this.inForeground&&a.inForeground,_=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||p&&_)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Me("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[vs.store,Du.store],t=>{const s=new Xm(t,ys.I);return e.an(s).next(()=>e.hn(s))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(s=>this.fn(s.updateTimeMs,t)&&!this._n(s.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>Is(e).Bt().next(t=>this.dn(t,18e5).map(s=>s.clientId)))}get started(){return this.Ue}getMutationQueue(e){return oy.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,s){let l;return Me("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",yT,p=>(l=new Xm(p,this.Be?this.Be.next():ys.I),"readwrite-primary"===t?this.rn(l).next(_=>!!_||this.on(l)).next(_=>{if(!_)throw Cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new Re(se.FAILED_PRECONDITION,Xv);return s(l)}).next(_=>this.cn(l).next(()=>_)):this.En(l).next(()=>s(l)))).then(p=>(l.raiseOnCommittedEvent(),p))}En(e){return Yp(e).get(vs.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(se.FAILED_PRECONDITION,eo)})}cn(e){const t=new vs(this.clientId,this.allowTabSynchronization,Date.now());return Yp(e).put(vs.key,t)}static bt(){return bs.bt()}an(e){const t=Yp(e);return t.get(vs.key).next(s=>this.un(s)?(Me("IndexedDbPersistence","Releasing primary lease."),t.delete(vs.key)):De.resolve())}fn(e,t){const s=Date.now();return!(e<s-t||e>s&&(Cr(`Detected an update time that is in the future: ${e} > ${s}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,Dt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const s=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Me("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Cr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){Cr("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yp(n){return gi(n,vs.store)}function Is(n){return gi(n,Du.store)}function Cs(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ko{constructor(e,t){this.progress=e,this.In=t}}class pE{constructor(e,t,s){this.Je=e,this.An=t,this.Jt=s}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(s=>this.Pn(e,t,s))}Pn(e,t,s){return this.Je.getEntry(e,t).next(a=>{for(const l of s)l.applyToLocalView(a);return a})}bn(e,t){e.forEach((s,a)=>{for(const l of t)l.applyToLocalView(a)})}vn(e,t){return this.Je.getEntries(e,t).next(s=>this.Vn(e,s).next(()=>s))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>this.bn(t,s))}getDocumentsMatchingQuery(e,t,s){return Qe.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.Sn(e,t.path):Ov(t)?this.Dn(e,t,s):this.Cn(e,t,s);var a}Sn(e,t){return this.Rn(e,new Qe(t)).next(s=>{let a=Wp();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}Dn(e,t,s){const a=t.collectionGroup;let l=Wp();return this.Jt.getCollectionParents(e,a).next(p=>De.forEach(p,_=>{const b=(A=t,M=_.child(a),new qt(M,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt));var A,M;return this.Cn(e,b,s).next(A=>{A.forEach((M,O)=>{l=l.insert(M,O)})})}).next(()=>l))}Cn(e,t,s){let a,l;return this.Je.getDocumentsMatchingQuery(e,t,s).next(p=>(a=p,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(p=>(l=p,this.Nn(e,l,a).next(_=>{a=_;for(const b of l)for(const A of b.mutations){const M=A.key;let O=a.get(M);null==O&&(O=sn.newInvalidDocument(M),a=a.insert(M,O)),fb(A,O,b.localWriteTime),O.isFoundDocument()||(a=a.remove(M))}}))).next(()=>(a.forEach((p,_)=>{Bp(t,_)||(a=a.remove(p))}),a))}Nn(e,t,s){let a=Bt();for(const p of t)for(const _ of p.mutations)_ instanceof Zc&&null===s.get(_.key)&&(a=a.add(_.key));let l=s;return this.Je.getEntries(e,a).next(p=>(p.forEach((_,b)=>{b.isFoundDocument()&&(l=l.insert(_,b))}),l))}}class uy{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.kn=s,this.xn=a}static $n(e,t){let s=Bt(),a=Bt();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new uy(e,t.fromCache,s,a)}}class Ub{Fn(e){this.On=e}getDocumentsMatchingQuery(e,t,s,a){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||s.isEqual(Et.min())?this.Mn(e,t):this.On.vn(e,a).next(l=>{const p=this.Ln(t,l);return(Qs(t)||zh(t))&&this.Bn(t.limitType,p,a,s)?this.Mn(e,t):(kh()<=So.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fv(t)),this.On.getDocumentsMatchingQuery(e,t,s).next(_=>(p.forEach(b=>{_=_.insert(b.key,b)}),_)))});var l}Ln(e,t){let s=new Un(Kh(e));return t.forEach((a,l)=>{Bp(e,l)&&(s=s.add(l))}),s}Bn(e,t,s,a){if(s.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Mn(e,t){return kh()<=So.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",Fv(t)),this.On.getDocumentsMatchingQuery(e,t,Et.min())}}class TT{constructor(e,t,s,a){this.persistence=e,this.Un=t,this.k=a,this.qn=new Tr(Mt),this.Kn=new Oo(l=>Bh(l),Fp),this.jn=Et.min(),this.An=e.getMutationQueue(s),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new pE(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function jb(n,e,t,s){return new TT(n,e,t,s)}function Bb(n,e){return Qp.apply(this,arguments)}function Qp(){return(Qp=(0,pe.Z)(function*(n,e){const t=Le(n);let s=t.An,a=t.Wn;const l=yield t.persistence.runTransaction("Handle user change","readonly",p=>{let _;return t.An.getAllMutationBatches(p).next(b=>(_=b,s=t.persistence.getMutationQueue(e),a=new pE(t.Qn,s,t.persistence.getIndexManager()),s.getAllMutationBatches(p))).next(b=>{const A=[],M=[];let O=Bt();for(const q of _){A.push(q.batchId);for(const W of q.mutations)O=O.add(W.key)}for(const q of b){M.push(q.batchId);for(const W of q.mutations)O=O.add(W.key)}return a.vn(p,O).next(q=>({Gn:q,removedBatchIds:A,addedBatchIds:M}))})});return t.An=s,t.Wn=a,t.Un.Fn(t.Wn),l})).apply(this,arguments)}function Jp(n,e){const t=Le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.Qn.newChangeBuffer({trackRemovals:!0});return function(p,_,b,A){const M=b.batch,O=M.keys();let q=De.resolve();return O.forEach(W=>{q=q.next(()=>A.getEntry(_,W)).next(de=>{const Pe=b.docVersions.get(W);it(null!==Pe),de.version.compareTo(Pe)<0&&(M.applyToRemoteDocument(de,b),de.isValidDocument()&&A.addEntry(de,b.commitVersion))})}),q.next(()=>p.An.removeMutationBatch(_,M))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.An.performConsistencyCheck(s)).next(()=>t.Wn.vn(s,a))})}function $b(n){const e=Le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function Hb(n,e){const t=Le(n),s=e.snapshotVersion;let a=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const p=t.Qn.newChangeBuffer({trackRemovals:!0});a=t.qn;const _=[];e.targetChanges.forEach((A,M)=>{const O=a.get(M);if(!O)return;_.push(t.He.removeMatchingKeys(l,A.removedDocuments,M).next(()=>t.He.addMatchingKeys(l,A.addedDocuments,M)));const q=A.resumeToken;if(q.approximateByteSize()>0){const W=O.withResumeToken(q,s).withSequenceNumber(l.currentSequenceNumber);a=a.insert(M,W),de=O,je=A,it((Pe=W).resumeToken.approximateByteSize()>0),(0===de.resumeToken.approximateByteSize()||Pe.snapshotVersion.toMicroseconds()-de.snapshotVersion.toMicroseconds()>=3e8||je.addedDocuments.size+je.modifiedDocuments.size+je.removedDocuments.size>0)&&_.push(t.He.updateTargetData(l,W))}var de,Pe,je});let b=Xs();if(e.documentUpdates.forEach((A,M)=>{e.resolvedLimboDocuments.has(A)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(l,A))}),_.push(Gb(l,p,e.documentUpdates,s,void 0).next(A=>{b=A})),!s.isEqual(Et.min())){const A=t.He.getLastRemoteSnapshotVersion(l).next(M=>t.He.setTargetsMetadata(l,l.currentSequenceNumber,s));_.push(A)}return De.waitFor(_).next(()=>p.apply(l)).next(()=>t.Wn.Vn(l,b)).next(()=>b)}).then(l=>(t.qn=a,l))}function Gb(n,e,t,s,a){let l=Bt();return t.forEach(p=>l=l.add(p)),e.getEntries(n,l).next(p=>{let _=Xs();return t.forEach((b,A)=>{const M=p.get(b),O=(null==a?void 0:a.get(b))||s;A.isNoDocument()&&A.version.isEqual(Et.min())?(e.removeEntry(b,O),_=_.insert(b,A)):!M.isValidDocument()||A.version.compareTo(M.version)>0||0===A.version.compareTo(M.version)&&M.hasPendingWrites?(e.addEntry(A,O),_=_.insert(b,A)):Me("LocalStore","Ignoring outdated watch update for ",b,". Current version:",M.version," Watch version:",A.version)}),_})}function zb(n,e){const t=Le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(s,e)))}function hd(n,e){const t=Le(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.He.getTargetData(s,e).next(l=>l?(a=l,De.resolve(a)):t.He.allocateTargetId(s).next(p=>(a=new Yc(e,p,0,s.currentSequenceNumber),t.He.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.qn.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.qn=t.qn.insert(s.targetId,s),t.Kn.set(e,s.targetId)),s})}function Ru(n,e,t){return gE.apply(this,arguments)}function gE(){return(gE=(0,pe.Z)(function*(n,e,t){const s=Le(n),a=s.qn.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",l,p=>s.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!Po(p))throw p;Me("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}s.qn=s.qn.remove(e),s.Kn.delete(a.target)})).apply(this,arguments)}function Xp(n,e,t){const s=Le(n);let a=Et.min(),l=Bt();return s.persistence.runTransaction("Execute query","readonly",p=>function(_,b,A){const M=Le(_),O=M.Kn.get(A);return void 0!==O?De.resolve(M.qn.get(O)):M.He.getTargetData(b,A)}(s,p,_s(e)).next(_=>{if(_)return a=_.lastLimboFreeSnapshotVersion,s.He.getMatchingKeysForTargetId(p,_.targetId).next(b=>{l=b})}).next(()=>s.Un.getDocumentsMatchingQuery(p,e,t?a:Et.min(),t?l:Bt())).next(_=>({documents:_,zn:l})))}function mE(n,e){const t=Le(n),s=Le(t.He),a=t.qn.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>s.Et(l,e).next(p=>p?p.target:null))}function cy(n){const e=Le(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(s,a,l){const p=Le(s);let _=Xs(),b=iE(l);const A=Au(a),M=IDBKeyRange.lowerBound(b,!0);return A.jt({index:In.readTimeIndex,range:M},(O,q)=>{const W=ty(p.k,q);_=_.insert(W.key,W),b=q.readTime}).next(()=>({In:_,readTime:ny(b)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:s})=>(e.jn=s,t))}function ly(){return(ly=(0,pe.Z)(function*(n){const e=Le(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(s){const a=Au(s);let l=Et.min();return a.jt({index:In.readTimeIndex,reverse:!0},(p,_,b)=>{_.readTime&&(l=ny(_.readTime)),b.done()}).next(()=>l)}(t)).then(t=>{e.jn=t})})).apply(this,arguments)}function dy(){return(dy=(0,pe.Z)(function*(n,e,t,s){const a=Le(n);let l=Bt(),p=Xs(),_=Jh();for(const M of t){const O=e.Hn(M.metadata.name);M.document&&(l=l.add(O)),p=p.insert(O,e.Jn(M)),_=_.insert(O,e.Yn(M.metadata.readTime))}const b=a.Qn.newChangeBuffer({trackRemovals:!0}),A=yield hd(a,(M=s,_s(Up(Jt.fromString(`__bundle__/docs/${M}`)))));var M;return a.persistence.runTransaction("Apply bundle documents","readwrite",M=>Gb(M,b,p,Et.min(),_).next(O=>(b.apply(M),O)).next(O=>a.He.removeMatchingKeysForTargetId(M,A.targetId).next(()=>a.He.addMatchingKeys(M,l,A.targetId)).next(()=>a.Wn.Vn(M,O)).next(()=>O)))})).apply(this,arguments)}function qb(n,e){return hy.apply(this,arguments)}function hy(){return(hy=(0,pe.Z)(function*(n,e,t=Bt()){const s=yield hd(n,_s(ry(e.bundledQuery))),a=Le(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const p=Sr(e.readTime);if(s.snapshotVersion.compareTo(p)>=0)return a.Ye.saveNamedQuery(l,e);const _=s.withResumeToken(Br.EMPTY_BYTE_STRING,p);return a.qn=a.qn.insert(_.targetId,_),a.He.updateTargetData(l,_).next(()=>a.He.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>a.He.addMatchingKeys(l,t,s.targetId)).next(()=>a.Ye.saveNamedQuery(l,e))})})).apply(this,arguments)}class Kb{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return De.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var s;return this.Xn.set(t.id,{id:(s=t).id,version:s.version,createTime:Sr(s.createTime)}),De.resolve()}getNamedQuery(e,t){return De.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(s=t).name,query:ry(s.bundledQuery),readTime:Sr(s.readTime)}),De.resolve();var s}}class fy{constructor(){this.ts=new Un(Ar.es),this.ns=new Un(Ar.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const s=new Ar(e,t);this.ts=this.ts.add(s),this.ns=this.ns.add(s)}rs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.os(new Ar(e,t))}cs(e,t){e.forEach(s=>this.removeReference(s,t))}us(e){const t=new Qe(new Jt([])),s=new Ar(t,e),a=new Ar(t,e+1),l=[];return this.ns.forEachInRange([s,a],p=>{this.os(p),l.push(p.key)}),l}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new Qe(new Jt([])),s=new Ar(t,e),a=new Ar(t,e+1);let l=Bt();return this.ns.forEachInRange([s,a],p=>{l=l.add(p.key)}),l}containsKey(e){const t=new Ar(e,0),s=this.ts.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Ar{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return Qe.comparator(e.key,t.key)||Mt(e.fs,t.fs)}static ss(e,t){return Mt(e.fs,t.fs)||Qe.comparator(e.key,t.key)}}class ST{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new Un(Ar.es)}checkEmpty(e){return De.resolve(0===this.An.length)}addMutationBatch(e,t,s,a){const l=this.ds;this.ds++;const p=new ey(l,t,s,a);this.An.push(p);for(const _ of a)this.ws=this.ws.add(new Ar(_.key,l)),this.Jt.addToCollectionParentIndex(e,_.key.path.popLast());return De.resolve(p)}lookupMutationBatch(e,t){return De.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.gs(t+1),l=a<0?0:a;return De.resolve(this.An.length>l?this.An[l]:null)}getHighestUnacknowledgedBatchId(){return De.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return De.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ar(t,0),a=new Ar(t,Number.POSITIVE_INFINITY),l=[];return this.ws.forEachInRange([s,a],p=>{const _=this._s(p.fs);l.push(_)}),De.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Un(Mt);return t.forEach(a=>{const l=new Ar(a,0),p=new Ar(a,Number.POSITIVE_INFINITY);this.ws.forEachInRange([l,p],_=>{s=s.add(_.fs)})}),De.resolve(this.ys(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Qe.isDocumentKey(l)||(l=l.child(""));const p=new Ar(new Qe(l),0);let _=new Un(Mt);return this.ws.forEachWhile(b=>{const A=b.key.path;return!!s.isPrefixOf(A)&&(A.length===a&&(_=_.add(b.fs)),!0)},p),De.resolve(this.ys(_))}ys(e){const t=[];return e.forEach(s=>{const a=this._s(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){it(0===this.ps(t.batchId,"removed")),this.An.shift();let s=this.ws;return De.forEach(t.mutations,a=>{const l=new Ar(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.ws=s})}ee(e){}containsKey(e,t){const s=new Ar(t,0),a=this.ws.firstAfterOrEqual(s);return De.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return De.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class AT{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new Tr(Qe.comparator),this.size=0}addEntry(e,t,s){const a=t.key,l=this.docs.get(a),p=l?l.size:0,_=this.Ts(t);return this.docs=this.docs.insert(a,{document:t.clone(),size:_,readTime:s}),this.size+=_-p,this.Jt.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return De.resolve(s?s.document.clone():sn.newInvalidDocument(t))}getEntries(e,t){let s=Xs();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.clone():sn.newInvalidDocument(a))}),De.resolve(s)}getDocumentsMatchingQuery(e,t,s){let a=Xs();const l=new Qe(t.path.child("")),p=this.docs.getIteratorFrom(l);for(;p.hasNext();){const{key:_,value:{document:b,readTime:A}}=p.getNext();if(!t.path.isPrefixOf(_.path))break;A.compareTo(s)<=0||Bp(t,b)&&(a=a.insert(b.key,b.clone()))}return De.resolve(a)}Es(e,t){return De.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new RT(this)}getSize(e){return De.resolve(this.size)}}class RT extends kb{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.document.isValidDocument()?t.push(this.De.addEntry(e,a.document,this.getReadTime(s))):this.De.removeEntry(s)}),De.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class xT{constructor(e){this.persistence=e,this.Is=new Oo(t=>Bh(t),Fp),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.As=0,this.Rs=new fy,this.targetCount=0,this.Ps=uf.ie()}forEachTarget(e,t){return this.Is.forEach((s,a)=>t(a)),De.resolve()}getLastRemoteSnapshotVersion(e){return De.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return De.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.Ps.next(),De.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.As&&(this.As=t),De.resolve()}ce(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ps=new uf(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,De.resolve()}updateTargetData(e,t){return this.ce(t),De.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,De.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.Is.forEach((p,_)=>{_.sequenceNumber<=t&&null===s.get(_.targetId)&&(this.Is.delete(p),l.push(this.removeMatchingKeysForTargetId(e,_.targetId)),a++)}),De.waitFor(l).next(()=>a)}getTargetCount(e){return De.resolve(this.targetCount)}getTargetData(e,t){const s=this.Is.get(t)||null;return De.resolve(s)}addMatchingKeys(e,t,s){return this.Rs.rs(t,s),De.resolve()}removeMatchingKeys(e,t,s){this.Rs.cs(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(p=>{l.push(a.markPotentiallyOrphaned(e,p))}),De.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),De.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Rs.ls(t);return De.resolve(s)}containsKey(e,t){return De.resolve(this.Rs.containsKey(t))}}class NT{constructor(e,t){this.bs={},this.Be=new ys(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new xT(this),this.Jt=new ET,this.Je=new AT(this.Jt,s=>this.referenceDelegate.vs(s)),this.k=new rE(t),this.Ye=new Kb(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new ST(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,s){Me("MemoryPersistence","Starting transaction:",e);const a=new MT(this.Be.next());return this.referenceDelegate.Vs(),s(a).next(l=>this.referenceDelegate.Ss(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ds(e,t){return De.or(Object.values(this.bs).map(s=>()=>s.containsKey(e,t)))}}class MT extends eE{constructor(e){super(),this.currentSequenceNumber=e}}class _E{constructor(e){this.persistence=e,this.Cs=new fy,this.Ns=null}static ks(e){return new _E(e)}get xs(){if(this.Ns)return this.Ns;throw Xe()}addReference(e,t,s){return this.Cs.addReference(s,t),this.xs.delete(s.toString()),De.resolve()}removeReference(e,t,s){return this.Cs.removeReference(s,t),this.xs.add(s.toString()),De.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),De.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(a=>this.xs.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.xs.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return De.forEach(this.xs,s=>{const a=Qe.fromPath(s);return this.$s(e,a).next(l=>{l||t.removeEntry(a)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(s=>{s?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return De.or([()=>De.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function Zb(n,e){return`firestore_clients_${n}_${e}`}function Yb(n,e,t){let s=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function vE(n,e){return`firestore_targets_${n}_${e}`}class py{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static Fs(e,t,s){const a=JSON.parse(s);let l,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(l=new Re(a.error.code,a.error.message))),p?new py(e,t,a.state,l):(Cr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eg{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Fs(e,t){const s=JSON.parse(t);let a,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(a=new Re(s.error.code,s.error.message))),l?new eg(e,s.state,a):(Cr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gy{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Fs(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,l=Ni();for(let p=0;a&&p<s.activeTargetIds.length;++p)a=ib(s.activeTargetIds[p]),l=l.add(s.activeTargetIds[p]);return a?new gy(e,l):(Cr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class EE{constructor(e,t){this.clientId=e,this.onlineState=t}static Fs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new EE(t.clientId,t.onlineState):(Cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wE{constructor(){this.activeTargetIds=Ni()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bE{constructor(e,t,s,a,l){this.window=e,this.Oe=t,this.persistenceKey=s,this.Bs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Tr(Mt),this.started=!1,this.js=[];const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Qs=Zb(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new wE),this.Gs=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(_){return`firestore_bundle_loaded_${_}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.Tn();for(const a of t){if(a===e.Bs)continue;const l=e.getItem(Zb(e.persistenceKey,a));if(l){const p=gy.Fs(a,l);p&&(e.Ks=e.Ks.insert(p.clientId,p))}}e.Xs();const s=e.storage.getItem(e.Js);if(s){const a=e.Zs(s);a&&e.ti(a)}for(const a of e.js)e.qs(a);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,s){this.ni(e,t,s),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(vE(this.persistenceKey,e));if(s){const a=eg.Fs(e,s);a&&(t=a.state)}}return this.ii.Ms(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(vE(this.persistenceKey,e))}updateQueryState(e,t,s){this.ri(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.si(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Me("SharedClientState","READ",e,t),t}setItem(e,t){Me("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Me("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Me("SharedClientState","EVENT",s.key,s.newValue),s.key===this.Qs)return void Cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==s.key)if(t.Gs.test(s.key)){if(null==s.newValue){const a=t.ci(s.key);return t.ui(a,null)}{const a=t.hi(s.key,s.newValue);if(a)return t.ui(a.clientId,a)}}else if(t.zs.test(s.key)){if(null!==s.newValue){const a=t.li(s.key,s.newValue);if(a)return t.fi(a)}}else if(t.Hs.test(s.key)){if(null!==s.newValue){const a=t.di(s.key,s.newValue);if(a)return t.wi(a)}}else if(s.key===t.Js){if(null!==s.newValue){const a=t.Zs(s.newValue);if(a)return t.ti(a)}}else if(s.key===t.Ws){const a=function(l){let p=ys.I;if(null!=l)try{const _=JSON.parse(l);it("number"==typeof _),p=_}catch(_){Cr("SharedClientState","Failed to read sequence number from WebStorage",_)}return p}(s.newValue);a!==ys.I&&t.sequenceNumberHandler(a)}else if(s.key===t.Ys)return t.syncEngine._i()}else t.js.push(s)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(e,t,s){const a=new py(this.currentUser,e,t,s),l=Yb(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Os())}si(e){const t=Yb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,s){const a=vE(this.persistenceKey,e),l=new eg(e,t,s);this.setItem(a,l.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const s=this.ci(e);return gy.Fs(s,t)}li(e,t){const s=this.zs.exec(e),a=Number(s[1]);return py.Fs(new Ir(void 0!==s[2]?s[2]:null),a,t)}di(e,t){const s=this.Hs.exec(e),a=Number(s[1]);return eg.Fs(a,t)}Zs(e){return EE.Fs(e)}fi(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);Me("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const s=t?this.Ks.insert(e,t):this.Ks.remove(e),a=this.ei(this.Ks),l=this.ei(s),p=[],_=[];return l.forEach(b=>{a.has(b)||p.push(b)}),a.forEach(b=>{l.has(b)||_.push(b)}),this.syncEngine.yi(p,_).then(()=>{this.Ks=s})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=Ni();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Qb{constructor(){this.pi=new wE,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,t,s){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new wE,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class PT{Ei(e){}shutdown(){}}class IE{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Pi(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Jb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Xb{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Fi(e){this.ki(e)}Oi(e){this.xi(e)}}class eI extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Mi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,s,a,l){const p=this.Ui(e,t);Me("RestConnection","Sending: ",p,s);const _={};return this.qi(_,a,l),this.Ki(e,p,_,s).then(b=>(Me("RestConnection","Received: ",b),b),b=>{throw Lh("RestConnection",`${e} failed with error: `,b,"url: ",p,"request:",s),b})}ji(e,t,s,a,l){return this.Bi(e,t,s,a,l)}qi(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+zc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}Ui(e,t){return`${this.Mi}/v1/${t}:${Jb[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,s,a){return new Promise((l,p)=>{const _=new Q0;_.listenOnce(Dv.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Gc.NO_ERROR:const A=_.getResponseJson();Me("Connection","XHR received:",JSON.stringify(A)),l(A);break;case Gc.TIMEOUT:Me("Connection",'RPC "'+e+'" timed out'),p(new Re(se.DEADLINE_EXCEEDED,"Request time out"));break;case Gc.HTTP_ERROR:const M=_.getStatus();if(Me("Connection",'RPC "'+e+'" failed with status:',M,"response text:",_.getResponseText()),M>0){const O=_.getResponseJson().error;if(O&&O.status&&O.message){const q=function(W){const de=W.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(de)>=0?de:se.UNKNOWN}(O.status);p(new Re(q,O.message))}else p(new Re(se.UNKNOWN,"Server responded with status "+_.getStatus()))}else p(new Re(se.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Me("Connection",'RPC "'+e+'" completed.')}});const b=JSON.stringify(a);_.send(t,"POST",b,s,15)})}Qi(e,t,s){const a=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=FD(),p=Np(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new Oh({})),this.qi(_.initMessageHeaders,t,s),(0,Dt.uI)()||(0,Dt.b$)()||(0,Dt.d)()||(0,Dt.w1)()||(0,Dt.Mn)()||(0,Dt.ru)()||(_.httpHeadersOverwriteParam="$httpHeaders");const b=a.join("");Me("Connection","Creating WebChannel: "+b,_);const A=l.createWebChannel(b,_);let M=!1,O=!1;const q=new Xb({Vi:de=>{O?Me("Connection","Not sending because WebChannel is closed:",de):(M||(Me("Connection","Opening WebChannel transport."),A.open(),M=!0),Me("Connection","WebChannel sending:",de),A.send(de))},Si:()=>A.close()}),W=(de,Pe,je)=>{de.listen(Pe,dt=>{try{je(dt)}catch(xt){setTimeout(()=>{throw xt},0)}})};return W(A,Vm.EventType.OPEN,()=>{O||Me("Connection","WebChannel transport opened.")}),W(A,Vm.EventType.CLOSE,()=>{O||(O=!0,Me("Connection","WebChannel transport closed"),q.Fi())}),W(A,Vm.EventType.ERROR,de=>{O||(O=!0,Lh("Connection","WebChannel transport errored:",de),q.Fi(new Re(se.UNAVAILABLE,"The operation could not be completed")))}),W(A,Vm.EventType.MESSAGE,de=>{var Pe;if(!O){const je=de.data[0];it(!!je);const dt=je,xt=dt.error||(null===(Pe=dt[0])||void 0===Pe?void 0:Pe.error);if(xt){Me("Connection","WebChannel received error:",xt);const Tn=xt.status;let Ot=function(ju){const DD=pr[ju];if(void 0!==DD)return gb(DD)}(Tn),ir=xt.message;void 0===Ot&&(Ot=se.INTERNAL,ir="Unknown error status: "+Tn+" with message "+xt.message),O=!0,q.Fi(new Re(Ot,ir)),A.close()}else Me("Connection","WebChannel received:",je),q.Oi(je)}}),W(p,Mh.STAT_EVENT,de=>{de.stat===Ph.PROXY?Me("Connection","Detected buffering proxy"):de.stat===Ph.NOPROXY&&Me("Connection","Detected no buffering proxy")}),setTimeout(()=>{q.$i()},0),q}}function CE(){return"undefined"!=typeof window?window:null}function tg(){return"undefined"!=typeof document?document:null}function lf(n){return new yb(n,!0)}class my{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Oe=e,this.timerId=t,this.Wi=s,this.Gi=a,this.zi=l,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),s=Math.max(0,Date.now()-this.Yi),a=Math.max(0,t-s);a>0&&Me("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,a,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class DE{constructor(e,t,s,a,l,p,_,b){this.Oe=e,this.nr=s,this.sr=a,this.ir=l,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=_,this.listener=b,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new my(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,pe.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,pe.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var s=this;return(0,pe.Z)(function*(){s.yr(),s.pr(),s.ur.cancel(),s.rr++,4!==e?s.ur.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(Cr(t.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),s.ur.Xi()):t&&t.code===se.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Tr(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.rr===t&&this.Ir(s,a)},s=>{e(()=>{const a=new Re(se.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Ar(a)})})}Ir(e,t){const s=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{s(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(a=>{s(()=>this.Ar(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}dr(){var e=this;this.state=5,this.ur.Zi((0,pe.Z)(function*(){e.state=0,e.start()}))}Ar(e){return Me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Oe.enqueueAndForget(()=>this.rr===e?t():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TE extends DE{constructor(e,t,s,a,l,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,p),this.k=l}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(n,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(b=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===b?1:"REMOVE"===b?2:"CURRENT"===b?3:"RESET"===b?4:Xe(),a=e.targetChange.targetIds||[],l=function(b,A){return b.C?(it(void 0===A||"string"==typeof A),Br.fromBase64String(A||"")):(it(void 0===A||A instanceof Uint8Array),Br.fromUint8Array(A||new Uint8Array))}(n,e.targetChange.resumeToken),p=e.targetChange.cause,_=p&&function(b){const A=void 0===b.code?se.UNKNOWN:gb(b.code);return new Re(A,b.message||"")}(p);t=new id(s,a,l,_||null)}else if("documentChange"in e){const s=e.documentChange,a=Ea(n,s.document.name),l=Sr(s.document.updateTime),p=new Jr({mapValue:{fields:s.document.fields}}),_=sn.newFoundDocument(a,l,p);t=new Cu(s.targetIds||[],s.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const s=e.documentDelete,a=Ea(n,s.document),l=s.readTime?Sr(s.readTime):Et.min(),p=sn.newNoDocument(a,l);t=new Cu([],s.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const s=e.documentRemove,a=Ea(n,s.document);t=new Cu([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Xe();{const s=e.filter,l=new iT(s.count||0);t=new rd(s.targetId,l)}}var b;return t}(this.k,e),s=function(a){if(!("targetChange"in a))return Et.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Et.min():l.readTime?Sr(l.readTime):Et.min()}(e);return this.listener.Pr(t,s)}br(e){const t={};t.database=qp(this.k),t.addTarget=function(a,l){let p;const _=l.target;return p=Gm(_)?{documents:bb(a,_)}:{query:cT(a,_)},p.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?p.resumeToken=qv(a,l.resumeToken):l.snapshotVersion.compareTo(Et.min())>0&&(p.readTime=tf(a,l.snapshotVersion.toTimestamp())),p}(this.k,e);const s=function(n,e){const t=function(s,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.gr(t)}vr(e){const t={};t.database=qp(this.k),t.removeTarget=e,this.gr(t)}}class tI extends DE{constructor(e,t,s,a,l,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,p),this.k=l,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(it(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(n,e){return n&&n.length>0?(it(void 0!==e),n.map(t=>function(s,a){let l=Sr(s.updateTime?s.updateTime:a);return l.isEqual(Et.min())&&(l=Sr(a)),new hb(l,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Sr(e.commitTime);return this.listener.Cr(s,t)}return it(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=qp(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Ym(this.k,s))};this.gr(t)}}class fd extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=s,this.k=a,this.$r=!1}Fr(){if(this.$r)throw new Re(se.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,s){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.ir.Bi(e,t,s,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Re(se.UNKNOWN,a.toString())})}ji(e,t,s){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.ir.ji(e,t,s,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Re(se.UNKNOWN,a.toString())})}terminate(){this.$r=!0}}class OT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Cr(t),this.Lr=!1):Me("OnlineStateTracker",t)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class kT{constructor(e,t,s,a,l){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=l,this.Hr.Ei(_=>{s.enqueueAndForget((0,pe.Z)(function*(){var b;tl(p)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(b=(0,pe.Z)(function*(A){const M=Le(A);M.Gr.add(4),yield el(M),M.Jr.set("Unknown"),M.Gr.delete(4),yield Ca(M)}),function(A){return b.apply(this,arguments)})(p))}))}),this.Jr=new OT(s,a)}}function Ca(n){return nI.apply(this,arguments)}function nI(){return(nI=(0,pe.Z)(function*(n){if(tl(n))for(const e of n.zr)yield e(!0)})).apply(this,arguments)}function el(n){return rI.apply(this,arguments)}function rI(){return(rI=(0,pe.Z)(function*(n){for(const e of n.zr)yield e(!1)})).apply(this,arguments)}function ng(n,e){const t=Le(n);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),AE(t)?SE(t):Da(t).lr()&&iI(t,e))}function df(n,e){const t=Le(n),s=Da(t);t.Wr.delete(e),s.lr()&&nt(t,e),0===t.Wr.size&&(s.lr()?s._r():tl(t)&&t.Jr.set("Unknown"))}function iI(n,e){n.Yr.X(e.targetId),Da(n).br(e)}function nt(n,e){n.Yr.X(e),Da(n).vr(e)}function SE(n){n.Yr=new Xh({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Wr.get(e)||null}),Da(n).start(),n.Jr.Br()}function AE(n){return tl(n)&&!Da(n).hr()&&n.Wr.size>0}function tl(n){return 0===Le(n).Gr.size}function rg(n){n.Yr=void 0}function LT(n){return hf.apply(this,arguments)}function hf(){return(hf=(0,pe.Z)(function*(n){n.Wr.forEach((e,t)=>{iI(n,e)})})).apply(this,arguments)}function yy(n,e){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,pe.Z)(function*(n,e){rg(n),AE(n)?(n.Jr.Kr(e),SE(n)):n.Jr.set("Unknown")})).apply(this,arguments)}function JR(n,e,t){return _y.apply(this,arguments)}function _y(){return(_y=(0,pe.Z)(function*(n,e,t){if(n.Jr.set("Online"),e instanceof id&&2===e.state&&e.cause)try{yield(s=(0,pe.Z)(function*(a,l){const p=l.cause;for(const _ of l.targetIds)a.Wr.has(_)&&(yield a.remoteSyncer.rejectListen(_,p),a.Wr.delete(_),a.Yr.removeTarget(_))}),function(a,l){return s.apply(this,arguments)})(n,e)}catch(s){Me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield ff(n,s)}else if(e instanceof Cu?n.Yr.ot(e):e instanceof rd?n.Yr.dt(e):n.Yr.ut(e),!t.isEqual(Et.min()))try{const s=yield $b(n.localStore);t.compareTo(s)>=0&&(yield function(a,l){const p=a.Yr.gt(l);return p.targetChanges.forEach((_,b)=>{if(_.resumeToken.approximateByteSize()>0){const A=a.Wr.get(b);A&&a.Wr.set(b,A.withResumeToken(_.resumeToken,l))}}),p.targetMismatches.forEach(_=>{const b=a.Wr.get(_);if(!b)return;a.Wr.set(_,b.withResumeToken(Br.EMPTY_BYTE_STRING,b.snapshotVersion)),nt(a,_);const A=new Yc(b.target,_,1,b.sequenceNumber);iI(a,A)}),a.remoteSyncer.applyRemoteEvent(p)}(n,t))}catch(s){Me("RemoteStore","Failed to raise snapshot:",s),yield ff(n,s)}var s})).apply(this,arguments)}function ff(n,e,t){return RE.apply(this,arguments)}function RE(){return(RE=(0,pe.Z)(function*(n,e,t){if(!Po(e))throw e;n.Gr.add(1),yield el(n),n.Jr.set("Offline"),t||(t=()=>$b(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield t(),n.Gr.delete(1),yield Ca(n)}))})).apply(this,arguments)}function xE(n,e){return e().catch(t=>ff(n,t,e))}function pd(n){return vy.apply(this,arguments)}function vy(){return(vy=(0,pe.Z)(function*(n){const e=Le(n),t=nl(e);let s=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;sI(e);)try{const a=yield zb(e.localStore,s);if(null===a){0===e.Qr.length&&t._r();break}s=a.batchId,FT(e,a)}catch(a){yield ff(e,a)}oI(e)&&aI(e)})).apply(this,arguments)}function sI(n){return tl(n)&&n.Qr.length<10}function FT(n,e){n.Qr.push(e);const t=nl(n);t.lr()&&t.Sr&&t.Dr(e.mutations)}function oI(n){return tl(n)&&!nl(n).hr()&&n.Qr.length>0}function aI(n){nl(n).start()}function ig(n){return NE.apply(this,arguments)}function NE(){return(NE=(0,pe.Z)(function*(n){nl(n).kr()})).apply(this,arguments)}function VT(n){return ME.apply(this,arguments)}function ME(){return(ME=(0,pe.Z)(function*(n){const e=nl(n);for(const t of n.Qr)e.Dr(t.mutations)})).apply(this,arguments)}function Ey(n,e,t){return wy.apply(this,arguments)}function wy(){return(wy=(0,pe.Z)(function*(n,e,t){const s=n.Qr.shift(),a=Sb.from(s,e,t);yield xE(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield pd(n)})).apply(this,arguments)}function uI(n,e){return by.apply(this,arguments)}function by(){return(by=(0,pe.Z)(function*(n,e){var t;e&&nl(n).Sr&&(yield(t=(0,pe.Z)(function*(s,a){if(pb(l=a.code)&&l!==se.ABORTED){const p=s.Qr.shift();nl(s).wr(),yield xE(s,()=>s.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield pd(s)}var l}),function(s,a){return t.apply(this,arguments)})(n,e)),oI(n)&&aI(n)})).apply(this,arguments)}function PE(n,e){return gd.apply(this,arguments)}function gd(){return(gd=(0,pe.Z)(function*(n,e){const t=Le(n);e?(t.Gr.delete(2),yield Ca(t)):e||(t.Gr.add(2),yield el(t),t.Jr.set("Unknown"))})).apply(this,arguments)}function Da(n){return n.Xr||(n.Xr=function(e,t,s){const a=Le(e);return a.Fr(),new TE(t,a.ir,a.authCredentials,a.appCheckCredentials,a.k,s)}(n.datastore,n.asyncQueue,{Di:LT.bind(null,n),Ni:yy.bind(null,n),Pr:JR.bind(null,n)}),n.zr.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Xr.wr(),AE(n)?SE(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),rg(n))});return function(t){return e.apply(this,arguments)}}())),n.Xr}function nl(n){return n.Zr||(n.Zr=function(e,t,s){const a=Le(e);return a.Fr(),new tI(t,a.ir,a.authCredentials,a.appCheckCredentials,a.k,s)}(n.datastore,n.asyncQueue,{Di:ig.bind(null,n),Ni:uI.bind(null,n),Nr:VT.bind(null,n),Cr:Ey.bind(null,n)}),n.zr.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Zr.wr(),yield pd(n)):(yield n.Zr.stop(),n.Qr.length>0&&(Me("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Zr}class OE{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,s,a,l){const p=Date.now()+s,_=new OE(e,t,p,a,l);return _.start(s),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pf(n,e){if(Cr("AsyncQueue",`${e}: ${n}`),Po(n))return new Re(se.UNAVAILABLE,`${e}: ${n}`);throw n}class md{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Qe.comparator(t.key,s.key):(t,s)=>Qe.comparator(t.key,s.key),this.keyedMap=Wp(),this.sortedSet=new Tr(this.comparator)}static emptySet(e){return new md(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof md)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new md;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class kE{constructor(){this.eo=new Tr(Qe.comparator)}track(e){const t=e.doc.key,s=this.eo.get(t);s?0!==e.type&&3===s.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==s.type?this.eo=this.eo.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.eo=this.eo.remove(t):1===e.type&&2===s.type?this.eo=this.eo.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):Xe():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,s)=>{e.push(s)}),e}}class yd{constructor(e,t,s,a,l,p,_,b){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=p,this.syncStateChanged=_,this.excludesMetadataChanges=b}static fromInitialDocuments(e,t,s,a){const l=[];return t.forEach(p=>{l.push({type:0,doc:p})}),new yd(e,t,md.emptySet(t),l,s,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class UT{constructor(){this.so=void 0,this.listeners=[]}}class cI{constructor(){this.queries=new Oo(e=>Lv(e),qh),this.onlineState="Unknown",this.io=new Set}}function LE(n,e){return FE.apply(this,arguments)}function FE(){return(FE=(0,pe.Z)(function*(n,e){const t=Le(n),s=e.query;let a=!1,l=t.queries.get(s);if(l||(a=!0,l=new UT),a)try{l.so=yield t.onListen(s)}catch(p){const _=pf(p,`Initialization of query '${Fv(e.query)}' failed`);return void e.onError(_)}t.queries.set(s,l),l.listeners.push(e),e.ro(t.onlineState),l.so&&e.oo(l.so)&&Iy(t)})).apply(this,arguments)}function lI(n,e){return dI.apply(this,arguments)}function dI(){return(dI=(0,pe.Z)(function*(n,e){const t=Le(n),s=e.query;let a=!1;const l=t.queries.get(s);if(l){const p=l.listeners.indexOf(e);p>=0&&(l.listeners.splice(p,1),a=0===l.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)})).apply(this,arguments)}function XR(n,e){const t=Le(n);let s=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const _ of p.listeners)_.oo(a)&&(s=!0);p.so=a}}s&&Iy(t)}function ex(n,e,t){const s=Le(n),a=s.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);s.queries.delete(e)}function Iy(n){n.io.forEach(e=>{e.next()})}class gf{constructor(e,t,s){this.query=e,this.ao=t,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=s||{}}oo(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new yd(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.ho(e)&&(this.ao.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=yd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}class jT{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class hI{constructor(e){this.k=e}Hn(e){return Ea(this.k,e)}Jn(e){return e.metadata.exists?oT(this.k,e.document,!1):sn.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return Sr(e)}}class fI{constructor(e,t,s){this.mo=e,this.localStore=t,this.k=s,this.queries=[],this.documents=[],this.progress=mf(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,s=new hI(this.k);for(const a of e)if(a.metadata.queries){const l=s.Hn(a.metadata.name);for(const p of a.metadata.queries){const _=(t.get(p)||Bt()).add(l);t.set(p,_)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function(n,e,t,s){return dy.apply(this,arguments)}(e.localStore,new hI(e.k),e.documents,e.mo.id),s=e.po(e.documents);for(const a of e.queries)yield qb(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",new ko(Object.assign({},e.progress),t)})()}}function mf(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class pI{constructor(e){this.key=e}}class gI{constructor(e){this.key=e}}class mI{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=Bt(),this.mutatedKeys=Bt(),this.Ao=Kh(e),this.Ro=new md(this.Ao)}get Po(){return this.To}bo(e,t){const s=t?t.vo:new kE,a=t?t.Ro:this.Ro;let l=t?t.mutatedKeys:this.mutatedKeys,p=a,_=!1;const b=Qs(this.query)&&a.size===this.query.limit?a.last():null,A=zh(this.query)&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((M,O)=>{const q=a.get(M),W=Bp(this.query,O)?O:null,de=!!q&&this.mutatedKeys.has(q.key),Pe=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let je=!1;q&&W?q.data.isEqual(W.data)?de!==Pe&&(s.track({type:3,doc:W}),je=!0):this.Vo(q,W)||(s.track({type:2,doc:W}),je=!0,(b&&this.Ao(W,b)>0||A&&this.Ao(W,A)<0)&&(_=!0)):!q&&W?(s.track({type:0,doc:W}),je=!0):q&&!W&&(s.track({type:1,doc:q}),je=!0,(b||A)&&(_=!0)),je&&(W?(p=p.add(W),l=Pe?l.add(M):l.delete(M)):(p=p.delete(M),l=l.delete(M)))}),Qs(this.query)||zh(this.query))for(;p.size>this.query.limit;){const M=Qs(this.query)?p.last():p.first();p=p.delete(M.key),l=l.delete(M.key),s.track({type:1,doc:M})}return{Ro:p,vo:s,Bn:_,mutatedKeys:l}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const l=e.vo.no();l.sort((A,M)=>function(O,q){const W=de=>{switch(de){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return W(O)-W(q)}(A.type,M.type)||this.Ao(A.doc,M.doc)),this.So(s);const p=t?this.Do():[],_=0===this.Io.size&&this.current?1:0,b=_!==this.Eo;return this.Eo=_,0!==l.length||b?{snapshot:new yd(this.query,e.Ro,a,l,e.mutatedKeys,0===_,b,!1),Co:p}:{Co:p}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new kE,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=Bt(),this.Ro.forEach(s=>{this.No(s.key)&&(this.Io=this.Io.add(s.key))});const t=[];return e.forEach(s=>{this.Io.has(s)||t.push(new gI(s))}),this.Io.forEach(s=>{e.has(s)||t.push(new pI(s))}),t}ko(e){this.To=e.zn,this.Io=Bt();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return yd.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class BT{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class $T{constructor(e){this.key=e,this.$o=!1}}class yI{constructor(e,t,s,a,l,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=p,this.Fo={},this.Oo=new Oo(_=>Lv(_),qh),this.Mo=new Map,this.Lo=new Set,this.Bo=new Tr(Qe.comparator),this.Uo=new Map,this.qo=new fy,this.Ko={},this.jo=new Map,this.Qo=uf.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function HT(n,e){return VE.apply(this,arguments)}function VE(){return(VE=(0,pe.Z)(function*(n,e){const t=My(n);let s,a;const l=t.Oo.get(e);if(l)s=l.targetId,t.sharedClientState.addLocalQueryTarget(s),a=l.view.xo();else{const p=yield hd(t.localStore,_s(e)),_=t.sharedClientState.addLocalQueryTarget(p.targetId);s=p.targetId,a=yield rl(t,e,s,"current"===_),t.isPrimaryClient&&ng(t.remoteStore,p)}return a})).apply(this,arguments)}function rl(n,e,t,s){return UE.apply(this,arguments)}function UE(){return(UE=(0,pe.Z)(function*(n,e,t,s){n.Go=(M,O,q)=>{return(W=(0,pe.Z)(function*(de,Pe,je,dt){let xt=Pe.view.bo(je);xt.Bn&&(xt=yield Xp(de.localStore,Pe.query,!1).then(({documents:ir})=>Pe.view.bo(ir,xt)));const Tn=dt&&dt.targetChanges.get(Pe.targetId),Ot=Pe.view.applyChanges(xt,de.isPrimaryClient,Tn);return ZE(de,Pe.targetId,Ot.Co),Ot.snapshot}),function(de,Pe,je,dt){return W.apply(this,arguments)})(n,M,O,q);var W};const a=yield Xp(n.localStore,e,!0),l=new mI(e,a.zn),p=l.bo(a.documents),_=va.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==n.onlineState),b=l.applyChanges(p,n.isPrimaryClient,_);ZE(n,t,b.Co);const A=new BT(e,t,l);return n.Oo.set(e,A),n.Mo.has(t)?n.Mo.get(t).push(e):n.Mo.set(t,[e]),b.snapshot})).apply(this,arguments)}function _I(n,e){return jE.apply(this,arguments)}function jE(){return(jE=(0,pe.Z)(function*(n,e){const t=Le(n),s=t.Oo.get(e),a=t.Mo.get(s.targetId);if(a.length>1)return t.Mo.set(s.targetId,a.filter(l=>!qh(l,e))),void t.Oo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Ru(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),df(t.remoteStore,s.targetId),yf(t,s.targetId)}).catch(Cn))):(yf(t,s.targetId),yield Ru(t.localStore,s.targetId,!0))})).apply(this,arguments)}function BE(){return(BE=(0,pe.Z)(function*(n,e,t){const s=Py(n);try{const a=yield function(l,p){const _=Le(l),b=Dr.now(),A=p.reduce((O,q)=>O.add(q.key),Bt());let M;return _.persistence.runTransaction("Locally write mutations","readwrite",O=>_.Wn.vn(O,A).next(q=>{M=q;const W=[];for(const de of p){const Pe=KR(de,M.get(de.key));null!=Pe&&W.push(new Zc(de.key,Pe,jh(Pe.value.mapValue),tr.exists(!0)))}return _.An.addMutationBatch(O,b,W,p)})).then(O=>(O.applyToLocalDocumentSet(M),{batchId:O.batchId,changes:M}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(l,p,_){let b=l.Ko[l.currentUser.toKey()];b||(b=new Tr(Mt)),b=b.insert(p,_),l.Ko[l.currentUser.toKey()]=b}(s,a.batchId,t),yield xu(s,a.changes),yield pd(s.remoteStore)}catch(a){const l=pf(a,"Failed to persist write");t.reject(l)}})).apply(this,arguments)}function $E(n,e){return HE.apply(this,arguments)}function HE(){return(HE=(0,pe.Z)(function*(n,e){const t=Le(n);try{const s=yield Hb(t.localStore,e);e.targetChanges.forEach((a,l)=>{const p=t.Uo.get(l);p&&(it(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.$o=!0:a.modifiedDocuments.size>0?it(p.$o):a.removedDocuments.size>0&&(it(p.$o),p.$o=!1))}),yield xu(t,s,e)}catch(s){yield Cn(s)}})).apply(this,arguments)}function Cy(n,e,t){const s=Le(n);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.Oo.forEach((l,p)=>{const _=p.view.ro(e);_.snapshot&&a.push(_.snapshot)}),function(l,p){const _=Le(l);_.onlineState=p;let b=!1;_.queries.forEach((A,M)=>{for(const O of M.listeners)O.ro(p)&&(b=!0)}),b&&Iy(_)}(s.eventManager,e),a.length&&s.Fo.Pr(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function GT(n,e,t){return Dy.apply(this,arguments)}function Dy(){return(Dy=(0,pe.Z)(function*(n,e,t){const s=Le(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Uo.get(e),l=a&&a.key;if(l){let p=new Tr(Qe.comparator);p=p.insert(l,sn.newNoDocument(l,Et.min()));const _=Bt().add(l),b=new nd(Et.min(),new Map,new Un(Mt),p,_);yield $E(s,b),s.Bo=s.Bo.remove(l),s.Uo.delete(e),YE(s)}else yield Ru(s.localStore,e,!1).then(()=>yf(s,e,t)).catch(Cn)})).apply(this,arguments)}function EI(n,e){return GE.apply(this,arguments)}function GE(){return(GE=(0,pe.Z)(function*(n,e){const t=Le(n),s=e.batch.batchId;try{const a=yield Jp(t.localStore,e);KE(t,s,null),Ty(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield xu(t,a)}catch(a){yield Cn(a)}})).apply(this,arguments)}function zT(n,e,t){return zE.apply(this,arguments)}function zE(){return(zE=(0,pe.Z)(function*(n,e,t){const s=Le(n);try{const a=yield function(l,p){const _=Le(l);return _.persistence.runTransaction("Reject batch","readwrite-primary",b=>{let A;return _.An.lookupMutationBatch(b,p).next(M=>(it(null!==M),A=M.keys(),_.An.removeMutationBatch(b,M))).next(()=>_.An.performConsistencyCheck(b)).next(()=>_.Wn.vn(b,A))})}(s.localStore,e);KE(s,e,t),Ty(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield xu(s,a)}catch(a){yield Cn(a)}})).apply(this,arguments)}function qE(){return(qE=(0,pe.Z)(function*(n,e){const t=Le(n);tl(t.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(l){const p=Le(l);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",_=>p.An.getHighestUnacknowledgedBatchId(_))}(t.localStore);if(-1===s)return void e.resolve();const a=t.jo.get(s)||[];a.push(e),t.jo.set(s,a)}catch(s){const a=pf(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}})).apply(this,arguments)}function Ty(n,e){(n.jo.get(e)||[]).forEach(t=>{t.resolve()}),n.jo.delete(e)}function KE(n,e,t){const s=Le(n);let a=s.Ko[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Ko[s.currentUser.toKey()]=a}}function yf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Mo.get(e))n.Oo.delete(s),t&&n.Fo.zo(s,t);n.Mo.delete(e),n.isPrimaryClient&&n.qo.us(e).forEach(s=>{n.qo.containsKey(s)||wI(n,s)})}function wI(n,e){n.Lo.delete(e.path.canonicalString());const t=n.Bo.get(e);null!==t&&(df(n.remoteStore,t),n.Bo=n.Bo.remove(e),n.Uo.delete(t),YE(n))}function ZE(n,e,t){for(const s of t)s instanceof pI?(n.qo.addReference(s.key,e),WT(n,s)):s instanceof gI?(Me("SyncEngine","Document no longer in limbo: "+s.key),n.qo.removeReference(s.key,e),n.qo.containsKey(s.key)||wI(n,s.key)):Xe()}function WT(n,e){const t=e.key,s=t.path.canonicalString();n.Bo.get(t)||n.Lo.has(s)||(Me("SyncEngine","New document in limbo: "+t),n.Lo.add(s),YE(n))}function YE(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const e=n.Lo.values().next().value;n.Lo.delete(e);const t=new Qe(Jt.fromString(e)),s=n.Qo.next();n.Uo.set(s,new $T(t)),n.Bo=n.Bo.insert(t,s),ng(n.remoteStore,new Yc(_s(Up(t.path)),s,2,ys.I))}}function xu(n,e,t){return QE.apply(this,arguments)}function QE(){return(QE=(0,pe.Z)(function*(n,e,t){const s=Le(n),a=[],l=[],p=[];var _;s.Oo.isEmpty()||(s.Oo.forEach((_,b)=>{p.push(s.Go(b,e,t).then(A=>{if(A){s.isPrimaryClient&&s.sharedClientState.updateQueryState(b.targetId,A.fromCache?"not-current":"current"),a.push(A);const M=uy.$n(b.targetId,A);l.push(M)}}))}),yield Promise.all(p),s.Fo.Pr(a),yield(_=(0,pe.Z)(function*(b,A){const M=Le(b);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>De.forEach(A,q=>De.forEach(q.kn,W=>M.persistence.referenceDelegate.addReference(O,q.targetId,W)).next(()=>De.forEach(q.xn,W=>M.persistence.referenceDelegate.removeReference(O,q.targetId,W)))))}catch(O){if(!Po(O))throw O;Me("LocalStore","Failed to update sequence numbers: "+O)}for(const O of A){const q=O.targetId;if(!O.fromCache){const W=M.qn.get(q),Pe=W.withLastLimboFreeSnapshotVersion(W.snapshotVersion);M.qn=M.qn.insert(q,Pe)}}}),function(b,A){return _.apply(this,arguments)})(s.localStore,l))})).apply(this,arguments)}function bI(n,e){return Sy.apply(this,arguments)}function Sy(){return(Sy=(0,pe.Z)(function*(n,e){const t=Le(n);if(!t.currentUser.isEqual(e)){Me("SyncEngine","User change. New user:",e.toKey());const s=yield Bb(t.localStore,e);t.currentUser=e,(a=t).jo.forEach(p=>{p.forEach(_=>{_.reject(new Re(se.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.jo.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield xu(t,s.Gn)}var a})).apply(this,arguments)}function qT(n,e){const t=Le(n),s=t.Uo.get(e);if(s&&s.$o)return Bt().add(s.key);{let a=Bt();const l=t.Mo.get(e);if(!l)return a;for(const p of l){const _=t.Oo.get(p);a=a.unionWith(_.view.Po)}return a}}function KT(n,e){return Ay.apply(this,arguments)}function Ay(){return(Ay=(0,pe.Z)(function*(n,e){const t=Le(n),s=yield Xp(t.localStore,e.query,!0),a=e.view.ko(s);return t.isPrimaryClient&&ZE(t,e.targetId,a.Co),a})).apply(this,arguments)}function ZT(n){return JE.apply(this,arguments)}function JE(){return(JE=(0,pe.Z)(function*(n){const e=Le(n);return cy(e.localStore).then(t=>xu(e,t))})).apply(this,arguments)}function YT(n,e,t,s){return sg.apply(this,arguments)}function sg(){return(sg=(0,pe.Z)(function*(n,e,t,s){const a=Le(n),l=yield function(p,_){const b=Le(p),A=Le(b.An);return b.persistence.runTransaction("Lookup mutation documents","readonly",M=>A.Zt(M,_).next(O=>O?b.Wn.vn(M,O):De.resolve(null)))}(a.localStore,e);var _;null!==l?("pending"===t?yield pd(a.remoteStore):"acknowledged"===t||"rejected"===t?(KE(a,e,s||null),Ty(a,e),_=e,Le(Le(a.localStore).An).ee(_)):Xe(),yield xu(a,l)):Me("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function Ry(){return(Ry=(0,pe.Z)(function*(n,e){const t=Le(n);if(My(t),Py(t),!0===e&&!0!==t.Wo){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield xy(t,s.toArray());t.Wo=!0,yield PE(t.remoteStore,!0);for(const l of a)ng(t.remoteStore,l)}else if(!1===e&&!1!==t.Wo){const s=[];let a=Promise.resolve();t.Mo.forEach((l,p)=>{t.sharedClientState.isLocalQueryTarget(p)?s.push(p):a=a.then(()=>(yf(t,p),Ru(t.localStore,p,!0))),df(t.remoteStore,p)}),yield a,yield xy(t,s),function(l){const p=Le(l);p.Uo.forEach((_,b)=>{df(p.remoteStore,b)}),p.qo.hs(),p.Uo=new Map,p.Bo=new Tr(Qe.comparator)}(t),t.Wo=!1,yield PE(t.remoteStore,!1)}})).apply(this,arguments)}function xy(n,e,t){return ew.apply(this,arguments)}function ew(){return(ew=(0,pe.Z)(function*(n,e,t){const s=Le(n),a=[],l=[];for(const p of e){let _;const b=s.Mo.get(p);if(b&&0!==b.length){_=yield hd(s.localStore,_s(b[0]));for(const A of b){const M=s.Oo.get(A),O=yield KT(s,M);O.snapshot&&l.push(O.snapshot)}}else{const A=yield mE(s.localStore,p);_=yield hd(s.localStore,A),yield rl(s,II(A),p,!1)}a.push(_)}return s.Fo.Pr(l),a})).apply(this,arguments)}function II(n){return Wm(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function tw(n){const e=Le(n);return Le(Le(e.localStore).persistence).Tn()}function QT(n,e,t,s){return nw.apply(this,arguments)}function nw(){return(nw=(0,pe.Z)(function*(n,e,t,s){const a=Le(n);if(a.Wo)Me("SyncEngine","Ignoring unexpected query state notification.");else if(a.Mo.has(e))switch(t){case"current":case"not-current":{const l=yield cy(a.localStore),p=nd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield xu(a,l,p);break}case"rejected":yield Ru(a.localStore,e,!0),yf(a,e,s);break;default:Xe()}})).apply(this,arguments)}function JT(n,e,t){return Ny.apply(this,arguments)}function Ny(){return(Ny=(0,pe.Z)(function*(n,e,t){const s=My(n);if(s.Wo){for(const a of e){if(s.Mo.has(a)){Me("SyncEngine","Adding an already active target "+a);continue}const l=yield mE(s.localStore,a),p=yield hd(s.localStore,l);yield rl(s,II(l),p.targetId,!1),ng(s.remoteStore,p)}for(const a of t)s.Mo.has(a)&&(yield Ru(s.localStore,a,!1).then(()=>{df(s.remoteStore,a),yf(s,a)}).catch(Cn))}})).apply(this,arguments)}function My(n){const e=Le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$E.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GT.bind(null,e),e.Fo.Pr=XR.bind(null,e.eventManager),e.Fo.zo=ex.bind(null,e.eventManager),e}function Py(n){const e=Le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zT.bind(null,e),e}class CI{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.k=lf(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return jb(this.persistence,new Ub,e.initialUser,this.k)}Yo(e){return new NT(_E.ks,this.k)}Jo(e){return new Qb}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class _d extends CI{constructor(e,t,s){super(),this.ta=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,pe.Z)(function*(){yield t().call(s,e),yield function(n){return ly.apply(this,arguments)}(s.localStore),yield s.ta.initialize(s,e),yield Py(s.ta.syncEngine),yield pd(s.ta.remoteStore),yield s.persistence.sn(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()))})()}Zo(e){return jb(this.persistence,new Ub,e.initialUser,this.k)}Xo(e){return new Pb(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=Cs(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Pi.withCacheSize(this.cacheSizeBytes):Pi.DEFAULT;return new fE(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,CE(),tg(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new Qb}}class nx extends _d{constructor(e,t){super(e,t,!1),this.ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,pe.Z)(function*(){yield t().call(s,e);const a=s.ta.syncEngine;s.sharedClientState instanceof bE&&(s.sharedClientState.syncEngine={mi:YT.bind(null,a),gi:QT.bind(null,a),yi:JT.bind(null,a),Tn:tw.bind(null,a),_i:ZT.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.sn(function(){var l=(0,pe.Z)(function*(p){yield function(n,e){return Ry.apply(this,arguments)}(s.ta.syncEngine,p),s.gcScheduler&&(p&&!s.gcScheduler.started?s.gcScheduler.start(s.localStore):p||s.gcScheduler.stop())});return function(p){return l.apply(this,arguments)}}())})()}Jo(e){const t=CE();if(!bE.bt(t))throw new Re(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Cs(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bE(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class og{initialize(e,t){var s=this;return(0,pe.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>Cy(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=bI.bind(null,s.syncEngine),yield PE(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new cI}createDatastore(e){const t=lf(e.databaseInfo.databaseId),s=new eI(e.databaseInfo);return new fd(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,l=_=>Cy(this.syncEngine,_,0),p=IE.bt()?new IE:new PT,new kT(t,s,a,l,p);var t,s,a,l,p}createSyncEngine(e,t){return function(s,a,l,p,_,b,A){const M=new yI(s,a,l,p,_,b);return A&&(M.Wo=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,pe.Z)(function*(t){const s=Le(t);Me("RemoteStore","RemoteStore shutting down."),s.Gr.add(5),yield el(s),s.Hr.shutdown(),s.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ag(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Oy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class _f{constructor(e,t){this.sa=e,this.k=t,this.metadata=new Ur,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(s=>{s&&s._o()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.sa.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.ra()})()}ra(){var e=this;return(0,pe.Z)(function*(){const t=yield e.oa();if(null===t)return null;const s=e.ia.decode(t),a=Number(s);isNaN(a)&&e.aa(`length string (${s}) is not valid number`);const l=yield e.ca(a);return new jT(JSON.parse(l),t.length+a)})()}ua(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oa(){var e=this;return(0,pe.Z)(function*(){for(;e.ua()<0&&!(yield e.ha()););if(0===e.buffer.length)return null;const t=e.ua();t<0&&e.aa("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}ca(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.ha())&&t.aa("Reached the end of bundle when more is expected.");const s=t.ia.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}aa(e){throw this.sa.cancel(),new Error(`Invalid bundle format: ${e}`)}ha(){var e=this;return(0,pe.Z)(function*(){const t=yield e.sa.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class XT{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,pe.Z)(function*(l,p){const _=Le(l),b=qp(_.k)+"/documents",A={documents:p.map(W=>nf(_.k,W))},M=yield _.ji("BatchGetDocuments",b,A),O=new Map;M.forEach(W=>{const de=function(n,e){return"found"in e?function(t,s){it(!!s.found);const a=Ea(t,s.found.name),l=Sr(s.found.updateTime),p=new Jr({mapValue:{fields:s.found.fields}});return sn.newFoundDocument(a,l,p)}(n,e):"missing"in e?function(t,s){it(!!s.missing),it(!!s.readTime);const a=Ea(t,s.missing),l=Sr(s.readTime);return sn.newNoDocument(a,l)}(n,e):Xe()}(_.k,W);O.set(de.key.toString(),de)});const q=[];return p.forEach(W=>{const de=O.get(W.toString());it(!!de),q.push(de)}),q}),function(l,p){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const l=Qe.fromPath(a);e.mutations.push(new Gp(l,e.precondition(l)))}),yield(s=(0,pe.Z)(function*(a,l){const p=Le(a),_=qp(p.k)+"/documents",b={writes:l.map(A=>Ym(p.k,A))};yield p.Bi("Commit",_,b)}),function(a,l){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xe();t=Et.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Re(se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?tr.updateTime(t):tr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new Re(se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tr.updateTime(t)}return tr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class rx{constructor(e,t,s,a){this.asyncQueue=e,this.datastore=t,this.updateFunction=s,this.deferred=a,this.la=5,this.ur=new my(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){var e=this;this.ur.Zi((0,pe.Z)(function*(){const t=new XT(e.datastore),s=e.da(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.wa(l)}))}).catch(a=>{e.wa(a)})}))}da(e){try{const t=this.updateFunction(e);return!wu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!pb(t)}return!1}}class eS{constructor(e,t,s,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Ir.UNAUTHENTICATED,this.clientId=eb.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var p=(0,pe.Z)(function*(_){Me("FirestoreClient","Received user=",_.uid),yield l.authCredentialListener(_),l.user=_});return function(_){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(s,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(se.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=pf(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function Lo(n,e){return ky.apply(this,arguments)}function ky(){return(ky=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,pe.Z)(function*(l){s.isEqual(l)||(yield Bb(e.localStore,l),s=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function tS(n,e){return vf.apply(this,arguments)}function vf(){return(vf=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield rw(n);Me("FirestoreClient","Initializing OnlineComponentProvider");const s=yield n.getConfiguration();yield e.initialize(t,s),n.setCredentialChangeListener(a=>{return(l=(0,pe.Z)(function*(p,_){const b=Le(p);b.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const A=tl(b);b.Gr.add(3),yield el(b),A&&b.Jr.set("Unknown"),yield b.remoteSyncer.handleCredentialChange(_),b.Gr.delete(3),yield Ca(b)}),function(p,_){return l.apply(this,arguments)})(e.remoteStore,a);var l}),n.onlineComponents=e})).apply(this,arguments)}function rw(n){return iw.apply(this,arguments)}function iw(){return(iw=(0,pe.Z)(function*(n){return n.offlineComponents||(Me("FirestoreClient","Using default OfflineComponentProvider"),yield Lo(n,new CI)),n.offlineComponents})).apply(this,arguments)}function sw(n){return ow.apply(this,arguments)}function ow(){return(ow=(0,pe.Z)(function*(n){return n.onlineComponents||(Me("FirestoreClient","Using default OnlineComponentProvider"),yield tS(n,new og)),n.onlineComponents})).apply(this,arguments)}function DI(n){return rw(n).then(e=>e.persistence)}function aw(n){return rw(n).then(e=>e.localStore)}function Ly(n){return sw(n).then(e=>e.remoteStore)}function Fy(n){return sw(n).then(e=>e.syncEngine)}function il(n){return Vy.apply(this,arguments)}function Vy(){return(Vy=(0,pe.Z)(function*(n){const e=yield sw(n),t=e.eventManager;return t.onListen=HT.bind(null,e.syncEngine),t.onUnlisten=_I.bind(null,e.syncEngine),t})).apply(this,arguments)}function TI(n,e,t={}){const s=new Ur;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(a,l,p,_,b){const A=new Oy({next:O=>{l.enqueueAndForget(()=>lI(a,M));const q=O.docs.has(p);!q&&O.fromCache?b.reject(new Re(se.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&O.fromCache&&_&&"server"===_.source?b.reject(new Re(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(O)},error:O=>b.reject(O)}),M=new gf(Up(p.path),A,{includeMetadataChanges:!0,wo:!0});return LE(a,M)}(yield il(n),n.asyncQueue,e,t,s)})),s.promise}function uw(n,e,t={}){const s=new Ur;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(a,l,p,_,b){const A=new Oy({next:O=>{l.enqueueAndForget(()=>lI(a,M)),O.fromCache&&"server"===_.source?b.reject(new Re(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(O)},error:O=>b.reject(O)}),M=new gf(p,A,{includeMetadataChanges:!0,wo:!0});return LE(a,M)}(yield il(n),n.asyncQueue,e,t,s)})),s.promise}class RI{constructor(e,t,s,a,l,p,_,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=p,this.autoDetectLongPolling=_,this.useFetchStreams=b}}class Nu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Nu&&e.projectId===this.projectId&&e.database===this.database}}const xI=new Map;function Uy(n,e,t){if(!t)throw new Re(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ug(n,e,t,s){if(!0===e&&!0===s)throw new Re(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cg(n){if(!Qe.isDocumentKey(n))throw new Re(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ef(n){if(Qe.isDocumentKey(n))throw new Re(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jy(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Xe()}function Gt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jy(n);throw new Re(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function aS(n,e){if(e<=0)throw new Re(se.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class NI{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ug("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lg{constructor(e,t,s){this._authCredentials=t,this._appCheckCredentials=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NI({}),this._settingsFrozen=!1,e instanceof Nu?this._databaseId=e:(this._app=e,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Re(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nu(a.options.projectId)}(e))}get app(){if(!this._app)throw new Re(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NI(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new $R;switch(t.type){case"gapi":const s=t.client;return it(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new Sv(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=xI.get(e);t&&(Me("ComponentProvider","Removing Datastore"),xI.delete(e),t.terminate())}(this),Promise.resolve()}}class Dn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ta(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dn(this.firestore,e,this._key)}}class mi{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new mi(this.firestore,e,this._query)}}class Ta extends mi{constructor(e,t,s){super(e,t,Up(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dn(this.firestore,null,new Qe(e))}withConverter(e){return new Ta(this.firestore,e,this._path)}}function MI(n,e,...t){if(n=(0,Dt.m9)(n),Uy("collection","path",e),n instanceof lg){const s=Jt.fromString(e,...t);return Ef(s),new Ta(n,null,s)}{if(!(n instanceof Dn||n instanceof Ta))throw new Re(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Jt.fromString(e,...t));return Ef(s),new Ta(n.firestore,null,s)}}function By(n,e,...t){if(n=(0,Dt.m9)(n),1===arguments.length&&(e=eb.A()),Uy("doc","path",e),n instanceof lg){const s=Jt.fromString(e,...t);return cg(s),new Dn(n,null,new Qe(s))}{if(!(n instanceof Dn||n instanceof Ta))throw new Re(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Jt.fromString(e,...t));return cg(s),new Dn(n.firestore,n instanceof Ta?n.converter:null,new Qe(s))}}function lS(n,e){return n=(0,Dt.m9)(n),e=(0,Dt.m9)(e),(n instanceof Dn||n instanceof Ta)&&(e instanceof Dn||e instanceof Ta)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function PI(n,e){return n=(0,Dt.m9)(n),e=(0,Dt.m9)(e),n instanceof mi&&e instanceof mi&&n.firestore===e.firestore&&qh(n._query,e._query)&&n.converter===e.converter}class dg{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new my(this,"async_queue_retry"),this.Ra=()=>{const t=tg();t&&Me("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=tg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pa(),this.ba(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const t=tg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.Pa(),this.ya)return new Promise(()=>{});const t=new Ur;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ga.push(e),this.va()))}va(){var e=this;return(0,pe.Z)(function*(){if(0!==e.ga.length){try{yield e.ga[0](),e.ga.shift(),e.ur.reset()}catch(t){if(!Po(t))throw t;Me("AsyncQueue","Operation failed with retryable error: "+t)}e.ga.length>0&&e.ur.Zi(()=>e.va())}})()}ba(e){const t=this.ma.then(()=>(this.Ea=!0,e().catch(s=>{throw this.Ta=s,this.Ea=!1,Cr("INTERNAL UNHANDLED ERROR: ",function(l){let p=l.message||"";return l.stack&&(p=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),p}(s)),s}).then(s=>(this.Ea=!1,s))));return this.ma=t,t}enqueueAfterDelay(e,t,s){this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);const a=OE.createAndSchedule(this,e,t,s,l=>this.Va(l));return this.pa.push(a),a}Pa(){this.Ta&&Xe()}verifyOperationInProgress(){}Sa(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.ma,yield t}while(t!==e.ma)})()}Da(e){for(const t of this.pa)if(t.timerId===e)return!0;return!1}Ca(e){return this.Sa().then(()=>{this.pa.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.pa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sa()})}Na(e){this.Aa.push(e)}Va(e){const t=this.pa.indexOf(e);this.pa.splice(t,1)}}function cw(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(n)}class dS{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ur,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class dn extends lg{constructor(e,t,s){super(e,t,s),this.type="firestore",this._queue=new dg,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||pS(this),this._firestoreClient.terminate()}}function Rr(n){return n._firestoreClient||pS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function pS(n){var e;const t=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new RI(n._databaseId,l,n._persistenceKey,(_=t).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));var l,_;n._firestoreClient=new eS(n._authCredentials,n._appCheckCredentials,n._queue,s)}function OI(n,e,t){const s=new Ur;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield Lo(n,t),yield tS(n,e),s.resolve()}catch(a){if(!("FirebaseError"===(l=a).name?l.code===se.FAILED_PRECONDITION||l.code===se.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),s.reject(a)}var l})).then(()=>s.promise)}function VI(n){if(n._initialized||n._terminated)throw new Re(se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Sa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fo(Br.fromBase64String(e))}catch(t){throw new Re(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fo(Br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Aa{constructor(e){this._methodName=e}}class vd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}const ox=/^__.*__$/;class hg{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Zc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qh(e,this.data,t,this.fieldTransforms)}}class Xt{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Zc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Mu(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class Pu{constructor(e,t,s,a,l,p){this.settings=e,this.databaseId=t,this.k=s,this.ignoreUndefinedProperties=a,void 0===l&&this.ka(),this.fieldTransforms=l||[],this.fieldMask=p||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new Pu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.$a({path:s,Oa:!1});return a.Ma(e),a}La(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.$a({path:s,Oa:!1});return a.ka(),a}Ba(e){return this.$a({path:void 0,Oa:!0})}Ua(e){return ku(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(Mu(this.xa)&&ox.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class fg{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=s||lf(e)}ja(e,t,s,a=!1){return new Pu({xa:e,methodName:t,Ka:s,path:jr.emptyPath(),Oa:!1,qa:a},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function bf(n){const e=n._freezeSettings(),t=lf(n._databaseId);return new fg(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lt(n,e,t,s,a,l={}){const p=n.ja(l.merge||l.mergeFields?2:0,e,t,a);Gy("Data must be an object, but it was:",p,s);const _=Pn(s,p);let b,A;if(l.merge)b=new Vh(p.fieldMask),A=p.fieldTransforms;else if(l.mergeFields){const M=[];for(const O of l.mergeFields){const q=hw(e,O,t);if(!p.contains(q))throw new Re(se.INVALID_ARGUMENT,`Field '${q}' is specified in your field mask but missing from your input data.`);If(M,q)||M.push(q)}b=new Vh(M),A=p.fieldTransforms.filter(O=>b.covers(O.field))}else b=null,A=p.fieldTransforms;return new hg(new Jr(_),b,A)}class yi extends Aa{_toFieldTransform(e){if(2!==e.xa)throw e.Ua(1===e.xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yi}}function Hy(n,e,t){return new Pu({xa:3,Ka:e.settings.Ka,methodName:n._methodName,Oa:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class Ou extends Aa{_toFieldTransform(e){return new ed(e.path,new Zh)}isEqual(e){return e instanceof Ou}}class ax extends Aa{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=Hy(this,e,!0),s=this.Qa.map(l=>$r(l,t)),a=new qc(s);return new ed(e.path,a)}isEqual(e){return this===e}}class UI extends Aa{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=Hy(this,e,!0),s=this.Qa.map(l=>$r(l,t)),a=new Kc(s);return new ed(e.path,a)}isEqual(e){return this===e}}class jI extends Aa{constructor(e,t){super(e),this.Wa=t}_toFieldTransform(e){const t=new Yh(e.k,Bv(e.k,this.Wa));return new ed(e.path,t)}isEqual(e){return this===e}}function BI(n,e,t,s){const a=n.ja(1,e,t);Gy("Data must be an object, but it was:",a,s);const l=[],p=Jr.empty();fi(s,(b,A)=>{const M=pg(e,b,t);A=(0,Dt.m9)(A);const O=a.La(M);if(A instanceof yi)l.push(M);else{const q=$r(A,O);null!=q&&(l.push(M),p.set(M,q))}});const _=new Vh(l);return new Xt(p,_,a.fieldTransforms)}function dw(n,e,t,s,a,l){const p=n.ja(1,e,t),_=[hw(e,s,t)],b=[a];if(l.length%2!=0)throw new Re(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let q=0;q<l.length;q+=2)_.push(hw(e,l[q])),b.push(l[q+1]);const A=[],M=Jr.empty();for(let q=_.length-1;q>=0;--q)if(!If(A,_[q])){const W=_[q];let de=b[q];de=(0,Dt.m9)(de);const Pe=p.La(W);if(de instanceof yi)A.push(W);else{const je=$r(de,Pe);null!=je&&(A.push(W),M.set(W,je))}}const O=new Vh(A);return new Xt(M,O,p.fieldTransforms)}function $I(n,e,t,s=!1){return $r(t,n.ja(s?4:3,e))}function $r(n,e){if(to(n=(0,Dt.m9)(n)))return Gy("Unsupported field value:",e,n),Pn(n,e);if(n instanceof Aa)return function(t,s){if(!Mu(s.xa))throw s.Ua(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Ua(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Oa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(t,s){const a=[];let l=0;for(const p of t){let _=$r(p,s.Ba(l));null==_&&(_={nullValue:"NULL_VALUE"}),a.push(_),l++}return{arrayValue:{values:a}}}(n,e)}return function(t,s){if(null===(t=(0,Dt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Bv(s.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Dr.fromDate(t);return{timestampValue:tf(s.k,a)}}if(t instanceof Dr){const a=new Dr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:tf(s.k,a)}}if(t instanceof vd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Fo)return{bytesValue:qv(s.k,t._byteString)};if(t instanceof Dn){const a=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw s.Ua(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Km(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.Ua(`Unsupported field value: ${jy(t)}`)}(n,e)}function Pn(n,e){const t={};return jm(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fi(n,(s,a)=>{const l=$r(a,e.Fa(s));null!=l&&(t[s]=l)}),{mapValue:{fields:t}}}function to(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Dr||n instanceof vd||n instanceof Fo||n instanceof Dn||n instanceof Aa)}function Gy(n,e,t){if(!to(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=jy(t);throw e.Ua("an object"===s?n+" a custom object":n+" "+s)}var s}function hw(n,e,t){if((e=(0,Dt.m9)(e))instanceof Sa)return e._internalPath;if("string"==typeof e)return pg(n,e);throw ku("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const HI=new RegExp("[~\\*/\\[\\]]");function pg(n,e,t){if(e.search(HI)>=0)throw ku(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Sa(...e.split("."))._internalPath}catch(s){throw ku(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ku(n,e,t,s,a){const l=s&&!s.isEmpty(),p=void 0!==a;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let b="";return(l||p)&&(b+=" (found",l&&(b+=` in field ${s}`),p&&(b+=` in document ${a}`),b+=")"),new Re(se.INVALID_ARGUMENT,_+n+b)}function If(n,e){return n.some(t=>t.isEqual(e))}class gg{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ed(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ed extends gg{data(){return super.data()}}function zy(n,e){return"string"==typeof e?pg(n,e):e instanceof Sa?e._internalPath:e._delegate._internalPath}class sl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vo extends gg{constructor(e,t,s,a,l,p){super(e,t,s,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(zy("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Lu extends Vo{data(e={}){return super.data(e)}}class Ra{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new sl(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Lu(this._firestore,this._userDataWriter,s.key,s,new sl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(p=>({type:"added",doc:new Lu(s._firestore,s._userDataWriter,p.doc.key,p.doc,new sl(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:l++}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const _=new Lu(s._firestore,s._userDataWriter,p.doc.key,p.doc,new sl(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter);let b=-1,A=-1;return 0!==p.type&&(b=l.indexOf(p.doc.key),l=l.delete(p.doc.key)),1!==p.type&&(l=l.add(p.doc),A=l.indexOf(p.doc.key)),{type:GI(p.type),doc:_,oldIndex:b,newIndex:A}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function GI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function wd(n,e){return n instanceof Vo&&e instanceof Vo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ra&&e instanceof Ra&&n._firestore===e._firestore&&PI(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function zI(n){if(zh(n)&&0===n.explicitOrderBy.length)throw new Re(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ol{}function Fu(n,...e){for(const t of e)n=t._apply(n);return n}class WI extends ol{constructor(e,t,s){super(),this.Ga=e,this.za=t,this.Ha=s,this.type="where"}_apply(e){const t=bf(e.firestore),s=function(a,l,p,_,b,A,M){let O;if(b.isKeyField()){if("array-contains"===A||"array-contains-any"===A)throw new Re(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on FieldPath.documentId().`);if("in"===A||"not-in"===A){CS(M,A);const W=[];for(const de of M)W.push(IS(_,a,de));O={arrayValue:{values:W}}}else O=IS(_,a,M)}else"in"!==A&&"not-in"!==A&&"array-contains-any"!==A||CS(M,A),O=$I(p,"where",M,"in"===A||"not-in"===A);const q=Xr.create(b,A,O);return function(W,de){if(de.V()){const je=cb(W);if(null!==je&&!je.isEqual(de.field))throw new Re(se.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${je.toString()}' and '${de.field.toString()}'`);const dt=jp(W);null!==dt&&ZI(0,de.field,dt)}const Pe=function(je,dt){for(const xt of je.filters)if(dt.indexOf(xt.op)>=0)return xt.op;return null}(W,function(je){switch(je){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(de.op));if(null!==Pe)throw new Re(se.INVALID_ARGUMENT,Pe===de.op?`Invalid query. You cannot use more than one '${de.op.toString()}' filter.`:`Invalid query. You cannot use '${de.op.toString()}' filters with '${Pe.toString()}' filters.`)}(a,q),q}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new mi(e.firestore,e.converter,function(a,l){const p=a.filters.concat([l]);return new qt(a.path,a.collectionGroup,a.explicitOrderBy.slice(),p,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,s))}}class Wy extends ol{constructor(e,t){super(),this.Ga=e,this.Ja=t,this.type="orderBy"}_apply(e){const t=function(s,a,l){if(null!==s.startAt)throw new Re(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Re(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new Gh(a,l);return function(_,b){if(null===jp(_)){const A=cb(_);null!==A&&ZI(0,A,b.field)}}(s,p),p}(e._query,this.Ga,this.Ja);return new mi(e.firestore,e.converter,function(s,a){const l=s.explicitOrderBy.concat([a]);return new qt(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class qy extends ol{constructor(e,t,s){super(),this.type=e,this.Ya=t,this.Xa=s}_apply(e){return new mi(e.firestore,e.converter,kv(e._query,this.Ya,this.Xa))}}class ES extends ol{constructor(e,t,s){super(),this.type=e,this.Za=t,this.tc=s}_apply(e){const t=KI(e,this.type,this.Za,this.tc);return new mi(e.firestore,e.converter,(a=t,new qt((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class Cf extends ol{constructor(e,t,s){super(),this.type=e,this.Za=t,this.tc=s}_apply(e){const t=KI(e,this.type,this.Za,this.tc);return new mi(e.firestore,e.converter,(a=t,new qt((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function KI(n,e,t,s){if(t[0]=(0,Dt.m9)(t[0]),t[0]instanceof gg)return function(a,l,p,_,b){if(!_)throw new Re(se.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const A=[];for(const M of Wh(a))if(M.field.isKeyField())A.push(Lp(l,_.key));else{const O=_.data.field(M.field);if(Pp(O))throw new Re(se.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const q=M.field.canonicalString();throw new Re(se.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${q}' (used as the orderBy) does not exist.`)}A.push(O)}return new Vp(A,b)}(n._query,n.firestore._databaseId,e,t[0]._document,s);{const a=bf(n.firestore);return function(l,p,_,b,A,M){const O=l.explicitOrderBy;if(A.length>O.length)throw new Re(se.INVALID_ARGUMENT,`Too many arguments provided to ${b}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const q=[];for(let W=0;W<A.length;W++){const de=A[W];if(O[W].field.isKeyField()){if("string"!=typeof de)throw new Re(se.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${b}(), but got a ${typeof de}`);if(!Ov(l)&&-1!==de.indexOf("/"))throw new Re(se.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${b}() must be a plain document ID, but '${de}' contains a slash.`);const Pe=l.path.child(Jt.fromString(de));if(!Qe.isDocumentKey(Pe))throw new Re(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${b}() must result in a valid document path, but '${Pe}' is not because it contains an odd number of segments.`);const je=new Qe(Pe);q.push(Lp(p,je))}else{const Pe=$I(_,b,de);q.push(Pe)}}return new Vp(q,M)}(n._query,n.firestore._databaseId,a,e,t,s)}}function IS(n,e,t){if("string"==typeof(t=(0,Dt.m9)(t))){if(""===t)throw new Re(se.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ov(e)&&-1!==t.indexOf("/"))throw new Re(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Jt.fromString(t));if(!Qe.isDocumentKey(s))throw new Re(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Lp(n,new Qe(s))}if(t instanceof Dn)return Lp(n,t._key);throw new Re(se.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${jy(t)}.`)}function CS(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(se.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ZI(n,e,t){if(!t.isEqual(e))throw new Re(se.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Hr{convertValue(e,t="none"){switch(bu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Eu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xe()}}convertObject(e,t){const s={};return fi(e.fields,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertGeoPoint(e){return new vd(fr(e.latitude),fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=rb(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Jl(e));default:return null}}convertTimestamp(e){const t=Wc(e);return new Dr(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Jt.fromString(e);it(gT(s));const a=new Nu(s.get(1),s.get(3)),l=new Qe(s.popFirst(5));return a.isEqual(t)||Cr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Ky(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class DS extends Hr{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,t)}}class Zy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bf(e)}set(e,t,s){this._verifyNotCommitted();const a=al(e,this._firestore),l=Ky(a.converter,t,s),p=lt(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,s);return this._mutations.push(p.toMutation(a._key,tr.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const l=al(e,this._firestore);let p;return p="string"==typeof(t=(0,Dt.m9)(t))||t instanceof Sa?dw(this._dataReader,"WriteBatch.update",l._key,t,s,a):BI(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(p.toMutation(l._key,tr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=al(e,this._firestore);return this._mutations=this._mutations.concat(new Hp(t._key,tr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function al(n,e){if((n=(0,Dt.m9)(n)).firestore!==e)throw new Re(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class bd extends Hr{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,t)}}function YI(n,e,t){n=Gt(n,Dn);const s=Gt(n.firestore,dn),a=Ky(n.converter,e,t);return Df(s,[lt(bf(s),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,tr.none())])}function gw(n,e,t,...s){n=Gt(n,Dn);const a=Gt(n.firestore,dn),l=bf(a);let p;return p="string"==typeof(e=(0,Dt.m9)(e))||e instanceof Sa?dw(l,"updateDoc",n._key,e,t,s):BI(l,"updateDoc",n._key,e),Df(a,[p.toMutation(n._key,tr.exists(!0))])}function MS(n,...e){var t,s,a;n=(0,Dt.m9)(n);let l={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||cw(e[p])||(l=e[p],p++);const _={includeMetadataChanges:l.includeMetadataChanges};if(cw(e[p])){const O=e[p];e[p]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[p+1]=null===(s=O.error)||void 0===s?void 0:s.bind(O),e[p+2]=null===(a=O.complete)||void 0===a?void 0:a.bind(O)}let b,A,M;if(n instanceof Dn)A=Gt(n.firestore,dn),M=Up(n._key.path),b={next:O=>{e[p]&&e[p](yw(A,n,O))},error:e[p+1],complete:e[p+2]};else{const O=Gt(n,mi);A=Gt(O.firestore,dn),M=O._query;const q=new bd(A);b={next:W=>{e[p]&&e[p](new Ra(A,q,O,W))},error:e[p+1],complete:e[p+2]},zI(n._query)}return function(O,q,W,de){const Pe=new Oy(de),je=new gf(q,Pe,W);return O.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return LE(yield il(O),je)})),()=>{Pe.na(),O.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return lI(yield il(O),je)}))}}(Rr(A),M,_,b)}function Df(n,e){return function(t,s){const a=new Ur;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(n,e,t){return BE.apply(this,arguments)}(yield Fy(t),s,a)})),a.promise}(Rr(n),e)}function yw(n,e,t){const s=t.docs.get(e._key),a=new bd(n);return new Vo(n,a,e._key,s,new sl(t.hasPendingWrites,t.fromCache),e.converter)}class OS extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=bf(e)}get(e){const t=al(e,this._firestore),s=new DS(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return Xe();const l=a[0];if(l.isFoundDocument())return new gg(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new gg(this._firestore,s,t._key,null,t.converter);throw Xe()})}set(e,t,s){const a=al(e,this._firestore),l=Ky(a.converter,t,s),p=lt(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,s);return this._transaction.set(a._key,p),this}update(e,t,s,...a){const l=al(e,this._firestore);let p;return p="string"==typeof(t=(0,Dt.m9)(t))||t instanceof Sa?dw(this._dataReader,"Transaction.update",l._key,t,s,a):BI(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,p),this}delete(e){const t=al(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=al(e,this._firestore),s=new bd(this._firestore);return super.get(e).then(a=>new Vo(this._firestore,s,t._key,a._document,new sl(!1,!1),t.converter))}}function _w(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function XI(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function eC(){if("undefined"==typeof atob)throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){zc=Ks.SDK_VERSION,(0,Ks._registerComponent)(new Ac.wA("firestore",(t,{options:s})=>{const a=t.getProvider("app").getImmediate(),l=new dn(a,new HR(t.getProvider("auth-internal")),new $D(t.getProvider("app-check-internal")));return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC")),(0,Ks.registerVersion)(Tv,"3.4.0",n),(0,Ks.registerVersion)(Tv,"3.4.0","esm2017")}();class yg{constructor(e){this._delegate=e}static fromBase64String(e){return eC(),new yg(Fo.fromBase64String(e))}static fromUint8Array(e){return XI(),new yg(Fo.fromUint8Array(e))}toBase64(){return eC(),this._delegate.toBase64()}toUint8Array(){return XI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vw(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const s of["next","error","complete"])if(s in t&&"function"==typeof t[s])return!0;return!1}(n)}class US{enableIndexedDbPersistence(e,t){return function(n,e){VI(n=Gt(n,dn));const t=Rr(n),s=n._freezeSettings(),a=new og;return OI(t,a,new _d(a,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){VI(n=Gt(n,dn));const e=Rr(n),t=n._freezeSettings(),s=new og;return OI(e,s,new nx(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Re(se.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ur;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(s){if(!bs.bt())return Promise.resolve();const a=s+"main";yield bs.delete(a)}),function(s){return t.apply(this,arguments)})(Cs(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class nC{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Nu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Lh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function(n,e,t,s={}){var a;const l=(n=Gt(n,lg))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Lh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let p,_;if("string"==typeof s.mockUserToken)p=s.mockUserToken,_=Ir.MOCK_USER;else{p=(0,Dt.Sg)(s.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new Re(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Ir(b)}n._authCredentials=new J0(new jD(p,_))}}(this._delegate,e,t,s)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield DI(n),t=yield Ly(n);return e.setNetworkEnabled(!0),function(s){const a=Le(s);return a.Gr.delete(0),Ca(a)}(t)}))}(Rr(n=Gt(n,dn)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield DI(n),t=yield Ly(n);return e.setNetworkEnabled(!1),(s=(0,pe.Z)(function*(a){const l=Le(a);l.Gr.add(0),yield el(l),l.Jr.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(Rr(n=Gt(n,dn)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,ug("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Ur;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(n,e){return qE.apply(this,arguments)}(yield Fy(e),t)})),t.promise}(Rr(n=Gt(n,dn)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new Oy(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return s=yield il(n),a=t,Le(s).io.add(a),void a.next();var s,a})),()=>{t.na(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return s=yield il(n),a=t,void Le(s).io.delete(a);var s,a}))}}(Rr(n=Gt(n,dn)),cw(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new nr(this,MI(this._delegate,e))}catch(t){throw Oi(t,"collection()","Firestore.collection()")}}doc(e){try{return new no(this,By(this._delegate,e))}catch(t){throw Oi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ni(this,function(n,e){if(n=Gt(n,lg),Uy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(se.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new mi(n,null,(t=e,new qt(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Oi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Ur;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const s=yield(a=n,sw(a).then(l=>l.datastore));var a;new rx(n.asyncQueue,s,e,t).run()})),t.promise}(Rr(n=Gt(n,dn)),t=>e(new OS(n,t)))}(this._delegate,t=>e(new jS(this,t)))}batch(){return Rr(this._delegate),new Qy(new Zy(this._delegate,e=>Df(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Rr(n=Gt(n,dn)),s=new dS;return function(n,e,t,s){const a=function(l,p){let _;return _="string"==typeof l?(new TextEncoder).encode(l):l,b=function(b,A){if(b instanceof Uint8Array)return ag(b,A);if(b instanceof ArrayBuffer)return ag(new Uint8Array(b),A);if(b instanceof ReadableStream)return b.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(_),new _f(b,p);var b}(t,lf(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function(n,e,t){const s=Le(n);var a;(a=(0,pe.Z)(function*(l,p,_){try{const b=yield p.getMetadata();if(yield function(q,W){const de=Le(q),Pe=Sr(W.createTime);return de.persistence.runTransaction("hasNewerBundle","readonly",je=>de.Ye.getBundleMetadata(je,W.id)).then(je=>!!je&&je.createTime.compareTo(Pe)>=0)}(l.localStore,b))return yield p.close(),void _._completeWith((q=b,{taskState:"Success",documentsLoaded:q.totalDocuments,bytesLoaded:q.totalBytes,totalDocuments:q.totalDocuments,totalBytes:q.totalBytes}));_._updateProgress(mf(b));const A=new fI(b,l.localStore,p.k);let M=yield p.Ho();for(;M;){const q=yield A.yo(M);q&&_._updateProgress(q),M=yield p.Ho()}const O=yield A.complete();yield xu(l,O.In,void 0),yield function(q,W){const de=Le(q);return de.persistence.runTransaction("Save bundle","readwrite",Pe=>de.Ye.saveBundleMetadata(Pe,W))}(l.localStore,b),_._completeWith(O.progress)}catch(b){Lh("SyncEngine",`Loading bundle failed with ${b}`),_._failWith(b)}var q}),function(l,p,_){return a.apply(this,arguments)})(s,e,t).then(()=>{s.sharedClientState.notifyBundleLoaded()})}(yield Fy(n),a,s)}))}(t,n._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(t,s){const a=Le(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.Ye.getNamedQuery(l,s))}(yield aw(n),e)}))}(Rr(n=Gt(n,dn)),e).then(t=>t?new mi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ni(this,t):null)}}class Ew extends Hr{constructor(e){super(),this.firestore=e}convertBytes(e){return new yg(new Fo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return no.forKey(t,this.firestore,null)}}class jS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ew(e)}get(e){const t=cl(e);return this._delegate.get(t).then(s=>new _g(this._firestore,new Vo(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=cl(e);return s?(_w("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=cl(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=cl(e);return this._delegate.delete(t),this}}class Qy{constructor(e){this._delegate=e}set(e,t,s){const a=cl(e);return s?(_w("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=cl(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=cl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Id{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Lu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Tf(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Id.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let l=a.get(t);return l||(l=new Id(e,new Ew(e),t),a.set(t,l)),l}}Id.INSTANCES=new WeakMap;class no{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ew(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new no(t,new Dn(t._delegate,s,new Qe(e)))}static forKey(e,t,s){return new no(t,new Dn(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new nr(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new nr(this.firestore,MI(this._delegate,e))}catch(t){throw Oi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Dt.m9)(e))instanceof Dn&&lS(this._delegate,e)}set(e,t){t=_w("DocumentReference.set",t);try{return t?YI(this._delegate,e,t):YI(this._delegate,e)}catch(s){throw Oi(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?gw(this._delegate,e):gw(this._delegate,e,t,...s)}catch(a){throw Oi(a,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Df(Gt(n.firestore,dn),[new Hp(n._key,tr.none())])}(this._delegate)}onSnapshot(...e){const t=rC(e),s=iC(e,a=>new _g(this.firestore,new Vo(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return MS(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Gt(n,Dn);const e=Gt(n.firestore,dn),t=Rr(e),s=new bd(e);return function(n,e){const t=new Ur;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(s=(0,pe.Z)(function*(a,l,p){try{const _=yield function(b,A){const M=Le(b);return M.persistence.runTransaction("read document","readonly",O=>M.Wn.Rn(O,A))}(a,l);_.isFoundDocument()?p.resolve(_):_.isNoDocument()?p.resolve(null):p.reject(new Re(se.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(_){const b=pf(_,`Failed to get document '${l} from cache`);p.reject(b)}}),function(a,l,p){return s.apply(this,arguments)})(yield aw(n),e,t);var s})),t.promise}(t,n._key).then(a=>new Vo(e,s,n._key,a,new sl(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Gt(n,Dn);const e=Gt(n.firestore,dn);return TI(Rr(e),n._key,{source:"server"}).then(t=>yw(e,n,t))}(this._delegate):function(n){n=Gt(n,Dn);const e=Gt(n.firestore,dn);return TI(Rr(e),n._key).then(t=>yw(e,n,t))}(this._delegate),t.then(s=>new _g(this.firestore,new Vo(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new no(this.firestore,this._delegate.withConverter(e?Id.getInstance(this.firestore,e):null))}}function Oi(n,e,t){return n.message=n.message.replace(e,t),n}function rC(n){for(const e of n)if("object"==typeof e&&!vw(e))return e;return{}}function iC(n,e){var t,s;let a;return a=vw(n[0])?n[0]:vw(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class _g{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new no(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return wd(this._delegate,e._delegate)}}class Tf extends _g{data(e){const t=this._delegate.data(e);return function(n,e){n||Xe()}(void 0!==t),t}}class ni{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ew(e)}where(e,t,s){try{return new ni(this.firestore,Fu(this._delegate,function(n,e,t){const s=e,a=zy("where",n);return new WI(a,s,t)}(e,t,s)))}catch(a){throw Oi(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ni(this.firestore,Fu(this._delegate,function(n,e="asc"){const t=e,s=zy("orderBy",n);return new Wy(s,t)}(e,t)))}catch(s){throw Oi(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ni(this.firestore,Fu(this._delegate,function(n){return aS("limit",n),new qy("limit",n,"F")}(e)))}catch(t){throw Oi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ni(this.firestore,Fu(this._delegate,function(n){return aS("limitToLast",n),new qy("limitToLast",n,"L")}(e)))}catch(t){throw Oi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ni(this.firestore,Fu(this._delegate,function(...n){return new ES("startAt",n,!0)}(...e)))}catch(t){throw Oi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ni(this.firestore,Fu(this._delegate,function(...n){return new ES("startAfter",n,!1)}(...e)))}catch(t){throw Oi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ni(this.firestore,Fu(this._delegate,function(...n){return new Cf("endBefore",n,!0)}(...e)))}catch(t){throw Oi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ni(this.firestore,Fu(this._delegate,function(...n){return new Cf("endAt",n,!1)}(...e)))}catch(t){throw Oi(t,"endAt()","Query.endAt()")}}isEqual(e){return PI(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Gt(n,mi);const e=Gt(n.firestore,dn),t=Rr(e),s=new bd(e);return function(n,e){const t=new Ur;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(s=(0,pe.Z)(function*(a,l,p){try{const _=yield Xp(a,l,!0),b=new mI(l,_.zn),A=b.bo(_.documents),M=b.applyChanges(A,!1);p.resolve(M.snapshot)}catch(_){const b=pf(_,`Failed to execute query '${l} against cache`);p.reject(b)}}),function(a,l,p){return s.apply(this,arguments)})(yield aw(n),e,t);var s})),t.promise}(t,n._query).then(a=>new Ra(e,s,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Gt(n,mi);const e=Gt(n.firestore,dn),t=Rr(e),s=new bd(e);return uw(t,n._query,{source:"server"}).then(a=>new Ra(e,s,n,a))}(this._delegate):function(n){n=Gt(n,mi);const e=Gt(n.firestore,dn),t=Rr(e),s=new bd(e);return zI(n._query),uw(t,n._query).then(a=>new Ra(e,s,n,a))}(this._delegate),t.then(s=>new ul(this.firestore,new Ra(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=rC(e),s=iC(e,a=>new ul(this.firestore,new Ra(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return MS(this._delegate,t,s)}withConverter(e){return new ni(this.firestore,this._delegate.withConverter(e?Id.getInstance(this.firestore,e):null))}}class BS{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Tf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ul{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ni(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Tf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new BS(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Tf(this._firestore,s))})}isEqual(e){return wd(this._delegate,e._delegate)}}class nr extends ni{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new no(this.firestore,e):null}doc(e){try{return new no(this.firestore,void 0===e?By(this._delegate):By(this._delegate,e))}catch(t){throw Oi(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Gt(n.firestore,dn),s=By(n),a=Ky(n.converter,e);return Df(t,[lt(bf(n.firestore),"addDoc",s._key,a,null!==n.converter,{}).toMutation(s._key,tr.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new no(this.firestore,t))}isEqual(e){return lS(this._delegate,e._delegate)}withConverter(e){return new nr(this.firestore,this._delegate.withConverter(e?Id.getInstance(this.firestore,e):null))}}function cl(n){return Gt(n,Dn)}class Ds{constructor(...e){this._delegate=new Sa(...e)}static documentId(){return new Ds(jr.keyField().canonicalString())}isEqual(e){return(e=(0,Dt.m9)(e))instanceof Sa&&this._delegate._internalPath.isEqual(e._internalPath)}}class Vu{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Ou("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Vu(e)}static delete(){const e=new yi("deleteField");return e._methodName="FieldValue.delete",new Vu(e)}static arrayUnion(...e){const t=function(...n){return new ax("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Vu(t)}static arrayRemove(...e){const t=function(...n){return new UI("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Vu(t)}static increment(e){const t=function(n){return new jI("increment",n)}(e);return t._methodName="FieldValue.increment",new Vu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const $S={Firestore:nC,GeoPoint:vd,Timestamp:Dr,Blob:yg,Transaction:jS,WriteBatch:Qy,DocumentReference:no,DocumentSnapshot:_g,Query:ni,QueryDocumentSnapshot:Tf,QuerySnapshot:ul,CollectionReference:nr,FieldPath:Ds,FieldValue:Vu,setLogLevel:function(n){!function(n){vu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new Ac.wA("firestore-compat",t=>((e,t)=>new nC(e,t,new US))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},$S)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.9")}(U_.Z);var aC=F(6682);const Jy=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();function uC(n=null){return e=>e.lift(new cC(n))}class cC{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new HS(e,this.defaultValue))}}class HS extends vr.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function GS(n=Sf){return e=>e.lift(new zS(n))}class zS{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new WS(e,this.errorFactory))}}class WS extends vr.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Sf(){return new Jy}var qS=F(4487);function ll(n,e){const t=arguments.length>=2;return s=>s.pipe(n?lr((a,l)=>n(a,l,s)):qS.y,Fe(1),t?uC(e):GS(()=>new Jy))}function lC(n,e){return e?wr(()=>n,e):wr(()=>n)}var dC=F(3101);F(2329);const Cw=new Map,hC={activated:!1,tokenObservers:[]},tA={initialized:!1,enabled:!1};function xr(n){return Cw.get(n)||hC}function Uo(n,e){Cw.set(n,e)}function t_(){return tA}class xa{constructor(e,t,s,a,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=s,this.lowerBound=a,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=a,a>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,pe.Z)(function*(){t.stop();try{t.pending=new Dt.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Dt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(s){t.retryPolicy(s)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ki=new Dt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function iA(n){if(!xr(n).activated)throw ki.create("use-before-activation",{appName:n.name})}function Ig(n,e){return Cg.apply(this,arguments)}function Cg(){return(Cg=(0,pe.Z)(function*({url:n,body:e},t){const s={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});a&&(s["X-Firebase-Client"]=a.getPlatformInfoString());const l={method:"POST",body:JSON.stringify(e),headers:s};let p,_;try{p=yield fetch(n,l)}catch(O){throw ki.create("fetch-network-error",{originalErrorMessage:O.message})}if(200!==p.status)throw ki.create("fetch-status-error",{httpStatus:p.status});try{_=yield p.json()}catch(O){throw ki.create("fetch-parse-error",{originalErrorMessage:O.message})}const b=_.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw ki.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const A=1e3*Number(b[1]),M=Date.now();return{token:_.attestationToken,expireTimeMillis:M+A,issuedAtTimeMillis:M}})).apply(this,arguments)}function aA(n,e){const{projectId:t,appId:s,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${s}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const Cd="firebase-app-check-store";let i_=null;function Rw(){return i_||(i_=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=s=>{n(s.target.result)},t.onerror=s=>{var a;e(ki.create("storage-open",{originalErrorMessage:null===(a=s.target.error)||void 0===a?void 0:a.message}))},t.onupgradeneeded=s=>{const a=s.target.result;switch(s.oldVersion){case 0:a.createObjectStore(Cd,{keyPath:"compositeKey"})}}}catch(t){e(ki.create("storage-open",{originalErrorMessage:t.message}))}}),i_)}function s_(){return(s_=(0,pe.Z)(function*(n,e){const s=(yield Rw()).transaction(Cd,"readwrite"),l=s.objectStore(Cd).put({compositeKey:n,value:e});return new Promise((p,_)=>{l.onsuccess=b=>{p()},s.onerror=b=>{var A;_(ki.create("storage-set",{originalErrorMessage:null===(A=b.target.error)||void 0===A?void 0:A.message}))}})})).apply(this,arguments)}const Na=new So.Yd("@firebase/app-check");function dA(n,e){return(0,Dt.hl)()?function(n,e){return function(n,e){return s_.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Na.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function o_(){return t_().enabled}function wC(){return a_.apply(this,arguments)}function a_(){return(a_=(0,pe.Z)(function*(){const n=t_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const fA={error:"UNKNOWN_ERROR"};function Mw(n){return Dt.US.encodeString(JSON.stringify(n),!1)}function Tg(n){return u_.apply(this,arguments)}function u_(){return(u_=(0,pe.Z)(function*(n,e=!1){const t=n.app;iA(t);const s=xr(t);let l,a=s.token;if(!a){const b=yield s.cachedTokenPromise;b&&Ag(b)&&(a=b)}if(!e&&a&&Ag(a))return{token:a.token};let _,p=!1;if(o_()){s.exchangeTokenPromise||(s.exchangeTokenPromise=Ig(aA(t,yield wC()),n.platformLoggerProvider).then(A=>(s.exchangeTokenPromise=void 0,A)),p=!0);const b=yield s.exchangeTokenPromise;return yield dA(t,b),Uo(t,Object.assign(Object.assign({},s),{token:b})),{token:b.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().then(b=>(s.exchangeTokenPromise=void 0,b)),p=!0),a=yield s.exchangeTokenPromise}catch(b){"appCheck/throttled"===b.code?Na.warn(b.message):Na.error(b),l=b}return a?(_={token:a.token},Uo(t,Object.assign(Object.assign({},s),{token:a})),yield dA(t,a)):_=c_(l),p&&IC(t,_),_})).apply(this,arguments)}function Sg(n,e){const t=xr(n),s=t.tokenObservers.filter(a=>a.next!==e);0===s.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Uo(n,Object.assign(Object.assign({},t),{tokenObservers:s}))}function pA(n){const{app:e}=n,t=xr(e);let s=t.tokenRefresher;s||(s=function(n){const{app:e}=n;return new xa((0,pe.Z)(function*(){let s;if(s=xr(e).token?yield Tg(n,!0):yield Tg(n),s.error)throw s.error}),()=>!0,()=>{const t=xr(e);if(t.token){let s=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return s=Math.min(s,t.token.expireTimeMillis-3e5),Math.max(0,s-Date.now())}return 0},3e4,96e4)}(n),Uo(e,Object.assign(Object.assign({},t),{tokenRefresher:s}))),!s.isRunning()&&t.isTokenAutoRefreshEnabled&&s.start()}function IC(n,e){const t=xr(n).tokenObservers;for(const s of t)try{"EXTERNAL"===s.type&&null!=e.error?s.error(e.error):s.next(e)}catch(a){}}function Ag(n){return n.expireTimeMillis-Date.now()>0}function c_(n){return{token:Mw(fA),error:n}}class CC{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=xr(this.app);for(const t of e)Sg(this.app,t.next);return Promise.resolve()}}const bA="app-check-internal";(0,Ks._registerComponent)(new Ac.wA("app-check",n=>function(n,e){return new CC(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(bA).initialize()})),(0,Ks._registerComponent)(new Ac.wA(bA,n=>function(n){return{getToken:e=>Tg(n,e),addTokenListener:e=>function(n,e,t,s){const{app:a}=n,l=xr(a),p={next:t,error:s,type:e};if(Uo(a,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,p]})),l.token&&Ag(l.token)){const _=l.token;Promise.resolve().then(()=>{t({token:_.token}),pA(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>pA(n))}(n,"INTERNAL",e),removeTokenListener:e=>Sg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ks.registerVersion)("@firebase/app-check","0.5.2");class MC{constructor(){return(0,Nn.vb)("app-check")}}"undefined"!=typeof window&&window;var DA=F(7841);const SA=new v.OlP("angularfire2.auth.use-emulator"),AA=new v.OlP("angularfire2.auth.settings"),RA=new v.OlP("angularfire2.auth.tenant-id"),xA=new v.OlP("angularfire2.auth.langugage-code"),OC=new v.OlP("angularfire2.auth.use-device-language"),NA=new v.OlP("angularfire.auth.persistence"),kC=(n,e,t,s,a,l,p,_)=>(0,Ai.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const b=e.runOutsideAngular(()=>n.auth());if(t&&b.useEmulator(...t),s&&(b.tenantId=s),b.languageCode=a,l&&b.useDeviceLanguage(),p)for(const[A,M]of Object.entries(p))b.settings[A]=M;return _&&b.setPersistence(_),b},[t,s,a,l,p,_]);let d_=(()=>{class n{constructor(t,s,a,l,p,_,b,A,M,O,q,W){const de=new Ct.xQ,Pe=(0,Ze.of)(void 0).pipe((0,xn.QV)(p.outsideAngular),wr(()=>l.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,941)))),(0,rt.U)(()=>(0,Ai.on)(t,l,s)),(0,rt.U)(je=>kC(je,l,_,A,M,O,b,q)),fs({bufferSize:1,refCount:!1}));if(ja(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ze.of)(null);else{Pe.pipe(ll()).subscribe();const dt=Pe.pipe(wr(Ot=>Ot.getRedirectResult().then(ir=>ir,()=>null)),Nn.iC,fs({bufferSize:1,refCount:!1})),xt=Pe.pipe(wr(Ot=>new _n.y(ir=>({unsubscribe:l.runOutsideAngular(()=>Ot.onAuthStateChanged(ju=>ir.next(ju),ju=>ir.error(ju),()=>ir.complete()))})))),Tn=Pe.pipe(wr(Ot=>new _n.y(ir=>({unsubscribe:l.runOutsideAngular(()=>Ot.onIdTokenChanged(ju=>ir.next(ju),ju=>ir.error(ju),()=>ir.complete()))}))));this.authState=dt.pipe(lC(xt),(0,dC.R)(p.outsideAngular),(0,xn.QV)(p.insideAngular)),this.user=dt.pipe(lC(Tn),(0,dC.R)(p.outsideAngular),(0,xn.QV)(p.insideAngular)),this.idToken=this.user.pipe(wr(Ot=>Ot?(0,Rn.D)(Ot.getIdToken()):(0,Ze.of)(null))),this.idTokenResult=this.user.pipe(wr(Ot=>Ot?(0,Rn.D)(Ot.getIdTokenResult()):(0,Ze.of)(null))),this.credential=(0,aC.T)(dt,de,this.authState.pipe(lr(Ot=>!Ot))).pipe((0,rt.U)(Ot=>(null==Ot?void 0:Ot.user)?Ot:null),(0,dC.R)(p.outsideAngular),(0,xn.QV)(p.insideAngular))}return(0,Ai.pX)(this,Pe,l,{spy:{apply:(je,dt,xt)=>{(je.startsWith("signIn")||je.startsWith("createUser"))&&xt.then(Tn=>de.next(Tn))}}})}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Ai.Dh),v.LFG(Ai.xv,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(Nn.HU),v.LFG(SA,8),v.LFG(AA,8),v.LFG(RA,8),v.LFG(xA,8),v.LFG(OC,8),v.LFG(NA,8),v.LFG(MC,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function FC(n,e){return function(n,e=Dc.z){return new _n.y(t=>{let s;return null!=e?e.schedule(()=>{s=n.onSnapshot({includeMetadataChanges:!0},t)}):s=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(n,e)}function xg(n,e){return FC(n,e).pipe((0,rt.U)(t=>({payload:t,type:"query"})))}function Ng(n,e){return xg(n,e).pipe(uh(void 0),ch(),(0,rt.U)(([t,s])=>{const a=s.payload.docChanges(),l=a.map(p=>({type:p.type,payload:p}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((p,_)=>{const b=a.find(M=>M.doc.ref.isEqual(p.ref)),A=null==t?void 0:t.payload.docs.find(M=>M.ref.isEqual(p.ref));b&&JSON.stringify(b.doc.metadata)===JSON.stringify(p.metadata)||!b&&A&&JSON.stringify(A.metadata)===JSON.stringify(p.metadata)||l.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:p}})}),l}))}function $w(n,e,t){return Ng(n,t).pipe(Pl((s,a)=>function(n,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return UC(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return UC(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return UC(n,e.oldIndex,1)}return n}(n,s))}),n}(s,a.map(l=>l.payload),e),[]),t=>t.lift(new op(void 0,void 0)),(0,rt.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function UC(n,e,t,...s){const a=n.slice();return a.splice(e,t,...s),a}function Mg(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Hw{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Ng(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,rt.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(uh(void 0),ch(),lr(([s,a])=>a.length>0||!s),(0,rt.U)(([s,a])=>a),Nn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Pl((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Mg(e);return $w(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}valueChanges(e={}){return xg(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Nn.iC)}get(e){return(0,Rn.D)(this.query.get(e)).pipe(Nn.iC)}add(e){return this.ref.add(e)}doc(e){return new PA(this.ref.doc(e),this.afs)}}class PA{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:l}=$C(s,t);return new Hw(a,l,this.afs)}snapshotChanges(){return function(n,e){return FC(n,e).pipe(uh(void 0),ch(),(0,rt.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,rt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Rn.D)(this.ref.get(e)).pipe(Nn.iC)}}class Ax{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Ng(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),lr(t=>t.length>0),Nn.iC):Ng(this.query,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Pl((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Mg(e);return $w(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}valueChanges(e={}){return xg(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),Nn.iC)}get(e){return(0,Rn.D)(this.query.get(e)).pipe(Nn.iC)}}const OA=new v.OlP("angularfire2.enableFirestorePersistence"),BC=new v.OlP("angularfire2.firestore.persistenceSettings"),Rx=new v.OlP("angularfire2.firestore.settings"),h_=new v.OlP("angularfire2.firestore.use-emulator");function $C(n,e=(t=>t)){return{query:e(n),ref:n}}let kA=(()=>{class n{constructor(t,s,a,l,p,_,b,A,M,O,q,W,de,Pe,je,dt,xt){this.schedulers=b;const Tn=(0,Ai.on)(t,_,s),Ot=M;O&&kC(Tn,_,q,de,Pe,je,W,dt),[this.firestore,this.persistenceEnabled$]=(0,Ai.cc)(`${Tn.name}.firestore`,"AngularFirestore",Tn.name,()=>{const ir=_.runOutsideAngular(()=>Tn.firestore());if(l&&ir.settings(l),Ot&&ir.useEmulator(...Ot),a&&!ja(p)){const ju=()=>{try{return(0,Rn.D)(ir.enablePersistence(A||void 0).then(()=>!0,()=>!1))}catch(DD){return"undefined"!=typeof console&&console.warn(DD),(0,Ze.of)(!1)}};return[ir,_.runOutsideAngular(ju)]}return[ir,(0,Ze.of)(!1)]},[l,Ot,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:p}=$C(a,s),_=this.schedulers.ngZone.run(()=>l);return new Hw(_,p,this)}collectionGroup(t,s){const a=s||(p=>p),l=this.firestore.collectionGroup(t);return new Ax(a(l),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new PA(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Ai.Dh),v.LFG(Ai.xv,8),v.LFG(OA,8),v.LFG(Rx,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(Nn.HU),v.LFG(BC,8),v.LFG(h_,8),v.LFG(d_,8),v.LFG(SA,8),v.LFG(AA,8),v.LFG(RA,8),v.LFG(xA,8),v.LFG(OC,8),v.LFG(NA,8),v.LFG(MC,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),xx=(()=>{class n{constructor(){DA.Z.registerVersion("angularfire",Nn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:OA,useValue:!0},{provide:BC,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[kA]}),n})();const f__firebaseConfig={apiKey:"AIzaSyA5w3KM3LT_UhseRfPeY5awu5o8q_q8-I0",authDomain:"edulibrary-d7f8e.firebaseapp.com",databaseURL:"https://edulibrary-d7f8e-default-rtdb.firebaseio.com",projectId:"edulibrary-d7f8e",storageBucket:"edulibrary-d7f8e.appspot.com",messagingSenderId:"416291166217",appId:"1:416291166217:web:81494ed5a103c92500c0d8",measurementId:"G-JZNVTHM8CZ"};class jo extends Ct.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ds.N;return this._value}next(e){super.next(this._value=e)}}class Nx extends vr.L{notifyNext(e,t,s,a,l){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Mx extends vr.L{constructor(e,t,s){super(),this.parent=e,this.outerValue=t,this.outerIndex=s,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var LA=F(7444);function Px(n,e,t,s,a=new Mx(n,t,s)){if(!a.closed)return e instanceof _n.y?e.subscribe(a):(0,LA.s)(e)(a)}var HC=F(6693);const GC={};class kx{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new FA(e,this.resultSelector))}}class FA extends Nx{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(GC),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let s=0;s<t;s++)this.add(Px(this,e[s],void 0,s))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,s){const a=this.values,p=this.toRespond?a[s]===GC?--this.toRespond:this.toRespond:0;a[s]=t,0===p&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(s){return void this.destination.error(s)}this.destination.next(t)}}var Pg=F(2441);function Dd(n){return function(t){const s=new VA(n),a=t.lift(s);return s.caught=a}}class VA{constructor(e){this.selector=e}call(e,t){return t.subscribe(new UA(e,this.selector,this.caught))}}class UA extends Ws.Ds{constructor(e,t,s){super(e),this.selector=t,this.caught=s}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const s=new Ws.IY(this);this.add(s);const a=(0,Ws.ft)(t,s);a!==s&&this.add(a)}}}function Og(n){return function(t){return 0===n?(0,U.c)():t.lift(new jA(n))}}class jA{constructor(e){if(this.total=e,this.total<0)throw new Ce}call(e,t){return t.subscribe(new Ts(e,this.total))}}class Ts extends vr.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,s=this.total,a=this.count++;t.length<s?t.push(e):t[a%s]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const s=this.count>=this.total?this.total:this.count,a=this.ring;for(let l=0;l<s;l++){const p=t++%s;e.next(a[p])}}e.complete()}}var Li=F(3342),$A=F(1307);class Gw{constructor(e){this.callback=e}call(e,t){return t.subscribe(new zC(e,this.callback))}}class zC extends vr.L{constructor(e,t){super(e),this.add(new Jn.w(t))}}class Ma{constructor(e,t){this.id=e,this.url=t}}class zw extends Ma{constructor(e,t,s="imperative",a=null){super(e,t),this.navigationTrigger=s,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Rf extends Ma{constructor(e,t,s){super(e,t),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ww extends Ma{constructor(e,t,s){super(e,t),this.reason=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class GA extends Ma{constructor(e,t,s){super(e,t),this.error=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zA extends Ma{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qw extends Ma{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WC extends Ma{constructor(e,t,s,a,l){super(e,t),this.urlAfterRedirects=s,this.state=a,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qC extends Ma{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kw extends Ma{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KC{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ro{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class WA{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lx{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qA{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fx{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZC{constructor(e,t,s){this.routerEvent=e,this.position=t,this.anchor=s}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Rt="primary";class KA{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function kg(n){return new KA(n)}const YC="ngNavigationCancelingError";function p_(n){const e=Error("NavigationCancelingError: "+n);return e[YC]=!0,e}function YA(n,e,t){const s=t.path.split("/");if(s.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||s.length<n.length))return null;const a={};for(let l=0;l<s.length;l++){const p=s[l],_=n[l];if(p.startsWith(":"))a[p.substring(1)]=_;else if(p!==_.path)return null}return{consumed:n.slice(0,s.length),posParams:a}}function Pa(n,e){const t=n?Object.keys(n):void 0,s=e?Object.keys(e):void 0;if(!t||!s||t.length!=s.length)return!1;let a;for(let l=0;l<t.length;l++)if(a=t[l],!QA(n[a],e[a]))return!1;return!0}function QA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),s=[...e].sort();return t.every((a,l)=>s[l]===a)}return n===e}function Zw(n){return Array.prototype.concat.apply([],n)}function Yw(n){return n.length>0?n[n.length-1]:null}function ri(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Bo(n){return(0,v.CqO)(n)?n:(0,v.QGY)(n)?(0,Rn.D)(Promise.resolve(n)):(0,Ze.of)(n)}const Qw={exact:function XA(n,e,t){if(!dl(n.segments,e.segments)||!Fg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const s in e.children)if(!n.children[s]||!XA(n.children[s],e.children[s],t))return!1;return!0},subset:eR},Jw={exact:function(n,e){return Pa(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>QA(n[t],e[t]))},ignored:()=>!0};function JC(n,e,t){return Qw[t.paths](n.root,e.root,t.matrixParams)&&Jw[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function eR(n,e,t){return Xw(n,e,e.segments,t)}function Xw(n,e,t,s){if(n.segments.length>t.length){const a=n.segments.slice(0,t.length);return!(!dl(a,t)||e.hasChildren()||!Fg(a,t,s))}if(n.segments.length===t.length){if(!dl(n.segments,t)||!Fg(n.segments,t,s))return!1;for(const a in e.children)if(!n.children[a]||!eR(n.children[a],e.children[a],s))return!1;return!0}{const a=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(dl(n.segments,a)&&Fg(n.segments,a,s)&&n.children[Rt])&&Xw(n.children[Rt],e,l,s)}}function Fg(n,e,t){return e.every((s,a)=>Jw[t](n[a].parameters,s.parameters))}class Td{constructor(e,t,s){this.root=e,this.queryParams=t,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kg(this.queryParams)),this._queryParamMap}toString(){return e0.serialize(this)}}class Ft{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ri(t,(s,a)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rr(this)}}class Vg{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=kg(this.parameters)),this._parameterMap}toString(){return n0(this)}}function dl(n,e){return n.length===e.length&&n.every((t,s)=>t.path===e[s].path)}class XC{}class eD{parse(e){const t=new rD(e);return new Td(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){return`${`/${g_(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const s=n[t];return Array.isArray(s)?s.map(a=>`${Ug(t)}=${Ug(a)}`).join("&"):`${Ug(t)}=${Ug(s)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${function(n){return encodeURI(n)}(e.fragment)}`:""}`}}const e0=new eD;function rr(n){return n.segments.map(e=>n0(e)).join("/")}function g_(n,e){if(!n.hasChildren())return rr(n);if(e){const t=n.children[Rt]?g_(n.children[Rt],!1):"",s=[];return ri(n.children,(a,l)=>{l!==Rt&&s.push(`${l}:${g_(a,!1)}`)}),s.length>0?`${t}(${s.join("//")})`:t}{const t=function(n,e){let t=[];return ri(n.children,(s,a)=>{a===Rt&&(t=t.concat(e(s,a)))}),ri(n.children,(s,a)=>{a!==Rt&&(t=t.concat(e(s,a)))}),t}(n,(s,a)=>a===Rt?[g_(n.children[Rt],!1)]:[`${a}:${g_(s,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Rt]?`${rr(n)}/${t[0]}`:`${rr(n)}/(${t.join("//")})`}}function t0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ug(n){return t0(n).replace(/%3B/gi,";")}function xf(n){return t0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function m_(n){return decodeURIComponent(n)}function tD(n){return m_(n.replace(/\+/g,"%20"))}function n0(n){return`${xf(n.path)}${function(n){return Object.keys(n).map(e=>`;${xf(e)}=${xf(n[e])}`).join("")}(n.parameters)}`}const r0=/^[^\/()?;=#]+/;function Nf(n){const e=n.match(r0);return e?e[0]:""}const rR=/^[^=?&#]+/,iR=/^[^?&#]+/;class rD{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ft([],{}):new Ft([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(s[Rt]=new Ft(e,t)),s}parseSegment(){const e=Nf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Vg(m_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Nf(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const a=Nf(this.remaining);a&&(s=a,this.capture(s))}e[m_(t)]=m_(s)}parseQueryParam(e){const t=function(n){const e=n.match(rR);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const p=function(n){const e=n.match(iR);return e?e[0]:""}(this.remaining);p&&(s=p,this.capture(s))}const a=tD(t),l=tD(s);if(e.hasOwnProperty(a)){let p=e[a];Array.isArray(p)||(p=[p],e[a]=p),p.push(l)}else e[a]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=Nf(this.remaining),a=this.remaining[s.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let l;s.indexOf(":")>-1?(l=s.substr(0,s.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=Rt);const p=this.parseChildren();t[l]=1===Object.keys(p).length?p[Rt]:new Ft([],p),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Nr{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=iD(e,this._root);return t?t.children.map(s=>s.value):[]}firstChild(e){const t=iD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=o0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==e)}pathFromRoot(e){return o0(e,this._root).map(t=>t.value)}}function iD(n,e){if(n===e.value)return e;for(const t of e.children){const s=iD(n,t);if(s)return s}return null}function o0(n,e){if(n===e.value)return[e];for(const t of e.children){const s=o0(n,t);if(s.length)return s.unshift(e),s}return[]}class Uu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function __(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class jg extends Nr{constructor(e,t){super(e),this.snapshot=t,a0(this,e)}toString(){return this.snapshot.toString()}}function sD(n,e){const t=function(n,e){const p=new v_([],{},{},"",{},Rt,e,null,n.root,-1,{});return new oD("",new Uu(p,[]))}(n,e),s=new jo([new Vg("",{})]),a=new jo({}),l=new jo({}),p=new jo({}),_=new jo(""),b=new Bg(s,a,p,_,l,Rt,e,t.root);return b.snapshot=t.root,new jg(new Uu(b,[]),t)}class Bg{constructor(e,t,s,a,l,p,_,b){this.url=e,this.params=t,this.queryParams=s,this.fragment=a,this.data=l,this.outlet=p,this.component=_,this._futureSnapshot=b}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,rt.U)(e=>kg(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,rt.U)(e=>kg(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sR(n,e="emptyOnly"){const t=n.pathFromRoot;let s=0;if("always"!==e)for(s=t.length-1;s>=1;){const a=t[s],l=t[s-1];if(a.routeConfig&&""===a.routeConfig.path)s--;else{if(l.component)break;s--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(s))}class v_{constructor(e,t,s,a,l,p,_,b,A,M,O){this.url=e,this.params=t,this.queryParams=s,this.fragment=a,this.data=l,this.outlet=p,this.component=_,this.routeConfig=b,this._urlSegment=A,this._lastPathIndex=M,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=kg(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kg(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class oD extends Nr{constructor(e,t){super(t),this.url=e,a0(this,t)}toString(){return aD(this._root)}}function a0(n,e){e.value._routerState=n,e.children.forEach(t=>a0(n,t))}function aD(n){const e=n.children.length>0?` { ${n.children.map(aD).join(", ")} } `:"";return`${n.value}${e}`}function uD(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Pa(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Pa(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Pa(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Pa(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function u0(n,e){return Pa(n.params,e.params)&&function(n,e){return dl(n,e)&&n.every((t,s)=>Pa(t.parameters,e[s].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||u0(n.parent,e.parent))}function E_(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const s=t.value;s._futureSnapshot=e.value;const a=function(n,e,t){return e.children.map(s=>{for(const a of t.children)if(n.shouldReuseRoute(s.value,a.value.snapshot))return E_(n,s,a);return E_(n,s)})}(n,e,t);return new Uu(s,a)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const p=l.route;return uR(e,p),p}}const s=function(n){return new Bg(new jo(n.url),new jo(n.params),new jo(n.queryParams),new jo(n.fragment),new jo(n.data),n.outlet,n.component,n)}(e.value),a=e.children.map(l=>E_(n,l));return new Uu(s,a)}}function uR(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)uR(n.children[t],e.children[t])}function w_(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function $g(n){return"object"==typeof n&&null!=n&&n.outlets}function c0(n,e,t,s,a){let l={};return s&&ri(s,(p,_)=>{l[_]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),new Td(t.root===n?e:io(t.root,n,e),l,a)}function io(n,e,t){const s={};return ri(n.children,(a,l)=>{s[l]=a===e?t:io(a,e,t)}),new Ft(n.segments,s)}class cD{constructor(e,t,s){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=s,e&&s.length>0&&w_(s[0]))throw new Error("Root segment cannot have matrix parameters");const a=s.find($g);if(a&&a!==Yw(s))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class l0{constructor(e,t,s){this.segmentGroup=e,this.processChildren=t,this.index=s}}function lD(n,e,t){if(n||(n=new Ft([],{})),0===n.segments.length&&n.hasChildren())return b_(n,e,t);const s=function(n,e,t){let s=0,a=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(s>=t.length)return l;const p=n.segments[a],_=t[s];if($g(_))break;const b=`${_}`,A=s<t.length-1?t[s+1]:null;if(a>0&&void 0===b)break;if(b&&A&&"object"==typeof A&&void 0===A.outlets){if(!pR(b,A,p))return l;s+=2}else{if(!pR(b,{},p))return l;s++}a++}return{match:!0,pathIndex:a,commandIndex:s}}(n,e,t),a=t.slice(s.commandIndex);if(s.match&&s.pathIndex<n.segments.length){const l=new Ft(n.segments.slice(0,s.pathIndex),{});return l.children[Rt]=new Ft(n.segments.slice(s.pathIndex),n.children),b_(l,0,a)}return s.match&&0===a.length?new Ft(n.segments,{}):s.match&&!n.hasChildren()?I_(n,e,t):s.match?b_(n,0,a):I_(n,e,t)}function b_(n,e,t){if(0===t.length)return new Ft(n.segments,{});{const s=function(n){return $g(n[0])?n[0].outlets:{[Rt]:n}}(t),a={};return ri(s,(l,p)=>{"string"==typeof l&&(l=[l]),null!==l&&(a[p]=lD(n.children[p],e,l))}),ri(n.children,(l,p)=>{void 0===s[p]&&(a[p]=l)}),new Ft(n.segments,a)}}function I_(n,e,t){const s=n.segments.slice(0,e);let a=0;for(;a<t.length;){const l=t[a];if($g(l)){const b=Gx(l.outlets);return new Ft(s,b)}if(0===a&&w_(t[0])){s.push(new Vg(n.segments[e].path,dD(t[0]))),a++;continue}const p=$g(l)?l.outlets[Rt]:`${l}`,_=a<t.length-1?t[a+1]:null;p&&_&&w_(_)?(s.push(new Vg(p,dD(_))),a+=2):(s.push(new Vg(p,{})),a++)}return new Ft(s,{})}function Gx(n){const e={};return ri(n,(t,s)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[s]=I_(new Ft([],{}),0,t))}),e}function dD(n){const e={};return ri(n,(t,s)=>e[s]=`${t}`),e}function pR(n,e,t){return n==t.path&&Pa(e,t.parameters)}class Wx{constructor(e,t,s,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=s,this.forwardEvent=a}activate(e){const t=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,s,e),uD(this.futureState.root),this.activateChildRoutes(t,s,e)}deactivateChildRoutes(e,t,s){const a=__(t);e.children.forEach(l=>{const p=l.value.outlet;this.deactivateRoutes(l,a[p],s),delete a[p]}),ri(a,(l,p)=>{this.deactivateRouteAndItsChildren(l,s)})}deactivateRoutes(e,t,s){const a=e.value,l=t?t.value:null;if(a===l)if(a.component){const p=s.getContext(a.outlet);p&&this.deactivateChildRoutes(e,t,p.children)}else this.deactivateChildRoutes(e,t,s);else l&&this.deactivateRouteAndItsChildren(t,s)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const s=t.getContext(e.value.outlet);if(s&&s.outlet){const a=s.outlet.detach(),l=s.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){const s=t.getContext(e.value.outlet),a=s&&e.value.component?s.children:t,l=__(e);for(const p of Object.keys(l))this.deactivateRouteAndItsChildren(l[p],a);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(e,t,s){const a=__(t);e.children.forEach(l=>{this.activateRoutes(l,a[l.value.outlet],s),this.forwardEvent(new Fx(l.value.snapshot))}),e.children.length&&this.forwardEvent(new Lx(e.value.snapshot))}activateRoutes(e,t,s){const a=e.value,l=t?t.value:null;if(uD(a),a===l)if(a.component){const p=s.getOrCreateContext(a.outlet);this.activateChildRoutes(e,t,p.children)}else this.activateChildRoutes(e,t,s);else if(a.component){const p=s.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const _=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),p.children.onOutletReAttached(_.contexts),p.attachRef=_.componentRef,p.route=_.route.value,p.outlet&&p.outlet.attach(_.componentRef,_.route.value),C_(_.route)}else{const _=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(a.snapshot),b=_?_.module.componentFactoryResolver:null;p.attachRef=null,p.route=a,p.resolver=b,p.outlet&&p.outlet.activateWith(a,b),this.activateChildRoutes(e,null,p.children)}}else this.activateChildRoutes(e,null,s)}}function C_(n){uD(n.value),n.children.forEach(C_)}class d0{constructor(e,t){this.routes=e,this.module=t}}function hl(n){return"function"==typeof n}function Ad(n){return n instanceof Td}const Mf=Symbol("INITIAL_VALUE");function Gg(){return wr(n=>function(...n){let e,t;return(0,sp.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,nh.k)(n[0])&&(n=n[0]),(0,HC.n)(n,t).lift(new kx(e))}(n.map(e=>e.pipe(Fe(1),uh(Mf)))).pipe(Pl((e,t)=>{let s=!1;return t.reduce((a,l,p)=>a!==Mf?a:(l===Mf&&(s=!0),s||!1!==l&&p!==t.length-1&&!Ad(l)?a:l),e)},Mf),lr(e=>e!==Mf),(0,rt.U)(e=>Ad(e)?e:!0===e),Fe(1)))}let h0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=v.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,s){1&t&&v._UZ(0,"router-outlet")},directives:function(){return[d]},encapsulation:2}),n})();function f0(n,e=""){for(let t=0;t<n.length;t++){const s=n[t];hD(s,p0(e,s))}}function hD(n,e){n.children&&f0(n.children,e)}function p0(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function zg(n){const e=n.children&&n.children.map(zg),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Rt&&(t.component=h0),t}function Qi(n){return n.outlet||Rt}function Wg(n,e){const t=n.filter(s=>Qi(s)===e);return t.push(...n.filter(s=>Qi(s)!==e)),t}const qg={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Kg(n,e,t){var s;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},qg):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(e.matcher||YA)(t,n,e);if(!l)return Object.assign({},qg);const p={};ri(l.posParams,(b,A)=>{p[A]=b.path});const _=l.consumed.length>0?Object.assign(Object.assign({},p),l.consumed[l.consumed.length-1].parameters):p;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:_,positionalParamSegments:null!==(s=l.posParams)&&void 0!==s?s:{}}}function Zg(n,e,t,s,a="corrected"){if(t.length>0&&function(n,e,t){return t.some(s=>D_(n,e,s)&&Qi(s)!==Rt)}(n,t,s)){const p=new Ft(e,function(n,e,t,s){const a={};a[Rt]=s,s._sourceSegment=n,s._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Qi(l)!==Rt){const p=new Ft([],{});p._sourceSegment=n,p._segmentIndexShift=e.length,a[Qi(l)]=p}return a}(n,e,s,new Ft(t,n.children)));return p._sourceSegment=n,p._segmentIndexShift=e.length,{segmentGroup:p,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(s=>D_(n,e,s))}(n,t,s)){const p=new Ft(n.segments,function(n,e,t,s,a,l){const p={};for(const _ of s)if(D_(n,t,_)&&!a[Qi(_)]){const b=new Ft([],{});b._sourceSegment=n,b._segmentIndexShift="legacy"===l?n.segments.length:e.length,p[Qi(_)]=b}return Object.assign(Object.assign({},a),p)}(n,e,t,s,n.children,a));return p._sourceSegment=n,p._segmentIndexShift=e.length,{segmentGroup:p,slicedSegments:t}}const l=new Ft(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function D_(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function pD(n,e,t,s){return!!(Qi(n)===s||s!==Rt&&D_(e,t,n))&&("**"===n.path||Kg(e,n,t).matched)}function T_(n,e,t){return 0===e.length&&!n.children[t]}class Yg{constructor(e){this.segmentGroup=e||null}}class vi{constructor(e){this.urlTree=e}}function fl(n){return new _n.y(e=>e.error(new Yg(n)))}function Qg(n){return new _n.y(e=>e.error(new vi(n)))}function gD(n){return new _n.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class mD{constructor(e,t,s,a,l){this.configLoader=t,this.urlSerializer=s,this.urlTree=a,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(v.h0i)}apply(){const e=Zg(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ft(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Rt).pipe((0,rt.U)(l=>this.createUrlTree(m0(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Dd(l=>{if(l instanceof vi)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof Yg?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Rt).pipe((0,rt.U)(a=>this.createUrlTree(m0(a),e.queryParams,e.fragment))).pipe(Dd(a=>{throw a instanceof Yg?this.noMatchError(a):a}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,s){const a=e.segments.length>0?new Ft([],{[Rt]:e}):e;return new Td(a,t,s)}expandSegmentGroup(e,t,s,a){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(e,t,s).pipe((0,rt.U)(l=>new Ft([],l))):this.expandSegment(e,s,t,s.segments,a,!0)}expandChildren(e,t,s){const a=[];for(const l of Object.keys(s.children))"primary"===l?a.unshift(l):a.push(l);return(0,Rn.D)(a).pipe(li(l=>{const p=s.children[l],_=Wg(t,l);return this.expandSegmentGroup(e,_,p,l).pipe((0,rt.U)(b=>({segment:b,outlet:l})))}),Pl((l,p)=>(l[p.outlet]=p.segment,l),{}),function(n,e){const t=arguments.length>=2;return s=>s.pipe(n?lr((a,l)=>n(a,l,s)):qS.y,Og(1),t?uC(e):GS(()=>new Jy))}())}expandSegment(e,t,s,a,l,p){return(0,Rn.D)(s).pipe(li(_=>this.expandSegmentAgainstRoute(e,t,s,_,a,l,p).pipe(Dd(A=>{if(A instanceof Yg)return(0,Ze.of)(null);throw A}))),ll(_=>!!_),Dd((_,b)=>{if(_ instanceof Jy||"EmptyError"===_.name){if(T_(t,a,l))return(0,Ze.of)(new Ft([],{}));throw new Yg(t)}throw _}))}expandSegmentAgainstRoute(e,t,s,a,l,p,_){return pD(a,t,l,p)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(e,t,a,l,p):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,s,a,l,p):fl(t):fl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,s,a,l,p){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,s,a,p):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,a,l,p)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,s,a){const l=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?Qg(l):this.lineralizeSegments(s,l).pipe((0,cr.zg)(p=>{const _=new Ft(p,{});return this.expandSegment(e,_,t,p,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,a,l,p){const{matched:_,consumedSegments:b,lastChild:A,positionalParamSegments:M}=Kg(t,a,l);if(!_)return fl(t);const O=this.applyRedirectCommands(b,a.redirectTo,M);return a.redirectTo.startsWith("/")?Qg(O):this.lineralizeSegments(a,O).pipe((0,cr.zg)(q=>this.expandSegment(e,t,s,q.concat(l.slice(A)),p,!1)))}matchSegmentAgainstRoute(e,t,s,a,l){if("**"===s.path)return s.loadChildren?(s._loadedConfig?(0,Ze.of)(s._loadedConfig):this.configLoader.load(e.injector,s)).pipe((0,rt.U)(q=>(s._loadedConfig=q,new Ft(a,{})))):(0,Ze.of)(new Ft(a,{}));const{matched:p,consumedSegments:_,lastChild:b}=Kg(t,s,a);if(!p)return fl(t);const A=a.slice(b);return this.getChildConfig(e,s,a).pipe((0,cr.zg)(O=>{const q=O.module,W=O.routes,{segmentGroup:de,slicedSegments:Pe}=Zg(t,_,A,W),je=new Ft(de.segments,de.children);if(0===Pe.length&&je.hasChildren())return this.expandChildren(q,W,je).pipe((0,rt.U)(Ot=>new Ft(_,Ot)));if(0===W.length&&0===Pe.length)return(0,Ze.of)(new Ft(_,{}));const dt=Qi(s)===l;return this.expandSegment(q,je,W,Pe,dt?Rt:l,!0).pipe((0,rt.U)(Tn=>new Ft(_.concat(Tn.segments),Tn.children)))}))}getChildConfig(e,t,s){return t.children?(0,Ze.of)(new d0(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,Ze.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,s).pipe((0,cr.zg)(a=>a?this.configLoader.load(e.injector,t).pipe((0,rt.U)(l=>(t._loadedConfig=l,l))):function(n){return new _n.y(e=>e.error(p_(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):(0,Ze.of)(new d0([],e))}runCanLoadGuards(e,t,s){const a=t.canLoad;if(!a||0===a.length)return(0,Ze.of)(!0);const l=a.map(p=>{const _=e.get(p);let b;if(function(n){return n&&hl(n.canLoad)}(_))b=_.canLoad(t,s);else{if(!hl(_))throw new Error("Invalid CanLoad guard");b=_(t,s)}return Bo(b)});return(0,Ze.of)(l).pipe(Gg(),(0,Li.b)(p=>{if(!Ad(p))return;const _=p_(`Redirecting to "${this.urlSerializer.serialize(p)}"`);throw _.url=p,_}),(0,rt.U)(p=>!0===p))}lineralizeSegments(e,t){let s=[],a=t.root;for(;;){if(s=s.concat(a.segments),0===a.numberOfChildren)return(0,Ze.of)(s);if(a.numberOfChildren>1||!a.children[Rt])return gD(e.redirectTo);a=a.children[Rt]}}applyRedirectCommands(e,t,s){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,s)}applyRedirectCreatreUrlTree(e,t,s,a){const l=this.createSegmentGroup(e,t.root,s,a);return new Td(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const s={};return ri(e,(a,l)=>{if("string"==typeof a&&a.startsWith(":")){const _=a.substring(1);s[l]=t[_]}else s[l]=a}),s}createSegmentGroup(e,t,s,a){const l=this.createSegments(e,t.segments,s,a);let p={};return ri(t.children,(_,b)=>{p[b]=this.createSegmentGroup(e,_,s,a)}),new Ft(l,p)}createSegments(e,t,s,a){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,a):this.findOrReturn(l,s))}findPosParam(e,t,s){const a=s[t.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return a}findOrReturn(e,t){let s=0;for(const a of t){if(a.path===e.path)return t.splice(s),a;s++}return e}}function m0(n){const e={};for(const s of Object.keys(n.children)){const l=m0(n.children[s]);(l.segments.length>0||l.hasChildren())&&(e[s]=l)}return function(n){if(1===n.numberOfChildren&&n.children[Rt]){const e=n.children[Rt];return new Ft(n.segments.concat(e.segments),e.children)}return n}(new Ft(n.segments,e))}class yD{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class R_{constructor(e,t){this.component=e,this.route=t}}function _D(n,e,t){const s=n._root;return so(s,e?e._root:null,t,[s.value])}function x_(n,e,t){const s=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(s?s.module.injector:t).get(n)}function so(n,e,t,s,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=__(e);return n.children.forEach(p=>{(function(n,e,t,s,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,p=e?e.value:null,_=t?t.getContext(n.value.outlet):null;if(p&&l.routeConfig===p.routeConfig){const b=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!dl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!dl(n.url,e.url)||!Pa(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!u0(n,e)||!Pa(n.queryParams,e.queryParams);case"paramsChange":default:return!u0(n,e)}}(p,l,l.routeConfig.runGuardsAndResolvers);b?a.canActivateChecks.push(new yD(s)):(l.data=p.data,l._resolvedData=p._resolvedData),so(n,e,l.component?_?_.children:null:t,s,a),b&&_&&_.outlet&&_.outlet.isActivated&&a.canDeactivateChecks.push(new R_(_.outlet.component,p))}else p&&Xg(e,_,a),a.canActivateChecks.push(new yD(s)),so(n,null,l.component?_?_.children:null:t,s,a)})(p,l[p.value.outlet],t,s.concat([p.value]),a),delete l[p.value.outlet]}),ri(l,(p,_)=>Xg(p,t.getContext(_),a)),a}function Xg(n,e,t){const s=__(n),a=n.value;ri(s,(l,p)=>{Xg(l,a.component?e?e.children.getContext(p):null:e,t)}),t.canDeactivateChecks.push(new R_(a.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,a))}class RR{}function Oa(n){return new _n.y(e=>e.error(n))}class Pf{constructor(e,t,s,a,l,p){this.rootComponentType=e,this.config=t,this.urlTree=s,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=p}recognize(){const e=Zg(this.urlTree.root,[],[],this.config.filter(p=>void 0===p.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Rt);if(null===t)return null;const s=new v_([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Rt,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new Uu(s,t),l=new oD(this.url,a);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,s=sR(t,this.paramsInheritanceStrategy);t.params=Object.freeze(s.params),t.data=Object.freeze(s.data),e.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(e,t,s){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,s)}processChildren(e,t){const s=[];for(const l of Object.keys(t.children)){const p=t.children[l],_=Wg(e,l),b=this.processSegmentGroup(_,p,l);if(null===b)return null;s.push(...b)}const a=wD(s);return function(n){n.sort((e,t)=>e.value.outlet===Rt?-1:t.value.outlet===Rt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}processSegment(e,t,s,a){for(const l of e){const p=this.processSegmentAgainstRoute(l,t,s,a);if(null!==p)return p}return T_(t,s,a)?[]:null}processSegmentAgainstRoute(e,t,s,a){if(e.redirectTo||!pD(e,t,s,a))return null;let l,p=[],_=[];if("**"===e.path){const W=s.length>0?Yw(s).parameters:{};l=new v_(s,W,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,w0(e),Qi(e),e.component,e,v0(t),E0(t)+s.length,b0(e))}else{const W=Kg(t,e,s);if(!W.matched)return null;p=W.consumedSegments,_=s.slice(W.lastChild),l=new v_(p,W.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,w0(e),Qi(e),e.component,e,v0(t),E0(t)+p.length,b0(e))}const b=function(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:A,slicedSegments:M}=Zg(t,p,_,b.filter(W=>void 0===W.redirectTo),this.relativeLinkResolution);if(0===M.length&&A.hasChildren()){const W=this.processChildren(b,A);return null===W?null:[new Uu(l,W)]}if(0===b.length&&0===M.length)return[new Uu(l,[])];const O=Qi(e)===a,q=this.processSegment(b,A,M,O?Rt:a);return null===q?null:[new Uu(l,q)]}}function xR(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function wD(n){const e=[],t=new Set;for(const s of n){if(!xR(s)){e.push(s);continue}const a=e.find(l=>s.value.routeConfig===l.value.routeConfig);void 0!==a?(a.children.push(...s.children),t.add(a)):e.push(s)}for(const s of t){const a=wD(s.children);e.push(new Uu(s.value,a))}return e.filter(s=>!t.has(s))}function v0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function E0(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function w0(n){return n.data||{}}function b0(n){return n.resolve||{}}function tm(n){return wr(e=>{const t=n(e);return t?(0,Rn.D)(t).pipe((0,rt.U)(()=>e)):(0,Ze.of)(e)})}class Yx extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ID=new v.OlP("ROUTES");class kR{constructor(e,t,s,a){this.loader=e,this.compiler=t,this.onLoadStartListener=s,this.onLoadEndListener=a}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const a=this.loadModuleFactory(t.loadChildren).pipe((0,rt.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const p=l.create(e);return new d0(Zw(p.injector.get(ID,void 0,v.XFs.Self|v.XFs.Optional)).map(zg),p)}),Dd(l=>{throw t._loader$=void 0,l}));return t._loader$=new Pg.c(a,()=>new Ct.xQ).pipe((0,$A.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Rn.D)(this.loader.load(e)):Bo(e()).pipe((0,cr.zg)(t=>t instanceof v.YKP?(0,Ze.of)(t):(0,Rn.D)(this.compiler.compileModuleAsync(t))))}}class Qx{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new kf,this.attachRef=null}}class kf{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const s=this.getOrCreateContext(e);s.outlet=t,this.contexts.set(e,s)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Qx,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Jx{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Xx(n){throw n}function eN(n,e,t){return e.parse("/")}function FR(n,e){return(0,Ze.of)(null)}const VR={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ss=(()=>{class n{constructor(t,s,a,l,p,_,b,A){this.rootComponentType=t,this.urlSerializer=s,this.rootContexts=a,this.location=l,this.config=A,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ct.xQ,this.errorHandler=Xx,this.malformedUriErrorHandler=eN,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:FR,afterPreactivation:FR},this.urlHandlingStrategy=new Jx,this.routeReuseStrategy=new Yx,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=p.get(v.h0i),this.console=p.get(v.c2e);const q=p.get(v.R0b);this.isNgZoneEnabled=q instanceof v.R0b&&v.R0b.isInAngularZone(),this.resetConfig(A),this.currentUrlTree=new Td(new Ft([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new kR(_,b,W=>this.triggerEvent(new KC(W)),W=>this.triggerEvent(new ro(W))),this.routerState=sD(this.currentUrlTree,this.rootComponentType),this.transitions=new jo({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const s=this.events;return t.pipe(lr(a=>0!==a.id),(0,rt.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),wr(a=>{let l=!1,p=!1;return(0,Ze.of)(a).pipe((0,Li.b)(_=>{this.currentNavigation={id:_.id,initialUrl:_.currentRawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),wr(_=>{const b=this.browserUrlTree.toString(),A=!this.navigated||_.extractedUrl.toString()!==b||b!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||A)&&this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return C0(_.source)&&(this.browserUrlTree=_.extractedUrl),(0,Ze.of)(_).pipe(wr(O=>{const q=this.transitions.getValue();return s.next(new zw(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),q!==this.transitions.getValue()?U.E:Promise.resolve(O)}),function(n,e,t,s){return wr(a=>function(n,e,t,s,a){return new mD(n,e,t,s,a).apply()}(n,e,t,a.extractedUrl,s).pipe((0,rt.U)(l=>Object.assign(Object.assign({},a),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Li.b)(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function(n,e,t,s,a){return(0,cr.zg)(l=>function(n,e,t,s,a="emptyOnly",l="legacy"){try{const p=new Pf(n,e,t,s,a,l).recognize();return null===p?Oa(new RR):(0,Ze.of)(p)}catch(p){return Oa(p)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),s,a).pipe((0,rt.U)(p=>Object.assign(Object.assign({},l),{targetSnapshot:p}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Li.b)(O=>{"eager"===this.urlUpdateStrategy&&(O.extras.skipLocationChange||this.setBrowserUrl(O.urlAfterRedirects,O),this.browserUrlTree=O.urlAfterRedirects);const q=new zA(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);s.next(q)}));if(A&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:q,extractedUrl:W,source:de,restoredState:Pe,extras:je}=_,dt=new zw(q,this.serializeUrl(W),de,Pe);s.next(dt);const xt=sD(W,this.rootComponentType).snapshot;return(0,Ze.of)(Object.assign(Object.assign({},_),{targetSnapshot:xt,urlAfterRedirects:W,extras:Object.assign(Object.assign({},je),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=_.rawUrl,this.browserUrlTree=_.urlAfterRedirects,_.resolve(null),U.E}),tm(_=>{const{targetSnapshot:b,id:A,extractedUrl:M,rawUrl:O,extras:{skipLocationChange:q,replaceUrl:W}}=_;return this.hooks.beforePreactivation(b,{navigationId:A,appliedUrlTree:M,rawUrlTree:O,skipLocationChange:!!q,replaceUrl:!!W})}),(0,Li.b)(_=>{const b=new qw(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),(0,rt.U)(_=>Object.assign(Object.assign({},_),{guards:_D(_.targetSnapshot,_.currentSnapshot,this.rootContexts)})),function(n,e){return(0,cr.zg)(t=>{const{targetSnapshot:s,currentSnapshot:a,guards:{canActivateChecks:l,canDeactivateChecks:p}}=t;return 0===p.length&&0===l.length?(0,Ze.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,s){return(0,Rn.D)(n).pipe((0,cr.zg)(a=>function(n,e,t,s,a){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,Ze.of)(!0);const p=l.map(_=>{const b=x_(_,e,a);let A;if(function(n){return n&&hl(n.canDeactivate)}(b))A=Bo(b.canDeactivate(n,e,t,s));else{if(!hl(b))throw new Error("Invalid CanDeactivate guard");A=Bo(b(n,e,t,s))}return A.pipe(ll())});return(0,Ze.of)(p).pipe(Gg())}(a.component,a.route,t,e,s)),ll(a=>!0!==a,!0))}(p,s,a,n).pipe((0,cr.zg)(_=>_&&function(n){return"boolean"==typeof n}(_)?function(n,e,t,s){return(0,Rn.D)(e).pipe(li(a=>x(function(n,e){return null!==n&&e&&e(new WA(n)),(0,Ze.of)(!0)}(a.route.parent,s),function(n,e){return null!==n&&e&&e(new qA(n)),(0,Ze.of)(!0)}(a.route,s),function(n,e,t){const s=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(p=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(p)).filter(p=>null!==p).map(p=>Z(()=>{const _=p.guards.map(b=>{const A=x_(b,p.node,t);let M;if(function(n){return n&&hl(n.canActivateChild)}(A))M=Bo(A.canActivateChild(s,n));else{if(!hl(A))throw new Error("Invalid CanActivateChild guard");M=Bo(A(s,n))}return M.pipe(ll())});return(0,Ze.of)(_).pipe(Gg())}));return(0,Ze.of)(l).pipe(Gg())}(n,a.path,t),function(n,e,t){const s=e.routeConfig?e.routeConfig.canActivate:null;if(!s||0===s.length)return(0,Ze.of)(!0);const a=s.map(l=>Z(()=>{const p=x_(l,e,t);let _;if(function(n){return n&&hl(n.canActivate)}(p))_=Bo(p.canActivate(e,n));else{if(!hl(p))throw new Error("Invalid CanActivate guard");_=Bo(p(e,n))}return _.pipe(ll())}));return(0,Ze.of)(a).pipe(Gg())}(n,a.route,t))),ll(a=>!0!==a,!0))}(s,l,n,e):(0,Ze.of)(_)),(0,rt.U)(_=>Object.assign(Object.assign({},t),{guardsResult:_})))})}(this.ngModule.injector,_=>this.triggerEvent(_)),(0,Li.b)(_=>{if(Ad(_.guardsResult)){const A=p_(`Redirecting to "${this.serializeUrl(_.guardsResult)}"`);throw A.url=_.guardsResult,A}const b=new WC(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.triggerEvent(b)}),lr(_=>!!_.guardsResult||(this.restoreHistory(_),this.cancelNavigationTransition(_,""),!1)),tm(_=>{if(_.guards.canActivateChecks.length)return(0,Ze.of)(_).pipe((0,Li.b)(b=>{const A=new qC(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(A)}),wr(b=>{let A=!1;return(0,Ze.of)(b).pipe(function(n,e){return(0,cr.zg)(t=>{const{targetSnapshot:s,guards:{canActivateChecks:a}}=t;if(!a.length)return(0,Ze.of)(t);let l=0;return(0,Rn.D)(a).pipe(li(p=>function(n,e,t,s){return function(n,e,t,s){const a=Object.keys(n);if(0===a.length)return(0,Ze.of)({});const l={};return(0,Rn.D)(a).pipe((0,cr.zg)(p=>function(n,e,t,s){const a=x_(n,e,s);return Bo(a.resolve?a.resolve(e,t):a(e,t))}(n[p],e,t,s).pipe((0,Li.b)(_=>{l[p]=_}))),Og(1),(0,cr.zg)(()=>Object.keys(l).length===a.length?(0,Ze.of)(l):U.E))}(n._resolve,n,e,s).pipe((0,rt.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),sR(n,t).resolve),null)))}(p.route,s,n,e)),(0,Li.b)(()=>l++),Og(1),(0,cr.zg)(p=>l===a.length?(0,Ze.of)(t):U.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Li.b)({next:()=>A=!0,complete:()=>{A||(this.restoreHistory(b),this.cancelNavigationTransition(b,"At least one route resolver didn't emit any value."))}}))}),(0,Li.b)(b=>{const A=new Kw(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(A)}))}),tm(_=>{const{targetSnapshot:b,id:A,extractedUrl:M,rawUrl:O,extras:{skipLocationChange:q,replaceUrl:W}}=_;return this.hooks.afterPreactivation(b,{navigationId:A,appliedUrlTree:M,rawUrlTree:O,skipLocationChange:!!q,replaceUrl:!!W})}),(0,rt.U)(_=>{const b=function(n,e,t){const s=E_(n,e._root,t?t._root:void 0);return new jg(s,e)}(this.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return Object.assign(Object.assign({},_),{targetRouterState:b})}),(0,Li.b)(_=>{this.currentUrlTree=_.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl),this.routerState=_.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_),this.browserUrlTree=_.urlAfterRedirects)}),((n,e,t)=>(0,rt.U)(s=>(new Wx(e,s.targetRouterState,s.currentRouterState,t).activate(n),s)))(this.rootContexts,this.routeReuseStrategy,_=>this.triggerEvent(_)),(0,Li.b)({next(){l=!0},complete(){l=!0}}),function(n){return e=>e.lift(new Gw(n))}(()=>{var _;if(!l&&!p){const b=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,b)):this.cancelNavigationTransition(a,b)}(null===(_=this.currentNavigation)||void 0===_?void 0:_.id)===a.id&&(this.currentNavigation=null)}),Dd(_=>{if(p=!0,function(n){return n&&n[YC]}(_)){const b=Ad(_.url);b||(this.navigated=!0,this.restoreHistory(a,!0));const A=new Ww(a.id,this.serializeUrl(a.extractedUrl),_.message);s.next(A),b?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(_.url,this.rawUrlTree),O={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||C0(a.source)};this.scheduleNavigation(M,"imperative",null,O,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const b=new GA(a.id,this.serializeUrl(a.extractedUrl),_);s.next(b);try{a.resolve(this.errorHandler(_))}catch(A){a.reject(A)}}return U.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const s=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,s)&&setTimeout(()=>{const{source:a,state:l,urlTree:p}=s,_={replaceUrl:!0};if(l){const b=Object.assign({},l);delete b.navigationId,delete b.\u0275routerPageId,0!==Object.keys(b).length&&(_.state=b)}this.scheduleNavigation(p,a,l,_)},0),this.lastLocationChangeInfo=s}))}extractLocationChangeInfoFromEvent(t){var s;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,s){if(!t)return!0;const a=s.urlTree.toString()===t.urlTree.toString();return s.transitionId!==t.transitionId||!a||!("hashchange"===s.source&&"popstate"===t.source||"popstate"===s.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){f0(t),this.config=t.map(zg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,s={}){const{relativeTo:a,queryParams:l,fragment:p,queryParamsHandling:_,preserveFragment:b}=s,A=a||this.routerState.root,M=b?this.currentUrlTree.fragment:p;let O=null;switch(_){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=l||null}return null!==O&&(O=this.removeEmptyProps(O)),function(n,e,t,s,a){if(0===t.length)return c0(e.root,e.root,e,s,a);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new cD(!0,0,n);let e=0,t=!1;const s=n.reduce((a,l,p)=>{if("object"==typeof l&&null!=l){if(l.outlets){const _={};return ri(l.outlets,(b,A)=>{_[A]="string"==typeof b?b.split("/"):b}),[...a,{outlets:_}]}if(l.segmentPath)return[...a,l.segmentPath]}return"string"!=typeof l?[...a,l]:0===p?(l.split("/").forEach((_,b)=>{0==b&&"."===_||(0==b&&""===_?t=!0:".."===_?e++:""!=_&&a.push(_))}),a):[...a,l]},[]);return new cD(t,e,s)}(t);if(l.toRoot())return c0(e.root,new Ft([],{}),e,s,a);const p=function(n,e,t){if(n.isAbsolute)return new l0(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new l0(l,l===e.root,0)}const s=w_(n.commands[0])?0:1;return function(n,e,t){let s=n,a=e,l=t;for(;l>a;){if(l-=a,s=s.parent,!s)throw new Error("Invalid number of '../'");a=s.segments.length}return new l0(s,!1,a-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+s,n.numberOfDoubleDots)}(l,e,n),_=p.processChildren?b_(p.segmentGroup,p.index,l.commands):lD(p.segmentGroup,p.index,l.commands);return c0(p.segmentGroup,_,e,s,a)}(A,this.currentUrlTree,t,O,null!=M?M:null)}navigateByUrl(t,s={skipLocationChange:!1}){const a=Ad(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,s)}navigate(t,s={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,s),s)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let s;try{s=this.urlSerializer.parse(t)}catch(a){s=this.malformedUriErrorHandler(a,this.urlSerializer,t)}return s}isActive(t,s){let a;if(a=!0===s?Object.assign({},VR):!1===s?Object.assign({},tN):s,Ad(t))return JC(this.currentUrlTree,t,a);const l=this.parseUrl(t);return JC(this.currentUrlTree,l,a)}removeEmptyProps(t){return Object.keys(t).reduce((s,a)=>{const l=t[a];return null!=l&&(s[a]=l),s},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Rf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,s,a,l,p){var _,b;if(this.disposed)return Promise.resolve(!1);const A=this.getTransition(),M=C0(s)&&A&&!C0(A.source),W=(this.lastSuccessfulId===A.id||this.currentNavigation?A.rawUrl:A.urlAfterRedirects).toString()===t.toString();if(M&&W)return Promise.resolve(!0);let de,Pe,je;p?(de=p.resolve,Pe=p.reject,je=p.promise):je=new Promise((Tn,Ot)=>{de=Tn,Pe=Ot});const dt=++this.navigationId;let xt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),xt=a&&a.\u0275routerPageId?a.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(b=this.browserPageId)&&void 0!==b?b:0)+1):xt=0,this.setTransition({id:dt,targetPageId:xt,source:s,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:de,reject:Pe,promise:je,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),je.catch(Tn=>Promise.reject(Tn))}setBrowserUrl(t,s){const a=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},s.extras.state),this.generateNgRouterState(s.id,s.targetPageId));this.location.isCurrentPathEqualTo(a)||s.extras.replaceUrl?this.location.replaceState(a,"",l):this.location.go(a,"",l)}restoreHistory(t,s=!1){var a,l;if("computed"===this.canceledNavigationResolution){const p=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===p?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===p&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(p)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,s){const a=new Ww(t.id,this.serializeUrl(t.extractedUrl),s);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,s){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:s}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(v.DyG),v.LFG(XC),v.LFG(kf),v.LFG(ze),v.LFG(v.zs3),v.LFG(v.v3s),v.LFG(v.Sil),v.LFG(void 0))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();function C0(n){return"imperative"!==n}let d=(()=>{class n{constructor(t,s,a,l,p){this.parentContexts=t,this.location=s,this.resolver=a,this.changeDetector=p,this.activated=null,this._activatedRoute=null,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.name=l||Rt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,s){this.activated=t,this._activatedRoute=s,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,s){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const p=(s=s||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),_=this.parentContexts.getOrCreateContext(this.name).children,b=new g(t,_,this.location.injector);this.activated=this.location.createComponent(p,this.location.length,b),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(kf),v.Y36(v.s_b),v.Y36(v._Vd),v.$8M("name"),v.Y36(v.sBO))},n.\u0275dir=v.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class g{constructor(e,t,s){this.route=e,this.childContexts=t,this.parent=s}get(e,t){return e===Bg?this.route:e===kf?this.childContexts:this.parent.get(e,t)}}class y{}class C{preload(e,t){return(0,Ze.of)(null)}}let S=(()=>{class n{constructor(t,s,a,l,p){this.router=t,this.injector=l,this.preloadingStrategy=p,this.loader=new kR(s,a,A=>t.triggerEvent(new KC(A)),A=>t.triggerEvent(new ro(A)))}setUpPreloading(){this.subscription=this.router.events.pipe(lr(t=>t instanceof Rf),li(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(v.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,s){const a=[];for(const l of s)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const p=l._loadedConfig;a.push(this.processRoutes(p.module,p.routes))}else l.loadChildren&&!l.canLoad?a.push(this.preloadConfig(t,l)):l.children&&a.push(this.processRoutes(t,l.children));return(0,Rn.D)(a).pipe((0,I.J)(),(0,rt.U)(l=>{}))}preloadConfig(t,s){return this.preloadingStrategy.preload(s,()=>(s._loadedConfig?(0,Ze.of)(s._loadedConfig):this.loader.load(t.injector,s)).pipe((0,cr.zg)(l=>(s._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Ss),v.LFG(v.v3s),v.LFG(v.Sil),v.LFG(v.zs3),v.LFG(y))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),N=(()=>{class n{constructor(t,s,a={}){this.router=t,this.viewportScroller=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof zw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Rf&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ZC&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,s){this.router.triggerEvent(new ZC(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Ss),v.LFG(Ba),v.LFG(void 0))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const j=new v.OlP("ROUTER_CONFIGURATION"),z=new v.OlP("ROUTER_FORROOT_GUARD"),J=[ze,{provide:XC,useClass:eD},{provide:Ss,useFactory:function(n,e,t,s,a,l,p,_={},b,A){const M=new Ss(null,n,e,t,s,a,l,Zw(p));return b&&(M.urlHandlingStrategy=b),A&&(M.routeReuseStrategy=A),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(_,M),_.enableTracing&&M.events.subscribe(O=>{var q,W;null===(q=console.group)||void 0===q||q.call(console,`Router Event: ${O.constructor.name}`),console.log(O.toString()),console.log(O),null===(W=console.groupEnd)||void 0===W||W.call(console)}),M},deps:[XC,kf,ze,v.zs3,v.v3s,v.Sil,ID,j,[class{},new v.FiY],[class{},new v.FiY]]},kf,{provide:Bg,useFactory:function(n){return n.routerState.root},deps:[Ss]},{provide:v.v3s,useClass:v.EAV},S,C,class{preload(e,t){return t().pipe(Dd(()=>(0,Ze.of)(null)))}},{provide:j,useValue:{enableTracing:!1}}];function xe(){return new v.PXZ("Router",Ss)}let _e=(()=>{class n{constructor(t,s){}static forRoot(t,s){return{ngModule:n,providers:[J,gr(t),{provide:z,useFactory:Pt,deps:[[Ss,new v.FiY,new v.tp0]]},{provide:j,useValue:s||{}},{provide:K,useFactory:ot,deps:[ue,[new v.tBr(ge),new v.FiY],j]},{provide:N,useFactory:Je,deps:[Ss,Ba,j]},{provide:y,useExisting:s&&s.preloadingStrategy?s.preloadingStrategy:C},{provide:v.PXZ,multi:!0,useFactory:xe},[pl,{provide:v.ip1,multi:!0,useFactory:Ff,deps:[pl]},{provide:M_,useFactory:D0,deps:[pl]},{provide:v.tb,multi:!0,useExisting:M_}]]}}static forChild(t){return{ngModule:n,providers:[gr(t)]}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(z,8),v.LFG(Ss,8))},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({}),n})();function Je(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new N(n,e,t)}function ot(n,e,t={}){return t.useHash?new Ae(n,e):new fe(n,e)}function Pt(n){return"guarded"}function gr(n){return[{provide:v.deG,multi:!0,useValue:n},{provide:ID,multi:!0,useValue:n}]}let pl=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ct.xQ}appInitializer(){return this.injector.get(L,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let s=null;const a=new Promise(_=>s=_),l=this.injector.get(Ss),p=this.injector.get(j);return"disabled"===p.initialNavigation?(l.setUpLocationChangeListener(),s(!0)):"enabled"===p.initialNavigation||"enabledBlocking"===p.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,Ze.of)(null):(this.initNavigation=!0,s(!0),this.resultOfPreactivationDone),l.initialNavigation()):s(!0),a})}bootstrapListener(t){const s=this.injector.get(j),a=this.injector.get(S),l=this.injector.get(N),p=this.injector.get(Ss),_=this.injector.get(v.z2F);t===_.components[0]&&(("enabledNonBlocking"===s.initialNavigation||void 0===s.initialNavigation)&&p.initialNavigation(),a.setUpPreloading(),l.init(),p.resetRootComponentType(_.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(v.zs3))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();function Ff(n){return n.appInitializer.bind(n)}function D0(n){return n.bootstrapListener.bind(n)}const M_=new v.OlP("Router Initializer"),S0=[];let fN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({imports:[[_e.forRoot(S0)],_e]}),n})();var A0=(()=>(function(n){n.UKRAINIAN="uk_UA",n.ENGLISH="en_US",n.RUSSIAN="ru_RU"}(A0||(A0={})),A0))();let pN=(()=>{class n{constructor(t){this.translateService=t}setDefaultLang(t=A0.ENGLISH){this.translateService.setDefaultLang(t)}switchLanguage(t){this.translateService.use(t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(da))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gN(n,e){if(1&n&&(v.TgZ(0,"div"),v.TgZ(1,"p"),v._uU(2),v.qZA(),v.qZA()),2&n){const t=e.$implicit;v.xp6(2),v.Oqu(t.name)}}let mN=(()=>{class n{constructor(t,s){this.fire=t,this.lang=s,this.languages=A0,this.users=t.collection("users").valueChanges(),this.lang.setDefaultLang()}ngOnInit(){this.getAll()}removeUser(t){this.fire.collection("users").doc(t).delete().then(s=>console.log("res",s))}getAll(){this.fire.collection("users").valueChanges({idField:"userId"}).subscribe(t=>{console.log("resp",t),this.user=t[0]})}updateUser(){return this.fire.collection("users").doc("J3xgclPHQPLnVmQz2ifk").set({name:"Alex"}).then(console.log)}getUsers(){this.fire.collection("users").snapshotChanges().subscribe(t=>{console.log("snapshot",t)})}postUser(){this.fire.collection("users").add({name:"Max",personalInfo:"some info"})}switch(t){this.lang.switchLanguage(t)}buildTranslationKey(t){return`${t}`}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(kA),v.Y36(pN))},n.\u0275cmp=v.Xpm({type:n,selectors:[["app-root"]],decls:18,vars:6,consts:[[4,"ngFor","ngForOf"],[1,"tw-text-xl"],[1,"container"],[1,"row"],[1,"col"],[3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(t,s){1&t&&(v.YNc(0,gN,3,1,"div",0),v.ALo(1,"async"),v.TgZ(2,"p"),v._uU(3,"New info"),v.qZA(),v.TgZ(4,"p",1),v._uU(5),v.ALo(6,"translate"),v.qZA(),v.TgZ(7,"div",2),v.TgZ(8,"div",3),v.TgZ(9,"div",4),v.TgZ(10,"button",5),v.NdJ("click",function(){return s.switch(s.languages.RUSSIAN)}),v._uU(11,"ru"),v.qZA(),v.qZA(),v.TgZ(12,"div",4),v.TgZ(13,"button",5),v.NdJ("click",function(){return s.switch(s.languages.ENGLISH)}),v._uU(14,"en"),v.qZA(),v.qZA(),v.TgZ(15,"div",4),v.TgZ(16,"button",6),v.NdJ("click",function(){return s.switch(s.languages.UKRAINIAN)}),v._uU(17,"ua"),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&t&&(v.Q6J("ngForOf",v.lcZ(1,2,s.users)),v.xp6(5),v.Oqu(v.lcZ(6,4,s.buildTranslationKey("test"))))},directives:[Vi],pipes:[Gu,oh],styles:[""]}),n})();class yN{constructor(e,t="/assets/i18n/",s=".json"){this.http=e,this.prefix=t,this.suffix=s}getTranslation(e){return this.http.get(`${this.prefix}${e}${this.suffix}`)}}function rN(n){return new yN(n,"assets/i18n/",".json")}let _N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({imports:[[ns,ah.forChild({loader:{provide:ps,useFactory:rN,deps:[eh]}}),Si],ah,Si]}),n})(),vN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n,bootstrap:[mN]}),n.\u0275inj=v.cJS({providers:[],imports:[[Xa,fN,Ai.hO.initializeApp(f__firebaseConfig),xx,_N,ah.forRoot({loader:{provide:ps,useFactory:rN,deps:[eh]},isolate:!1})]]}),n})();(0,v.G48)(),ac().bootstrapModule(vN).catch(n=>console.error(n))},3394:(Ye,we,F)=>{"use strict";F.d(we,{Z:()=>be});var v=F(3854),X=F(3910),k=F(8026),ce=F(5422);class ne{constructor(K,ye){this._delegate=K,this.firebase=ye,(0,k._addComponent)(K,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=K.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this._delegate.automaticDataCollectionEnabled=K}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(K=>{this._delegate.checkDestroyed(),K()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(K,ye=k._DEFAULT_ENTRY_NAME){var ge;this._delegate.checkDestroyed();const fe=this._delegate.container.getProvider(K);return!fe.isInitialized()&&"EXPLICIT"===(null===(ge=fe.getComponent())||void 0===ge?void 0:ge.instantiationMode)&&fe.initialize(),fe.getImmediate({identifier:ye})}_removeServiceInstance(K,ye=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(K).clearInstance(ye)}_addComponent(K){(0,k._addComponent)(this._delegate,K)}_addOrOverwriteComponent(K){(0,k._addOrOverwriteComponent)(this._delegate,K)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new v.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),L=function ee(){const he=function(he){const K={},ye={__esModule:!0,initializeApp:function(gt,hn={}){const mt=k.initializeApp(gt,hn);if((0,v.r3)(K,mt.name))return K[mt.name];const _t=new he(mt,ye);return K[mt.name]=_t,_t},app:fe,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function(gt){const hn=gt.name,mt=hn.replace("-compat","");if(k._registerComponent(gt)&&"PUBLIC"===gt.type){const _t=(ht=fe())=>{if("function"!=typeof ht[mt])throw me.create("invalid-app-argument",{appName:hn});return ht[mt]()};void 0!==gt.serviceProps&&(0,v.ZB)(_t,gt.serviceProps),ye[mt]=_t,he.prototype[mt]=function(...ht){return this._getService.bind(this,hn).apply(this,gt.multipleInstances?ht:[])}}return"PUBLIC"===gt.type?ye[mt]:null},removeApp:function(gt){delete K[gt]},useAsService:function(gt,hn){return"serverAuth"===hn?null:hn},modularAPIs:k}};function fe(gt){if(!(0,v.r3)(K,gt=gt||k._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:gt});return K[gt]}return ye.default=ye,Object.defineProperty(ye,"apps",{get:function(){return Object.keys(K).map(gt=>K[gt])}}),fe.App=he,ye}(ne);return he.INTERNAL=Object.assign(Object.assign({},he.INTERNAL),{createFirebaseNamespace:ee,extendNamespace:function(ye){(0,v.ZB)(he,ye)},createSubscribe:v.ne,ErrorFactory:v.LL,deepExtend:v.ZB}),he}(),V=new ce.Yd("@firebase/app-compat");if((0,v.jU)()&&void 0!==self.firebase){V.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const he=self.firebase.SDK_VERSION;he&&he.indexOf("LITE")>=0&&V.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=L;(0,k.registerVersion)("@firebase/app-compat","0.1.11",undefined)},8026:(Ye,we,F)=>{"use strict";F.r(we),F.d(we,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>ka,_DEFAULT_ENTRY_NAME:()=>ao,_addComponent:()=>Ji,_addOrOverwriteComponent:()=>xs,_apps:()=>On,_clearComponents:()=>Wn,_components:()=>Rs,_getProvider:()=>an,_registerComponent:()=>Xi,_removeServiceInstance:()=>$t,deleteApp:()=>sr,getApp:()=>mr,getApps:()=>Te,initializeApp:()=>Mr,onLog:()=>Nt,registerVersion:()=>Ei,setLogLevel:()=>Gr});var v=F(8239),X=F(3910),k=F(5422),ce=F(3854);class ne{constructor(Se){this.container=Se}getPlatformInfoString(){return this.container.getProviders().map(Ut=>{if(function(et){const Se=et.getComponent();return"VERSION"===(null==Se?void 0:Se.type)}(Ut)){const en=Ut.getImmediate();return`${en.library}/${en.version}`}return null}).filter(Ut=>Ut).join(" ")}}const me="@firebase/app",ee=new k.Yd("@firebase/app"),ao="[DEFAULT]",Bu={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},On=new Map,Rs=new Map;function Ji(et,Se){try{et.container.addComponent(Se)}catch(Ut){ee.debug(`Component ${Se.name} failed to register with FirebaseApp ${et.name}`,Ut)}}function xs(et,Se){et.container.addOrOverwriteComponent(Se)}function Xi(et){const Se=et.name;if(Rs.has(Se))return ee.debug(`There were multiple attempts to register component ${Se}.`),!1;Rs.set(Se,et);for(const Ut of On.values())Ji(Ut,et);return!0}function an(et,Se){return et.container.getProvider(Se)}function $t(et,Se,Ut=ao){an(et,Se).clearInstance(Ut)}function Wn(){Rs.clear()}const Vt=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class wt{constructor(Se,Ut,en){this._isDeleted=!1,this._options=Object.assign({},Se),this._config=Object.assign({},Ut),this._name=Ut.name,this._automaticDataCollectionEnabled=Ut.automaticDataCollectionEnabled,this._container=en,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this.checkDestroyed(),this._automaticDataCollectionEnabled=Se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Se){this._isDeleted=Se}checkDestroyed(){if(this.isDeleted)throw Vt.create("app-deleted",{appName:this._name})}}const ka="9.6.0";function Mr(et,Se={}){"object"!=typeof Se&&(Se={name:Se});const Ut=Object.assign({name:ao,automaticDataCollectionEnabled:!1},Se),en=Ut.name;if("string"!=typeof en||!en)throw Vt.create("bad-app-name",{appName:String(en)});const fn=On.get(en);if(fn){if((0,ce.vZ)(et,fn.options)&&(0,ce.vZ)(Ut,fn.config))return fn;throw Vt.create("duplicate-app",{appName:en})}const kt=new X.H0(en);for(const We of Rs.values())kt.addComponent(We);const Ke=new wt(et,Ut,kt);return On.set(en,Ke),Ke}function mr(et=ao){const Se=On.get(et);if(!Se)throw Vt.create("no-app",{appName:et});return Se}function Te(){return Array.from(On.values())}function sr(et){return kn.apply(this,arguments)}function kn(){return(kn=(0,v.Z)(function*(et){const Se=et.name;On.has(Se)&&(On.delete(Se),yield Promise.all(et.container.getProviders().map(Ut=>Ut.delete())),et.isDeleted=!0)})).apply(this,arguments)}function Ei(et,Se,Ut){var en;let fn=null!==(en=Bu[et])&&void 0!==en?en:et;Ut&&(fn+=`-${Ut}`);const kt=fn.match(/\s|\//),Ke=Se.match(/\s|\//);if(kt||Ke){const We=[`Unable to register library "${fn}" with version "${Se}":`];return kt&&We.push(`library name "${fn}" contains illegal characters (whitespace or "/")`),kt&&Ke&&We.push("and"),Ke&&We.push(`version name "${Se}" contains illegal characters (whitespace or "/")`),void ee.warn(We.join(" "))}Xi(new X.wA(`${fn}-version`,()=>({library:fn,version:Se}),"VERSION"))}function Nt(et,Se){if(null!==et&&"function"!=typeof et)throw Vt.create("invalid-log-argument");(0,k.Am)(et,Se)}function Gr(et){(0,k.Ub)(et)}Xi(new X.wA("platform-logger",Se=>new ne(Se),"PRIVATE")),Ei(me,"0.7.10",""),Ei(me,"0.7.10","esm2017"),Ei("fire-js","")},3910:(Ye,we,F)=>{"use strict";F.d(we,{wA:()=>k,H0:()=>ue});var v=F(8239),X=F(3854);class k{constructor(L,V,Q){this.name=L,this.instanceFactory=V,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(L){return this.instantiationMode=L,this}setMultipleInstances(L){return this.multipleInstances=L,this}setServiceProps(L){return this.serviceProps=L,this}setInstanceCreatedCallback(L){return this.onInstanceCreated=L,this}}const ce="[DEFAULT]";class ne{constructor(L,V){this.name=L,this.container=V,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(L){const V=this.normalizeInstanceIdentifier(L);if(!this.instancesDeferred.has(V)){const Q=new X.BH;if(this.instancesDeferred.set(V,Q),this.isInitialized(V)||this.shouldAutoInitialize())try{const Y=this.getOrInitializeService({instanceIdentifier:V});Y&&Q.resolve(Y)}catch(Y){}}return this.instancesDeferred.get(V).promise}getImmediate(L){var V;const Q=this.normalizeInstanceIdentifier(null==L?void 0:L.identifier),Y=null!==(V=null==L?void 0:L.optional)&&void 0!==V&&V;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Y)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(ae){if(Y)return null;throw ae}}getComponent(){return this.component}setComponent(L){if(L.name!==this.name)throw Error(`Mismatching Component ${L.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=L,this.shouldAutoInitialize()){if("EAGER"===L.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ce})}catch(V){}for(const[V,Q]of this.instancesDeferred.entries()){const Y=this.normalizeInstanceIdentifier(V);try{const ae=this.getOrInitializeService({instanceIdentifier:Y});Q.resolve(ae)}catch(ae){}}}}clearInstance(L=ce){this.instancesDeferred.delete(L),this.instancesOptions.delete(L),this.instances.delete(L)}delete(){var L=this;return(0,v.Z)(function*(){const V=Array.from(L.instances.values());yield Promise.all([...V.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...V.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(L=ce){return this.instances.has(L)}getOptions(L=ce){return this.instancesOptions.get(L)||{}}initialize(L={}){const{options:V={}}=L,Q=this.normalizeInstanceIdentifier(L.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Y=this.getOrInitializeService({instanceIdentifier:Q,options:V});for(const[ae,be]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(ae)&&be.resolve(Y);return Y}onInit(L,V){var Q;const Y=this.normalizeInstanceIdentifier(V),ae=null!==(Q=this.onInitCallbacks.get(Y))&&void 0!==Q?Q:new Set;ae.add(L),this.onInitCallbacks.set(Y,ae);const be=this.instances.get(Y);return be&&L(be,Y),()=>{ae.delete(L)}}invokeOnInitCallbacks(L,V){const Q=this.onInitCallbacks.get(V);if(Q)for(const Y of Q)try{Y(L,V)}catch(ae){}}getOrInitializeService({instanceIdentifier:L,options:V={}}){let Q=this.instances.get(L);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ee=L,ee===ce?void 0:ee),options:V}),this.instances.set(L,Q),this.instancesOptions.set(L,V),this.invokeOnInitCallbacks(Q,L),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,L,Q)}catch(Y){}var ee;return Q||null}normalizeInstanceIdentifier(L=ce){return this.component?this.component.multipleInstances?L:ce:L}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(L){this.name=L,this.providers=new Map}addComponent(L){const V=this.getProvider(L.name);if(V.isComponentSet())throw new Error(`Component ${L.name} has already been registered with ${this.name}`);V.setComponent(L)}addOrOverwriteComponent(L){this.getProvider(L.name).isComponentSet()&&this.providers.delete(L.name),this.addComponent(L)}getProvider(L){if(this.providers.has(L))return this.providers.get(L);const V=new ne(L,this);return this.providers.set(L,V),V}getProviders(){return Array.from(this.providers.values())}}},5422:(Ye,we,F)=>{"use strict";F.d(we,{in:()=>X,Yd:()=>me,Ub:()=>ue,Am:()=>ee});const v=[];var X=(()=>{return(L=X||(X={}))[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT",X;var L})();const k={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ce=X.INFO,ne={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},re=(L,V,...Q)=>{if(V<L.logLevel)return;const Y=(new Date).toISOString(),ae=ne[V];if(!ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${V})`);console[ae](`[${Y}]  ${L.name}:`,...Q)};class me{constructor(V){this.name=V,this._logLevel=ce,this._logHandler=re,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(V){if(!(V in X))throw new TypeError(`Invalid value "${V}" assigned to \`logLevel\``);this._logLevel=V}setLogLevel(V){this._logLevel="string"==typeof V?k[V]:V}get logHandler(){return this._logHandler}set logHandler(V){if("function"!=typeof V)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=V}get userLogHandler(){return this._userLogHandler}set userLogHandler(V){this._userLogHandler=V}debug(...V){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...V),this._logHandler(this,X.DEBUG,...V)}log(...V){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...V),this._logHandler(this,X.VERBOSE,...V)}info(...V){this._userLogHandler&&this._userLogHandler(this,X.INFO,...V),this._logHandler(this,X.INFO,...V)}warn(...V){this._userLogHandler&&this._userLogHandler(this,X.WARN,...V),this._logHandler(this,X.WARN,...V)}error(...V){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...V),this._logHandler(this,X.ERROR,...V)}}function ue(L){v.forEach(V=>{V.setLogLevel(L)})}function ee(L,V){for(const Q of v){let Y=null;V&&V.level&&(Y=k[V.level]),Q.userLogHandler=null===L?null:(ae,be,...he)=>{const K=he.map(ye=>{if(null==ye)return null;if("string"==typeof ye)return ye;if("number"==typeof ye||"boolean"==typeof ye)return ye.toString();if(ye instanceof Error)return ye.message;try{return JSON.stringify(ye)}catch(ge){return null}}).filter(ye=>ye).join(" ");be>=(null!=Y?Y:ae.logLevel)&&L({level:X[be].toLowerCase(),message:K,args:he,type:ae.name})}}}},8239:(Ye,we,F)=>{"use strict";function v(k,ce,ne,re,me,ue,ee){try{var L=k[ue](ee),V=L.value}catch(Q){return void ne(Q)}L.done?ce(V):Promise.resolve(V).then(re,me)}function X(k){return function(){var ce=this,ne=arguments;return new Promise(function(re,me){var ue=k.apply(ce,ne);function ee(V){v(ue,re,me,ee,L,"next",V)}function L(V){v(ue,re,me,ee,L,"throw",V)}ee(void 0)})}}F.d(we,{Z:()=>X})}},Ye=>{Ye(Ye.s=847)}]);